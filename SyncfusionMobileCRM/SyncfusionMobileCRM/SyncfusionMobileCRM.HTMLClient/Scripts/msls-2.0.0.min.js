/*!
  Microsoft LightSwitch JavaScript Library v2.0.0
  Copyright (C) Microsoft Corporation. All rights reserved.
*/
(function(n,t){"use strict";var d=n.Object,c=n.WinJS,rv=n.jQuery,i=rv,ot=n.Globalize,r=d.create({}),ri=n.setTimeout,so=n.clearTimeout,di,vu,bf,fr,gr,ai,ku,u,v,sh,pt,ho,l,nu,e,g,at,hh,er,co,vt,si,du,st,o,s,ch,lo,vi,b,gu,tu,h,lh,dt,gt,kf,yu,or,ah,vh,y,uv,ct,pu,yh,df,f,ph,ar,iu,gf,ao,yi,ht,nf,vr,wu,wh,ut,yr,ne,ni,bh,ru,vo,kh,dh,gh,nc,tc,ic,yo,uu,po,rc,uc,fc,wo,te,ft,fu,pi,gi,pr,wr,sr,eu,tf,rf,hi,ou,hr,ec,oc,sc,hc,cc,lc,ac,vc,yc,pc,bo,su,uf,wc,ff,ko,go,bc,kc,nr,dc,gc,nl,tl,il,rl,ul,ns,ts,fl,ef,ie,re,of,is,rs,el,ol,us,fs,sl,hl,sf,yt,ue,bu,fe,cl,ee,es,fv,kt,p,hu,os,ss,oe,hs,tt,wi,se,ev,ll,al,vl,yl,ky,cs,ei,ls,ci,tr,et,bi,k,as,he,ce,le,hf,pl,cr,gl,ii,ga,kr,bt,lt,no,wy,gs,to,io,ro,yf,nh,th,ir,nv,lr,ki,rr,ui,tv,ih,rh,a,nt,rt,fi,w,uo,fo,au,fh,eh,by,oo,oh;(function(){function s(n,t,r,u){var h,f,c,e,o,s;if(!n||!t)return null;for(h=n.split(r),f=0,c=h.length;f<c;f++)if(e=h[f],o=e.indexOf("="),o>0&&i.trim(e.substr(0,o))===t)return s=e.substr(o+1),u&&(s=decodeURIComponent(s)),s;return null}function h(n,t){var e={},o,r,u,f;if(!n)return e;for(o=n.split(t),r=0;r<o.length;r++)f=o[r],u=f.indexOf("="),u>0&&(e[i.trim(f.substr(0,u))]=f.substr(u+1));return e}var o=d.prototype.toString,e=d.getPrototypeOf(r)!==d.prototype?d.getPrototypeOf(r):null,t,f;di=!n.msls,t=n.location,f=t.protocol+"//"+t.host+t.pathname,vu=f.substring(0,f.lastIndexOf("/")),bf=vu.substring(0,vu.lastIndexOf("/")),fr={enableModalScrollRegions:null,showContentBehindDialog:null,transitionAnimationLevel:null},sh=function(n,t){var r="[\\?&]"+t+"=([^&#]*)",u=new RegExp(r),i=u.exec(n);return i?i[1]:null},gr=function(t){var i,u,f,r,e;return t?(i=sh(n.location.href,t),i)?i:(u="msls-client-parameters",f=document.cookie,r=s(f,u,";",!0),r&&(e=h(r,"&"),i=e[t]),i):null},ai=function(n){return!!n&&o.call(n)==="[object Function]"},ku=function(n,t){var i=n===t;return i||!n||!t||!n.valueOf||n.valueOf!==t.valueOf||(i=n.valueOf()===t.valueOf()),i},u=function(n,t,i,r){t.charCodeAt(0)===95||r?d.prototype.hasOwnProperty.call(n,t)?n[t]=i:d.defineProperty(n,t,{configurable:!0,enumerable:!di,writable:!0,value:i}):n[t]=i},v=function(n,t,i){e&&u(e,n,t,i)}})(),function(){function a(){for(++h===l&&(clearInterval(c),r=!1);t.length;){var n=t.shift(),u=n.invokeTime,i=n.nativeHandle;n.nativeHandle=f(n.action,Math.max(u-Date.now(),0),n.args),i&&o(i)}}function e(){r||(c=setInterval(a,s),r=!0),h=0}function v(n,i,u){var o={action:n,invokeTime:Date.now()+(i||0),args:u,invoked:!1,nativeHandle:null};return r?(t.push(o),Date.now()-o.invokeTime>s?e():o.nativeHandle=f(function(){if(!o.invoked){o.invoked=!0,o.action();var n=t.indexOf(o);t.splice(n,1)}},i,u),o):(o.nativeHandle=f(n,i,u),o)}function y(n){var i;n.nativeHandle&&(o(n.nativeHandle),n.nativeHandle=null),i=t.indexOf(n),i!==-1&&t.splice(i,1)}function p(){u=!0;try{while(i.length)i.shift()()}finally{u=!1}}var f=n.setTimeout,o=n.clearTimeout,s=100,l=30,h=0,c,r=!1,t=[],i,u;navigator.userAgent.match(/OS 6(_\d)+/i)&&(ri=v,so=y,n.addEventListener("touchstart",e,!0),n.addEventListener("touchend",e,!0)),i=[],u=!1,pt=function(n){i.push(n),i.length!==1||u||ri(p,0)}}(),function(){function u(n){var u,e,r,i,f,o;if(!n)return{};for(u={},e=d.keys(n),f=0,o=e.length;f<o;f++)r=e[f],i=n[r],i&&typeof i=="object"&&("value"in i||"get"in i||ai(i.defineOn))?(i.configurable===t&&(i.configurable=!0),di||(i.enumerable=!0),i.get||i.writable!==t||(i.writable=!0),ai(i.defineOn)?i.enumerable===t&&(i.enumerable=r.charCodeAt(0)!==95):u[r]=i):u[r]=i;return u}function f(n,t){var u,f,i,r,e;if(t)for(u=d.keys(t),r=0,e=u.length;r<e;r++)f=u[r],i=t[f],i&&typeof i=="object"&&ai(i.defineOn)&&i.defineOn(n,f)}function i(n,t,i){var e=u(i),r=c.Namespace.defineWithParent(n,t,e);return f(r,i),r}ho=function(n){return n&&typeof n=="object"&&("value"in n||"get"in n)&&(n={value:n}),n},l=function(n,t){return{get:n,set:t}},nu=function(n,t){return n?i(r,n,t):i({msls:r},"msls",t)},e=function(n,t,r,e,o,s){var l=u(o),a=u(s),h;return e?c.Class.derive(e,r,l,a):c.Class.define(r,l,a),f(r.prototype,o),f(r,s),t&&(h={},h[t]=r,n&&typeof n!="string"?i({_:n},"_",h):nu(n,h)),r},g=function(n){for(var r=[n],t=1,i=arguments.length;t<i;t++)r.push(u(arguments[t]));for(c.Class.mix.apply(null,r),t=1,i=arguments.length;t<i;t++)f(n.prototype,arguments[t])},at=function(n,t){var u=d.keys(t)[0],f=t[u],e,r={};return r[u]=ho(f),e=n&&typeof n!="string"?i({_:n},"_",r):nu(n,r),f},hh=function(n,t){if(n)for(var i in n)if(n[i]===t)return!0;return!1},v("_addToNamespace",function(t,r){return i(n,t,r)})}(),function(){function t(t,i){var u=this,r=n.eventMixin;t.addEventListener||(t.addEventListener=r.addEventListener),t.dispatchEvent||d.defineProperty(t,"dispatchEvent",{configurable:!0,enumerable:!di,writable:!0,value:r.dispatchEvent}),t.removeEventListener||(t.removeEventListener=r.removeEventListener),u.noProperty||d.defineProperties(t,n.createEventProperties(i))}function i(n,t){var i=this,r=n.dispatchEvent,u=i.value;d.defineProperty(n,t,{configurable:!0,enumerable:!di,writable:!0,value:function(n,t){return u.call(this,n,t,r)}})}var n=c.Utilities;er=function(n){return{noProperty:n,defineOn:t}},co=function(n){return{value:n,defineOn:i}}}(),function(){var t=new(c.Class.mix(null,c.Utilities.eventMixin));vt=function(n,i){t.addEventListener(n,i)},si=function(n,i){t.removeEventListener(n,i)},du=function(n,t){function i(){si(n,i),t.apply(this,arguments)}vt(n,i)},st=function(n,i){t.dispatchEvent(n,i)},(!!n.msls||n.__mslsTestMode)&&(v("subscribe",vt),v("unsubscribe",si))}(),function(){function i(n,t){t&&o(n,new Date(t))}var u=!!n.__mslsTestMode,e="codeMarkerNotification",r=u?[]:null,f,t;o=function(n,t){if(u){var i={marker:n,time:t||new Date};r?r.push(i):st(e,i)}},ch=function(){u&&!!r&&(r.forEach(function(n){st(e,n)}),r=null)},u&&(f=n.performance,t=f&&f.timing,t&&(i("Application.NavigationStart",t.navigationStart),i("Application.ConnectServerStart",t.connectStart),i("Application.ConnectServerReady",t.connectEnd),i("Application.RequestHtml",t.requestStart),i("Application.GetHtmlStart",t.responseStart),i("Application.GetHtmlEnd",t.responseEnd),i("Application.LoadDomStart",t.domLoading),i("Application.DomParsed",t.domInteractive)),n.startupTime&&o("Application.ScriptStart",n.startupTime)),s={applicationDomLoaded:"Application.LoadDomEnd",applicationRun:"Application.Run",dispatchStart:"DispatchOperationCodeQueue.Start",dispatchEnd:"DispatchOperationCodeQueue.End",loadResourcesStart:"LoadResources.Start",loadResourcesEnd:"LoadResources.End",loadModelStart:"LoadModel.Start",loadModelEnd:"LoadModel.End",parseModelStart:"ParseModel.Start",parseModelEnd:"ParseModel.End",processModelStart:"ProcessModel.Start",processModelEnd:"ProcessModel.End",loadSharePointStart:"LoadSharePoint.Start",loadSharePointEnd:"LoadSharePoint.End",queryDataStart:"QueryData.Start",queryDataEnd:"QueryData.End",queryDataApplyEnd:"QueryData.ApplyEnd",saveDataStart:"SaveData.Start",saveDataEnd:"SaveData.End",loadScreenStart:"LoadScreen.Start",loadScreenEnd:"LoadScreen.End",pageActivationStart:"PageActivation.Start",pageActivationEnd:"PageActivation.End",createPageStart:"CreatePage.Start",createPageEnd:"CreatePage.End",navigationStart:"Navigation.Start",navigationEnd:"Navigation.End",navigationBackEnd:"NavigationBack.End",cleanNavigationStackStart:"CleanNavigationStack.Start",cleanNavigationStackEnd:"CleanNavigationStack.End",transitionPrepare:"Transition.Prepare",transitionStart:"Transition.Start",transition_Stage1Start:"Transition_Stage1.Start",transition_Stage2Start:"Transition_Stage2.Start",transition_Stage3Start:"Transition_Stage3.Start",transition_CleanupStart:"Transition_Cleanup.Start",transitionEnd:"Transition.End",fillCollectionStart:"FillCollection.Start",fillCollectionEnd:"FillCollection.End",controlViewCreating:"ControlViewCreating",controlViewCreated:"ControlViewCreated",listViewLoadStart:"ListViewLoad.Start",listViewLoadDataLoaded:"ListViewLoad.DataLoaded",listViewLoadApplyEnd:"ListViewLoad.ApplyEnd",listViewLoadLoadMore:"ListViewLoad.LoadMore",listViewLoadEnhanceView:"ListViewLoad.EnhanceView",listViewLoadEnd:"ListViewLoad.End",listItemClicked:"ItemClicked",listSelectedItemChanged:"SelectedItemChanged",tableLoadStart:"TableLoad.Start",tableLoadDataLoaded:"TableLoad.DataLoaded",tableLoadApplyEnd:"TableLoad.ApplyEnd",tableLoadLoadMore:"TableLoad.LoadMore",tableLoadEnhanceView:"TableLoad.EnhanceView",tableLoadEnd:"TableLoad.End",tableItemClicked:"TableItemClicked",tableSelectedItemChanged:"TableSelectedItemChanged",modalViewShowStart:"ModalViewShow.Start",modalViewShowEnd:"ModalViewShow.End",modalViewCloseStart:"ModalViewClose.Start",modalViewCloseEnd:"ModalViewClose.End",userTap:"User.Tap",executeActionStart:"ExecuteAction.Start",executeActionEnd:"ExecuteAction.End",layoutPartialRequest:"Layout.PartialReq",layoutFullRequest:"Layout.FullReq",layoutStart:"Layout.Start",layoutEnd:"Layout.End",layoutEndNotified:"Layout.EndNotified",updateAttachedLabelsStart:"UpdateLabels.Start",updateAttachedLabelsEnd:"UpdateLabels.End",goUrlStart:"GoUrl.Start",goUrlEnd:"GoUrl.End",changePageStart:"ChangePage.Start",changePageEnd:"ChangePage.End",createTemplateStart:"CreateTemplate.Start",createTemplateEnd:"CreateTemplate.End",createPageControlsStart:"CreatePageControls.Start",createPageControlsEnd:"CreatePageControls.End",getPopupContentStart:"GetPopupContent.Start",getPopupContentEnd:"GetPopupContent.End",openPopupStart:"OpenPopup.Start",openPopupEnd:"OpenPopup.End",closePopupStart:"ClosePopup.Start",closePopupEnd:"ClosePopup.End",createPopupStart:"CreatePopup.Start",createPopupEnhance:"CreatePopup.Enhance",createPopupEnd:"CreatePopup.End",progressShow:"Progress.Show",progressHide:"Progress.Hide"}}(),function(){lo=function(n){return d.keys(n).map(function(t){return n[t]})}}(),function(){function n(n){this._array=n,this._length=n.length,this._index=-1}e(r,"Sequence",function(){},null,{array:l(function(){var n=[];return this.each(function(){n.push(this)}),n}),each:function(n){var t=this._iterator?this._iterator():null,i;if(t)while(t.next())if(i=t.item(),n.call(i,i)===!1)break}}),vi=r.Sequence,e(vi,"Array",function(n){vi.call(this),u(this,"_array",n)},vi,{_iterator:function(){return new n(this._array)}}),n.prototype.next=function(){return++this._index<this._length},n.prototype.item=function(){return this._array[this._index]},b=function(n){return new vi.Array(n)},v("Sequence",vi),v("iterate",b)}(),gu="change",function(){function f(n,t){if(i.length){var r=n._dependents||{},f=r[t];f||(u(n,"_dependents",r),f=r[t]=[]),f.push(i[i.length-1])}}function s(n,t,r){var f=n._trackingStub;f||u(n,"_trackingStub",f={o:n}),i.push({trackingStub:f,name:t,version:r})}function c(){i.pop()}function a(n){var t=n.trackingStub.o,i,u,r;t&&(i=n.name,u=t._computeStates,r=u[i],r.version===n.version&&(r.isComputed=!1,t.dispatchChange(i)))}function r(n){var t=gu;return n&&(t=n+"_"+t),t}function e(n){var i=n.target,t=n.propertyName;i.dispatchEvent(r(t),t),i.dispatchEvent(gu,t)}function v(n,t){this.addEventListener(r(n),t)}function y(t){var o=!n,s=this._dependents,u=s?s[t]:null,h,r={target:this,propertyName:t},i,f;if(!u||!u.length)o?e(r):n.push(r);else{for(o&&(n=[]),n.push(r),s[t]=[],i=0,f=u.length;i<f;i++)a(u[i]);if(o)for(h=n,n=null,i=0,f=h.length;i<f;i++)r=h[i],e(r)}}function p(n,t){this.removeEventListener(r(n),t)}function o(n,i){var h=n.constructor,e=this,o={},s,c;tu(h),o[r(i)]=er(!0),e.get?(c=e.get,o[i]=l(function(){return f(this,i),c.call(this)},e.set)):(s="__"+i,e.initialValue!==t&&(o[s]={enumerable:!di,value:e.initialValue}),o[i]=l(function(){return f(this,i),this[s]},function(n){this[s]!==n&&(u(this,s,n),this.dispatchChange(i))})),typeof e.enumerable=="boolean"&&(o[i].enumerable=e.enumerable),g(h,o)}function w(n,t){var e=n.constructor,i=this,r={},f="__"+t;r[t]=h(null,function(){var r=this,e=r._computeStates||{},n=e[t];if(n||(u(r,"_computeStates",e),n=e[t]={version:0,isComputing:!1,isComputed:!1}),!n.isComputing&&!n.isComputed){s(r,t,++n.version),n.isComputing=!0;try{u(r,f,i.compute.call(r)),n.isComputed=!0}finally{n.isComputing=!1,c()}}return r[f]},i.set),typeof i.enumerable=="boolean"&&(r[t].enumerable=i.enumerable),g(e,r)}var i=[],n;tu=function(n){var t=n.prototype;"onchange"in t||g(n,{change:er()}),t.addChangeListener||(t.addChangeListener=v),t.dispatchChange||d.defineProperty(t,"dispatchChange",{configurable:!0,enumerable:!di,writable:!0,value:y}),t.removeChangeListener||(t.removeChangeListener=p)},h=function(n,t,i){return{get:t,set:i,initialValue:n,defineOn:o}},lh=function(n){n.defineOn=o},dt=function(n,t){return{compute:n,set:t,defineOn:w}}}(),function(){var n,t;gt=function(n,t){var i=n.__dependencies;i||u(n,"__dependencies",i=[]),i.push(t),u(t,"__sponsor",n)},kf=function(n){var r=n.__sponsor,t,i;if(r&&!r.__disposed&&(t=r.__dependencies,Array.isArray(t)))for(i=t.length-1;i>=0;i--)if(t[i]===n){t.splice(i,1);return}r&&(n.__sponsor=null)},vh=function(n){return!!n.__sponsor},y=function(n){var i=n,o,t,r,e,f,s;if(n&&!n.__disposed){while(i){if(t=i._onDispose,!t)break;if(t!==o){try{t.call(n)}catch(h){}o=t}i=d.getPrototypeOf(i)}if(r=n.__dependencies,Array.isArray(r))for(n.__dependencies=null,f=0,s=r.length;f<s;f++)e=r[f],y(e),e.__sponsor=null;n._listeners=null,n._dependents=null,n._trackingStub&&(n._trackingStub.o=null,n._trackingStub=null),u(n,"__disposed",!0)}},uv=function(n){return!!n.__disposed},e(r,"AutoDisposeEventListener",function(n,t,i){var r=this;r.source=n,r.eventName=t,r.listener=i},null,{_onDispose:function(){var n=this,t=n.source;t&&t.removeEventListener(n.eventName,n.listener),kf(n)}}),yu=function(n,t,i,u){n.addEventListener(t,u);var f=new r.AutoDisposeEventListener(n,t,u);return gt(i,f),f},e(r,"AutoDisposeChangeListener",function(n,t,i){var r=this;r.source=n,r.propertyName=t,r.listener=i},null,{_onDispose:function(){var n=this,t=n.source;t.removeChangeListener&&t.removeChangeListener(n.propertyName,n.listener),kf(n)}}),or=function(n,t,i,u){n.addChangeListener(t,u);var f=new r.AutoDisposeChangeListener(n,t,u);return gt(i,f),f},e(r,"AutoDisposeNotificationListener",function(n,t){var i=this;i.notificationType=n,i.listener=t},null,{_onDispose:function(){var n=this;si(n.notificationType,n.listener),kf(n)}}),ah=function(n,t,i){vt(n,i);var u=new r.AutoDisposeNotificationListener(n,i);return gt(t,u),u}}(),function(){function a(n){i.push(n),i.length!==1||r||f||pt(h)}function h(){for(o(s.dispatchStart),f=!0;i.length;)if(i.shift()(),r)break;f=!1,o(s.dispatchEnd)}function y(t,i){n.push([t,i])}function t(){var t=n.length;return t?n[t-1][0]:null}function l(t){var i=n.length,r=n[i-1][1];r(t)}function p(){n.pop()}function w(){r++}function b(){r--,!r&&i.length>0&&!f&&pt(h)}function k(n,i){var r=n._sequence;return ai(r)&&(u(i,"_sequence",r),!t()||l({sequence:r})),i}function e(n){var i=d.getPrototypeOf(n);i._thenEx||c.Class.mix(i.constructor,{done:function(n,r,u){var f=t();f&&(n=f.code(n,!0),r=f.code(r,!0),u=f.code(u,!0)),this._done!==i._done&&(this._done=i._done),this._done(n,r,u)},_done:i.done,then:function(n,r,u){var f=t();return f&&(n=f.code(n,!0),r=f.code(r,!0),u=f.code(u,!0)),this._then!==i._then&&(this._then=i._then),k(this,this._then(n,r,u))},_then:i.then,_thenEx:function(n){return this.then(function(t){return n(null,t)},function(t){return n(t)})}})}var i=[],r=0,f,n=[];ct=function(n,i){function v(){return!e}function et(n){o?o.push(n):n.sequence()}function nt(){if(!v()){var n=e,t=o;for(e=null,w();t.length;)t.shift().sequence();while(n.length)n.shift()();o=null}}function tt(n,t,i){return n?function(){function u(t){var i,u;y(r,et),k++;try{u=n.apply(f,o)}catch(e){t?i=e:r.error(e)}finally{k--,p()}if(g?g=!1:nt(),i)throw i;return u}var f=this,o=Array.prototype.slice.call(arguments,0);return t||v()||k?u(i):(e.push(u),a(function(){v()||e.shift()()}),null)}:n}function it(n,i){if(s||h){if(t()!==r){tt(function(){it(n,i)})();return}try{n?s(n):h(i)}finally{s=h=null}}}var r,rt=t(),ft=!!rt&&!i,e=[],k=0,o=[],g=!1,f,s,h,ut;return ft&&l({sequence:nt}),r={promise:function(){return f},code:function(n,t){return tt(n,null,t)},interleave:function(){t()===r&&(g=!0)},error:function(n){it(n,null)},complete:function(n){it(null,n)}},f=d.create(c.Promise.prototype),u(f,"_sequence",nt),ut=f._cleanupAction,u(f,"_cleanupAction",function(){ut.call(this);var n=v();e=null,o=null,n&&b()}),c.Promise.call(f,function(t,i){var u;n?(s=i,h=t,u=!!rt,tt(n,u).call(r,r),n=null):t()}),f},e(c.Promise.prototype),e(c.Promise.wrapError(null)),e(c.Promise.wrap(null)),v("promiseOperation",ct)}(),function(){function n(n){this._iterator=n._source._iterator(),this._predicate=n._predicate}var t;e(r,"WhereSequence",function(n,t){vi.call(this),u(this,"_source",n),u(this,"_predicate",t)},vi,{_iterator:function(){return new n(this)}}),t=r.WhereSequence,n.prototype.next=function(){for(var t=this._iterator,i=this._predicate,n;t.next();)if(n=t.item(),i.call(n,n))return!0;return!1},n.prototype.item=function(){return this._iterator.item()},g(vi,{all:function(n){return!this.any(function(t){return!n.call(t,t)})},any:function(n){var t=!1;return this.each(function(i){return!n||n.call(i,i)?(t=!0,!1):!0}),t},first:function(n){var t;return this.each(function(i){return!n||n.call(i,i)?(t=i,!1):!0}),t},sum:function(n){var t=0;return this.each(function(i){t+=n?n.call(i,i):i}),t},where:function(n){return new t(this,n)}})}(),function(){var n=/\{(\d+)\}/g;pu=function(t){var i=Array.prototype.slice.call(arguments,1);return t.replace(n,function(n,t){return i[t]})}}(),function(){function g(t,i){var r=n[t];return r?n[t]=null:r=i,r}function nt(n){return n.split("-",1)[0]}function v(n){w[n]&&t.push(n)}var w={},r,u,e,a,t,b,y="msls",p=[y,"client","service"],k,h={},tt=/^\/([^\/]+)\/([^\/]+)$/,l;t=g("__msls_supportedLanguages","EN-US"),t=t.toUpperCase(),t=t.split(";"),i.each(t,function(n,t){t=i.trim(t),t&&(w[t]=!0)}),t=[],r=gr("preferredLanguage"),r=r?i.trim(r.toUpperCase()):null,r&&(v(r),u=nt(r),u!==r&&v(u)),e=g("__msls_defaultLanguage","EN-US"),e=i.trim(e.toUpperCase()),e!==r&&e!==u&&(v(e),a=nt(e),a!==e&&a!==u&&v(a)),o(s.loadResourcesStart),b=new c.Promise(function(n,f){function a(){var r=!1,i,u=!1;if(c--,!c){if(!b)for(e=0;e<t.length;e++)if(i=t[e],u=i==="EN-US",y in h[i]){r=!0;break}b||r?(o(s.loadResourcesEnd),g?f(g):n()):(b=!0,c++,u||(t.push("EN-US"),h["EN-US"]={}),it("EN-US",y))}}function nt(n,t){return n.length>=t.length&&n.substr(n.length-t.length)===t}function rt(n){return l||(l="//ajax.aspnetcdn.com/ajax/globalize/0.1.1/cultures",i("script[type='text/javascript']").each(function(){var n=i(this).attr("src"),r=n?n.toLowerCase():"",t;if(nt(r,"globalize.min.js")||nt(r,"globalize.js"))return t=n.lastIndexOf("/"),l=t>=0?n.substr(0,t)+"/cultures":"cultures",!1})),l+"/globalize.culture."+n+".js"}function tt(n,t){function r(){t&&t()}c++;var u=rt(n);i.ajax({url:u,dataType:"script",cache:!0,error:function(){r(),a()},success:function(){var t;n=n.toUpperCase();for(t in ot.cultures)if(t.toUpperCase()===n){ot.culture(t);break}ot.culture().name.toUpperCase()!==n&&r(),a()}})}function ut(n,t){function u(n){g+=pu("Failed to load resources from {0}. {1}",r,n)+"\n"}var r=vu+"/Content/Resources/"+n;i.ajax({url:r,dataType:"text",cache:!0,error:function(){a()},success:function(n){try{if(n=i.parseJSON(n),!(n instanceof d))throw"Invalid JSON.";t(n)}catch(r){u(pu("Failed to parse the resources JSON string. Failure reason: {0}",r||""))}finally{a()}}})}function ft(n,t){return function(i){h[n][t]=i}}function it(n,t){ut(t+".lang-"+n+".resjson",ft(n,t))}var c=0,w,e,v,b=!1,g="";for(!r||r==="EN"||tt(r,function(){!u||u==="EN"||u===r||tt(u)}),c+=t.length*p.length,e=0;e<t.length;e++)for(w=t[e],h[w]={},v=0;v<p.length;v++)k=p[v],it(w,k);c||(c++,a())}),yh=function(){return b},df=function(n){var i=n,u=tt.exec(n),f,e,r,o,s,c;if(u===null)return{value:i,empty:!0};for(f=u[1].toLowerCase(),e=u[2],r=0;r<t.length;r++)if(o=t[r],f in(s=h[o])&&e in(c=s[f]))if(i=c[e],!i||typeof i!="string")break;else return{value:i,lang:o};return{value:i,empty:!0}},f=function(n){var r=df("/msls/"+n),t=r.value,i;return!r.empty&&arguments.length>1&&(i=Array.prototype.slice.call(arguments,0),i[0]=t,t=pu.apply(null,i)),t},c.Namespace.define("WinJS.Resources",{getString:df})}(),function(){ph=function(n,t){n.message||(n.message=f("errors_core")),"description"in n&&(n.description=n.message),t&&i.extend(n,t);throw n;},ar=function(n,t,i){var r=new Error;n&&(r.name=n),t&&(r.message=t),ph(r,i)},iu=function(n,t){n||(n=f("errors_invalid_operation")),ar("InvalidOperationError",n,t)},gf=function(n,t,r,u){n||(n=f("errors_argument")),ar("ArgumentError",n,i.extend(u,{argumentName:r,argumentValue:t}))},ao=function(n,t){if(!n){var i;i=t?f("errors_falsy_1args",t):f("errors_falsy"),gf(i,n,t)}}}(),function(){function t(n){return new c.Promise(function(t,i){n({url:vu+"/Content/Resources/Generated/model.json",cache:!0,dataType:"text",error:function(n,t,r){i({reason:t,e:r})},success:t})})}function h(n){ar("ModelError",n)}var n;o(s.loadModelStart),n=t(i.ajax),e(r,"ModelService",function(){this.isLoaded=!1,u(this,"_itemDictionary",{})},null,{load:function(){var r=this;return r._loadPromise||u(this,"_loadPromise",new c.Promise(function(u,e){function c(n){o(s.loadModelEnd),e(f("model_failed_server_1args",n.reason+" - "+(n.e||"")))}function l(n){o(s.loadModelEnd),o(s.parseModelStart);try{if(n=i.parseJSON(n),!(n instanceof d))throw f("model_invalid_json");r.model=n}catch(t){e(f("model_failed_parse_1args",t||""));return}o(s.parseModelEnd),o(s.processModelStart);try{r._registerModelItem(r.model,!0),r._resolveReferenceProperties(r.model,!0)}catch(t){e(t);return}o(s.processModelEnd),r.isLoaded=!0,u(r.model)}var h=r._ajaxFunction?t(r._ajaxFunction):n;h.then(l,c)})),r._loadPromise},tryLookupById:function(n){var t;return n&&(t=this._itemDictionary[n],t)?t:null},_registerModelItem:function(n,t){var i;if(n&&n.id&&(this._itemDictionary[n.id]=n),t&&n&&n instanceof d)for(i in n)this._registerModelItem(n[i],t)},_resolveReferenceProperties:function(n,t){var r,i,u;if(n&&n instanceof d)for(r in n)i=n[r],i instanceof d&&"__id"in i?(u=i.__id,(n[r]=this.tryLookupById(u))===null&&h(f("model_reference_error_1args",u))):t&&this._resolveReferenceProperties(i,t)}}),nu("services",{modelService:new r.ModelService})}(),yi="Microsoft.LightSwitch.Extensions",function(){function t(n){return n}var n=/^\$\((.+)\)$/;ht=function(n,t){var r=null,u=null;return n&&(r=n[t],r&&(i.isArray(r)?r.length>0&&(u=r[0]):u=r)),u},nf=function(n,t){var r=null,u=null;return n&&(r=n[t],r&&(u=i.isArray(r)?r:[r])),u},vr=function(t){var i,r;return t&&(i=n.exec(t),i&&(r=df(i[1]),r.empty||(t=r.value))),t},wu=function(){var t=null,i=r.services.modelService,n=i.model;return!i.isLoaded||!n||!n.modules||(t=b(n.modules).first(function(n){return wo(n)})),t},ru=function(n,i,r){var u=null;return!n||!i||(u=b(n).first(function(n){return(!r||r(n))&&(n.name===i||n.name===t(i))})),u},ni=function(n,t){return t&&n.length>1&&(n=n[0].toLowerCase()+n.substring(1)),n},bh=function(n){return!n?n:(n=n[0].toLowerCase()+n.substring(1),n.replace(/([A-Z])/g,"-$1").toLowerCase())},vo=function(n){var u=[],t=r.services.modelService.model;return!t||!t.modules||i.each(t.modules,function(t,r){r.globalItems&&i.each(r.globalItems,function(t,i){(!n||n(i))&&u.push(i)})}),u},wh=function(n){var t=n.id.replace(/\/Properties\[.*\]/,"");return r.services.modelService.tryLookupById(t)},ut=function(n,t){return":"+(t||"RootControl")+"/Properties["+n+"]"},yr=function(n){for(var t=n,i,t=ne(t);!!t&&po(t);)i=t,t=i.underlyingType;return{primitiveType:t,semanticType:i}},ne=function(n){var t;return uu(n)&&(t=n,n=t.underlyingType),n},te=function(n){return n.supportedContentItemKind==="Group"},kh=function(n){return"target"in n},dh=function(n){return"links"in n},gh=function(n){return"value"in n},nc=function(n){return"member"in n},tc=function(n){return"supportedContentItemKind"in n},ic=function(n){return"__isPrimitiveType"in n},yo=function(n){return"entitySets"in n},uu=function(n){return"__isNullableType"in n},po=function(n){return"__isSemanticType"in n},rc=function(n){return"rootContentItem"in n},uc=function(n){return"__isEntityType"in n},fc=function(n){return"__isKeyProperty"in n},wo=function(n){return"homeScreen"in n}}(),function(){at(r,{CollectionChangeAction:{refresh:"refresh",add:"add",remove:"remove"}}),ft=r.CollectionChangeAction,e(r,"CollectionChange",function(n,t,i,r){this.action=n,this.items=t,this.oldStartingIndex=i,this.newStartingIndex=r}),fu=r.CollectionChange,v("CollectionChangeAction",ft),v("CollectionChange",fu)}(),function(){function n(n){return n[0].toUpperCase()+n.substr(1)}function t(t,i){var e=this,r=e.simpleDescriptor,f={},h=!!e.async,o,a,y=n(i),v="get"+y,p="set"+y,w=t.constructor,b=w.Details,k=b?b.PropertySet:null,d=e.detailsClass,s;e.name=i,f[i]=r,lh(r),h&&(r.enumerable=!0,o=r.get,r.get=function(){var t,i=r.rawGet&&r.rawGet(this.details,r),n=o.call(this);if(n._state&&n._state.name!=="success"&&n._state.name!=="error"||n.then(function(n){i=n},function(n){t=n}),t)throw t;return i}),r.set&&(a=r.set,r.set=function(n){var i=this,r,t;if(r=ct(function(r){try{a.call(i,n,r)}catch(u){t=u;throw u;}a.length===1&&r.complete()}),t)throw t;}),h?f[v]=o:(f[v]={enumerable:!di},o=r.get,f[v].value=function(){return c.Promise.as(o.call(this))}),r.set&&(f[p]=h?r.set:{enumerable:!di,value:r.set}),g(w,f),k&&d&&(f={},s="__"+i,f[i]=l(function(){return this[s]||u(this,s,new d(this._details,e)),this[s]}),g(k,f))}pi=function(n,t,i,r,f,o,s){var c=e(n,t,i,f),h=f,v=h?h.Details:null,a=e(c,"Details",r,v),y=e(a,"PropertySet",function(n){u(this,"_details",n)},h?h.Details.PropertySet:null);return g(c,o),g(a,s),g(a,{properties:l(function(){return this._properties||u(this,"_properties",new y(this)),this._properties})}),c},pi(r,"ObjectWithDetails",function(){this.details=new this.constructor.Details(this)},function(n){this.owner=n},null,null,{getModel:function(){var n=this._model;return n||(this._findModel&&(n=this._findModel()),u(d.getPrototypeOf(this),"_model",n)),n}}),gi=r.ObjectWithDetails,pr=gi.Details,tu(gi),tu(pr),g(pr.PropertySet,{all:function(){var t=[],n;for(n in this)n.charCodeAt(0)!==95&&this[n]&&!ai(this[n])&&t.push(this[n]);return t}}),e(pr,"Property",function(n,t){this.owner=n?n.owner:null,u(this,"_details",n),u(this,"_entry",t)},null,{name:l(function(){return this._entry.name}),isReadOnly:l(function(){return!this._entry.set}),getPropertyType:function(){return this._entry.type||d},getModel:function(){var n=this._entry.model;return n||(this._findModel&&(n=this._findModel()),this._entry.model=n),n}}),wr=pr.Property,tu(wr),sr=function(n,i,r){var u=d.create(n);return u.simpleDescriptor=n,u.type=i,u.detailsClass=r,u.defineOn=t,u},v("ObjectWithDetails",gi)}(),function(){pi(r,"BusinessObject",function(){gi.call(this)},function(n){pr.call(this,n)},gi),eu=r.BusinessObject,tf=eu.Details,e(tf,"Property",function(n,t){wr.call(this,n,t)},wr,{_findModel:function(){return ru(this._details.getModel().properties,this._entry.name)}}),rf=tf.Property,v("BusinessObject",eu)}(),function(){e(r,"ValidationResult",function(n,t){this.property=n,this.message=t}),hi=r.ValidationResult,v("ValidationResult",hi)}(),ou=n.OData,hr=n.datajs,function(){pi(r,"Entity",function(n){eu.call(this),ec(this,n)},function(n){tf.call(this,n),oc(this,n)},eu),e(r,"Link",function(n,t,i,r,u,f){sc(this,n,t,i,r,u,f)}),at(r,{LinkState:{unchanged:0,added:1,deleted:3,discarded:4}}),e(r,"LinkSet",function(n,t){hc(this,n,t)}),at(r,{MergeOption:{appendOnly:"appendOnly",unchangedOnly:"unchangedOnly"}}),go=r.MergeOption,e(r,"EntitySet",function(n,t){cc(this,n,t)}),e(r,"DataServiceQuery",function(n,t,i){lc(this,n,t,i)}),pi(r,"DataService",function(n){gi.call(this),ac(this,n)},function(n){pr.call(this,n),vc(this,n)},gi),pi(r,"DataWorkspace",function(){gi.call(this),yc(this)},function(n){pr.call(this,n),pc(this,n)},gi)}(),function(){function ci(){return this._entry.get.call(this._details.owner)}function hr(n){this._entry.set||iu(f("errors_setReadOnlyProperty",this._entry.name)),this._entry.set.call(this._details.owner,n)}function vt(n){return"__"+n+"_IsEdited"}function li(n){return y(n)||k(n)}function y(n){return n.kind==="reference"||n.kind==="virtualReference"}function k(n){return n.kind==="collection"||n.kind==="virtualCollection"}function rt(n){return n.kind==="virtualReference"||n.kind==="virtualCollection"}function bt(n){return"__"+n}function nt(n,t){return n[bt(t.name)]}function cr(){var i=this._details,n=this._entry,r=i._,t;return n.kind==="storage"?!!r[vt(n.serviceName)]:y(n)?(t=nt(i,this),!!t&&!!t.changeInfo):!1}function lr(){return this._details.entityState===n.added?!1:this.isEdited}function kt(n,t,i){return i.association===n&&i.fromEnd===t}function dt(n,t){var r=b(t.associationSet.ends).first(function(){return this.name===t.model.toEnd.name}),i=n.entitySet.dataService,u=r.entityContainer;return u&&(i=i.details.dataWorkspace[ni(u.name)]),i[ni(r.entitySet.name)]}function ut(n,t,i){var r=i.model;return y(t)?i.state===o.available&&(i.value=i.linkSet.getTargetEntity(r.fromEnd.name,n.entity,r.toEnd.name),i.state=o.loaded):i.value||(i.value=new ht(n,i)),i.value}function gt(n,t,i,r,u){var f=n.value;f&&f.dispatchEvent("collectionchange",new fu(t,i,r,u))}function ti(n,t,i,r){r||(r=n.properties[t.name]);var u=n.entity,f;i.state=o.available,f=ut(n,t,i),r.dispatchChange("isLoaded"),y(t)?(r.dispatchChange("value"),u.dispatchChange(t.name)):gt(i,ft.refresh)}function ii(n,t){var i=n;return t&&(i=n.entityProperty.name),i}function ai(i,r,u,f,e,h,c){function bt(){if(v){var n=v.state;ut=n!==o.notInitialized&&n!==o.unavailable,w=v.value}else w=ot.getAnyReferenceEntity(d.name,l,g.name),ut=!!w}function kt(n,i){var r,u;return i&&(u=ii(n,c),r=i[u]),r===t&&(r=null),r}var b=!1,ot=u.linkSet,rt=u.model,lt=u.toPropertyName,st,ht,l,v,d,a,y,g,ut,w,tt,et,it,at,vt,ct,yt,pt,nt,p,wt=i.details.entitySet.dataService.details;if(f&&(st=f.details,lt&&(ht=s(st,st.properties[lt]._entry))),e?(l=i,v=u,d=rt.fromEnd,a=f,y=ht,g=rt.toEnd):(l=f,v=ht,d=rt.toEnd,a=i,y=u,g=rt.fromEnd),h===go.appendOnly){if(bt(),!ut&&(b=!0,u.associationSet.ends.forEach(function(n){n.name===d.name?tt=n.properties:n.name===g.name&&(et=n.properties)}),Array.isArray(tt)&&Array.isArray(et)&&tt.length===et.length&&(vt=l.details._,ct=a&&a.details._,ct)))for(it=0,at=tt.length;it<at;it++)if(yt=kt(tt[it],vt),pt=kt(et[it],ct),!ku(yt,pt)){b=!1;break}}else l.details.entityState===n.unchanged&&(bt(),ut?w!==a&&(!w||ot.deleteReferenceLink(d.name,l,g.name,w),b=!0):b=!0);return b&&(a&&ot.attachLink(d.name,l,g.name,a),v&&(v.state=o.loaded,v.value=a,nt=v.model.name,p=l.details.properties[nt],p.dispatchChange("isLoaded"),p.dispatchChange("value"),l.dispatchChange(nt),wt.dispatchEvent("contentchange",p)),y&&(nt=y.model.name,p=a.details.properties[nt],k(p._entry)?y.state===o.loaded&&(y.state=o.available,gt(y,ft.add,[l])):(y.state=o.loaded,y.value=l,p.dispatchChange("isLoaded"),p.dispatchChange("value"),a.dispatchChange(nt),wt.dispatchEvent("contentchange",p)))),b||w===a}function yi(n,t,i,r,u,f){var s=i.model.fromEnd.multiplicity,h=y(t),e,o,c=[];return e=h?s===wt.many||s===wt.one:!1,h?(o=r[0],(!!o||e)&&ai(n,t,i,o,e,u,f)):r.forEach(function(r){var o=ai(n,t,i,r,e,u,f);o&&c.push(r)}),c}function ar(n,t,i,r,u,f,e){var a=i.model,c=n.entity,o=u,s=!0,h=0,l=yi(c,t,i,e.results,u._mergeOption,r);if(e.results=l,k(t)){do{if(ff(o._skip)||ff(o._take)){s=!1;break}else typeof o._filter=="string"&&(h+=1);o=o._source}while(o);s&&(f&&(h-=1),s=h<=0),s&&ti(n,t,i)}}function vr(n,t,i,r,u,f){if(t)return n.entityProperty.propertyType;var h=i.properties[r],c,a,s,o,l,e;if(h)return e=h.getModel(),e.propertyType;for(c=f.getModel(),s=c.entityType.properties,o=0,l=s.length;o<l;o++)if(e=s[o],e.name===u)return e.propertyType;return null}function ri(n,t,i,r,f){var o,e,c,l,a,v,y,p,s=[],w=dt(n,r),h;if(r.query&&(r.query=null),b(r.associationSet.ends).each(function(){this.name===r.model.fromEnd.name?o=this.properties:e=this.properties}),Array.isArray(e)&&Array.isArray(o)&&e.length===o.length&&e.forEach(function(i,r){c=ii(i,f),l=o[r],a=ii(l,f),v=vr(l,f,n,a,c,w),v&&(y=t[a],p=yr(v).primitiveType,s.push(c+" eq "+ko(y,p.id)))}),s.length>0&&s.length===e.length&&(h=w.filter(s.join(" and "))),h)r.query=h;else if(!f){var k=t[i.serviceName],d=k&&k.__deferred,g=d?d.uri:t.__metadata.uri+"/"+i.serviceName;r.query=new si({_entitySet:dt(n,r)},g)}u(r.query,"_afterQueryExecuted",function(t,u){ar(n,i,r,f,t,!!h,u)})}function s(t,i){var nt=i.name,tt=bt(nt),s=t[tt],h=rt(i),u,y,p,e,f,w,c,l,k,it,g,a,ut,v;return s||(y=t.entitySet.dataService,p=y.details,u=i.data,u||(u=i.data={},u.model=e=t.properties[nt].getModel(),f=h?e.virtualAssociation:e.association,b(f.ends).each(function(n){kt(f,n,e)||(k=b(n.entityType.properties).first(function(t){return kt(f,n,t)}))}),u.toPropertyName=k&&ni(k.name),h?g=b(wu().globalItems).first(function(){return this.virtualAssociation===f}):(it=p.getModel(),g=b(it.associationSets).first(function(){return this.association===f})),u.associationSet=g),s=t[tt]=d.create(u),s.state=o.notInitialized,v=h?y.details.dataWorkspace.details._linkSets:p._linkSets,a=u.associationSet.name,v[a]||(w=[],c={},e=u.model,f=e.association,b(f.ends).each(function(n){l=n.name,w.push(l),c[l]=kt(f,n,e)?i.name:u.toPropertyName}),v[a]=new r.LinkSet(w,c)),s.linkSet=v[a],t.entityState!==n.added&&t.entityState!==n.discarded&&ri(t,t._,i,s,h)),s}function pr(){var t,i=this._details,n=this._entry,u=i._,r;return this.isChanged&&(n.kind==="storage"?t=u.__original[n.serviceName]:y(n)&&(r=s(i,n),t=r.changeInfo.originalEntity)),t}function wi(n){return n.model.toEnd.multiplicity}function et(n,t){var i,r;return t.state===o.notInitialized&&(i=t.model,t.state=wi(t)!==wt.many&&t.linkSet.hasLinks(i.fromEnd.name,n.entity)?o.available:o.unavailable),t.state!==o.unavailable}function bi(){var n=this._details;return et(n,s(n,this._entry))}function ki(){var t=this,i=t._details,u=t._entry,n=s(i,u),e=et(i,n),r=n.loadPromise,f;return r||(n.state!==o.unavailable&&(n.state=o.unavailable,t.dispatchChange("isLoaded")),t.loadError&&(t.loadError=null),r=n.loadPromise=ct(function(e){function s(r,e){f=!0,n.loadPromise=null,r?(t.loadError=r,e.error(r)):(o||ti(i,u,n,t),e.complete(n.value))}r=n.loadPromise=e.promise();var h=i.entity,o=n.query;o?(o.execute()._thenEx(function(n){s(n,e)}),e.interleave()):s(null,e)}),f&&(n.loadPromise=null)),r}function wr(){var n=s(this._details,this._entry);return n.query}function di(n,t){var r=t._addedEntities;i.each(r,function(t,i){return i===n.entity?(r.splice(t,1),!1):!0})}function ot(n,t,r){var u,e,f,o;i.each(t.properties.all(),function(h,c){(u=c._entry,li(u))&&(e=s(t,u),f=e.toPropertyName,f)&&(k(u)?(o=c.value.array,i.each(o,function(t,i){nr(i,f,r,n)})):et(t,e)&&nr(c.value,f,r,n))})}function yt(n){var t=n._;!t.__parent||(n._=t.__parent)}function ui(n,t){var i=n&&n.changeInfo&&n.changeInfo.changeSetIndices;return!!i&&i.indexOf(t)>-1}function gi(n,t,i,r){function o(i){var e;e=i instanceof w?t.hasOwnProperty(i._entry.serviceName):ui(nt(n,i),u),e&&(f=!0,r&&r(t,i,u))}for(var f,u,e=b(n.properties.all()).where(function(n){return n instanceof p}).array;t.__parent;)f=!1,u=t.__changeSetIndex,yt(n),e.forEach(o),f&&su(i,u,-1),t=n._}function tr(n,t,i){n.dispatchChange(i.name),t.dispatchChange("value"),t.dispatchChange("originalValue"),t.dispatchChange("isChanged"),t.dispatchChange("isEdited")}function ir(n,t){var i=n.changeInfo.changeSetIndices;return i[0]===t}function br(){var t=this,r=t.entity,u=t.entityState,c=t.hasEdits,h=t.entitySet,f=h.dataService.details,e=f.dataWorkspace.details,i=t._;u!==n.unchanged&&u!==n.discarded&&(u===n.added?(di(t,h),i.__hasEdits&&(i.__hasEdits=!1),i.__entityState=n.discarded,ot(r,t,ft.remove),gi(t,i,e),su(e,t._.__changeSetIndex,-1),i.__parent&&(i.__parent=null),i.__changeSetIndex=-1,t._=i):u===n.deleted?(yt(t),ot(r,t,ft.add),su(e,i.__changeSetIndex,-1)):u===n.modified&&gi(t,i,e,function(n,i,u){var e=i._entry,f,h;i instanceof w?n.hasOwnProperty(vt(e.serviceName))&&tr(r,i,e):(f=s(t,e),ir(f,u)&&(h=f.model,f.linkSet.discardReferenceChanges(h.fromEnd.name,r,h.toEnd.name),f.value=f.changeInfo.originalEntity,f.state=o.loaded,f.changeInfo=null,tr(r,i,e)))}),t.hasEdits!==c&&t.dispatchChange("hasEdits"),t.dispatchChange("entityState"),--f._changeCount==0&&f.dispatchChange("hasChanges"),f.dispatchEvent("contentchange",r))}function kr(t){var i=this,o=i.properties.all(),u,h=o.length,s,f,e;if(i.entityState!==n.unchanged)return c.Promise.as();if(!t)for(t=[],u=0;u<h;u++)s=o[u],f=s._entry,y(f)&&!rt(f)&&t.push(f.serviceName);return e=new si({_entitySet:i.entitySet},i._.__metadata.uri),t.length>0&&(e=e.expand(t.join(","))),e.merge(r.MergeOption.unchangedOnly).execute()}function dr(){var i=null,n=this.entitySet,r,u,t,f;return!n||!(r=n.dataService)||!(u=r.details)||(t=b(u.properties.all()).first(function(t){return t.value===n}),t&&(f=t.getModel(),i=f.entityType)),i}function rr(t,r,u,f,e){i.each(r.properties.all(),function(i,s){if(s instanceof p){var b=s._entry,a=b.serviceName,v,c=!1,l=!1,h,y,k;s instanceof w?(c=f.hasOwnProperty(a),c&&(delete f[a],v=vt(a),l=f.hasOwnProperty(v),l&&delete f[v])):(h=nt(r,s),c=ui(h,e),c&&(y=h.model,k=h.linkSet.cancelReferenceChanges(y.fromEnd.name,t,y.toEnd.name),l=ir(h,e),h.value=k,h.state=o.loaded,l?h.changeInfo=null:h.changeInfo.changeSetIndices.pop())),c&&(t.dispatchChange(b.name),s.dispatchChange("value"),l&&(u!==n.added&&(s.dispatchChange("originalValue"),s.dispatchChange("isChanged")),s.dispatchChange("isEdited")))}}),yt(r)}function gr(){var t=this.details,r=t.entitySet,u=r.dataService.details,i=t.entityState;(i===n.added||i===n.modified)&&(t.discardChanges(),i=t.entityState),i===n.unchanged&&(fi(t,n.deleted),u.dispatchEvent("contentchange",this),ot(this,t,ft.remove))}function nu(){function t(n){a.call(this,n)}return t}function tu(n){return n._[this.serviceName]}function fi(t,i){var f=t.entitySet.dataService.details,o=f.dataWorkspace.details,r=t._,e=o._nestedChangeSets.length-1,h=t.entityState,s=h===n.unchanged,c=i===n.modified&&r.__changeSetIndex!==e,u;(s||c)&&(u=d.create(r),u.__parent=r,u.__changeSetIndex=e,t._=u,su(o,e,1),s&&(r.__parent||(u.__original=r),u.__entityState=i,u.__hasEdits=!0,t.dispatchChange("entityState"),t.dispatchChange("hasEdits"),++f._changeCount==1&&f.dispatchChange("hasChanges")),r=t._),r.__hasEdits||(r.__hasEdits=!0,t.dispatchChange("hasEdits"))}function ei(t,i,r,u){var e=t.entitySet.dataService.details,f=i.name;u||(u=t.properties[f]),r&&(u.dispatchChange("isEdited"),t.entityState!==n.added&&(u.dispatchChange("isChanged"),u.dispatchChange("originalValue"))),u.dispatchChange("value"),t.entity.dispatchChange(f),e.dispatchEvent("contentchange",u)}function ru(t,i){var r=t._,u=!1,f=t.properties[this.name],e=this.serviceName,o=t.entityState;o!==n.deleted&&o!==n.discarded&&(fi(t,n.modified),r=t._,u=!f.isEdited,r[e]=i,u&&(r[vt(e)]=!0),ei(t,this,u,f))}function ur(n){var t=s(n,this),i=t.model;return et(n,t)?c.Promise.as(ut(n,this,t)):n.properties[this.name].load()}function fr(t,i,r,u,e){var o=t.entityState,h=s(t,i),c;o!==n.deleted&&o!==n.discarded&&(r&&(c=r.details.entityState,(c===n.deleted||c===n.discarded)&&gf(f("entity_setReferencePropertyValue_DeletedDiscarded"),r,"value")),et(t,h)?(or(t,i,o,h,r,e),u.complete()):t.properties[i.name].load().then(function(){or(t,i,o,h,r,e),u.complete()}))}function pt(n,t,i){if(!Array.isArray(t)||t.length<=0)return[];var r=[],u=n.properties;return b(t).each(function(n){var f=i?n.entityProperty.name:n,t=u[f];return t?(r.push(t),!0):(r=[],!1)}),r}function or(t,i,r,u,f,e){var y=u.model,p=y.fromEnd.name,h=u.changeInfo,g=!h,w,a,s,v,k,d,l,c;fi(t,n.modified),w=u.linkSet.setReferenceLink(p,t.entity,y.toEnd.name,f),u.value=f,u.state=o.loaded,h||(h=u.changeInfo={originalEntity:w,changeSetIndices:[]}),a=t._.__changeSetIndex,s=h.changeSetIndices,s||(s=h.changeSetIndices=[]),v=s.length,(v===0||s[v-1]!==a)&&s.push(a),ei(t,i,g),b(u.associationSet.ends).each(function(){this.name===p?k=this.properties:d=this.properties}),l=pt(t,k,e),l.length>0&&(f&&(c=pt(f.details,d,e)),c&&c.length!==l.length||l.forEach(function(n,t){n.value=c?c[t].value:null}))}function uu(n,t,i){fr(n,this,t,i,!1)}function eu(n,t){return ut(n,t,s(n,t))}function ou(n,t,i){fr(n,this,t,i,!0)}function hu(n,t){var r=n,u=nu(n),i={};return pi(null,null,n,u,tt),t&&(t.forEach(function(n){var r,t=n.name;n.serviceName=t,typeof n.kind!="string"&&(n.kind="storage");switch(n.kind){case"storage":n.type||(n.type=String),i[t]=sr(n,n.type,w),n.getValue=tu,n.isReadOnly||(n.setValue=ru);break;case"reference":case"virtualReference":n.type||(n.type=tt),i[t]=sr(n,n.type,st),n.async=!0,n.getValue=ur,n.setValue=n.kind==="reference"?uu:ou;break;case"collection":case"virtualCollection":n.type=ht,i[t]=sr(n,n.type,hi),n.async=!0,n.getValue=ur,n.rawGet=eu}n.get=function(){return n.getValue(this.details)},n.setValue&&(n.set=n.async?function(t,i){n.setValue(this.details,t,i)}:function(t){n.setValue(this.details,t)})}),g(r,i)),r}function cu(n,t,i,r,u){var l=!1,e,h,b,a,v,f,c,k,y,d,p,w;if(!rt(u))return l;for(e=s(t,u),h=e.model,b=h.fromEnd.name,a=e.associationSet.ends,f=0,c=a.length;f<c;f++)if(v=a[f],v.name===b){k=v.properties;break}for(y=pt(t,k,!0),f=0,c=y.length;f<c;f++)if(d=y[f],p=d._entry.serviceName,!ku(i[p],r[p])){w=ut(t,u,e),w&&e.linkSet.deleteReferenceLink(h.fromEnd.name,n,h.toEnd.name,w),e.state=o.unavailable,ri(t,r,u,e,!0),l=!0;break}return l}function lu(t,i,u){u===r.MergeOption.unchangedOnly&&t.details.entityState===n.unchanged&&ns(t,i)}var oi=vi.Array,o={notInitialized:-1,unavailable:0,available:1,loaded:2},wt={many:"Many",zeroOrOne:"ZeroOrOne",one:"One"},si=r.DataServiceQuery,tt=r.Entity,a=tt.Details,it,p,w,st,hi,ht,au,n,lt;at(r,{EntityState:{unchanged:"unchanged",added:"added",modified:"modified",deleted:"deleted",discarded:"discarded"}}),n=r.EntityState,e(a,"Property",function(n,t){rf.call(this,n,t),this.entity=this.owner},rf,{value:h(null,ci,hr)}),it=a.Property,e(a,"TrackedProperty",function(n,t){it.call(this,n,t)},it,{isEdited:h(null,cr),isChanged:h(null,lr),originalValue:h(null,pr)}),p=a.TrackedProperty,e(a,"StorageProperty",function(n,t){p.call(this,n,t)},p,{isReadOnly:h(null,function(){var t=this.getModel();return t.isReadOnly?!0:this._details.entityState===n.added?!1:fc(t)?!0:!this._details.entitySet.canUpdate})}),w=a.StorageProperty,e(a,"ReferenceProperty",function(n,t){p.call(this,n,t)},p,{isLoaded:h(!1,bi),loadError:h(null),isReadOnly:h(null,function(){var t=this._details,r=this._entry,u=s(t,r),e=u.model.fromEnd.name,f,i;return t.entityState===n.added?!1:(b(u.associationSet.ends).each(function(){return this.name===e?(f=this.properties,!1):!0}),i=pt(t,f,rt(r)),i.length>0?b(i).any(function(n){return n.isReadOnly}):!1)}),load:ki}),st=a.ReferenceProperty,dc=function(n){return dt(n.entity.details,s(n._details,n._entry))},gc=function(n){return wi(s(n._details,n._entry))},nl=function(n,t){var i=nt(n,t);return i&&i.value},tl=function(n,t,i){var u=t._entry,r;li(u)&&(r=nt(n,t),r&&(ri(n,i,u,r,rt(u)),r.changeInfo=null,y(u)&&!r.value&&(r.state=o.unavailable,ei(n,u,!1,t))))},il=function(n,t){s(n,t._entry).changeInfo=null},e(r,"EntityCollection",function(n,t){vi.call(this),u(this,"_details",n),u(this,"_data",t)},oi,{_array:[],_iterator:function(){var n=this._data,t=n.model;return n.state===o.available&&(this._array=n.linkSet.getTargetEntities(t.fromEnd.name,this._details.entity,t.toEnd.name),n.state=o.loaded),oi.prototype._iterator.call(this)},collectionchange:er()}),ht=r.EntityCollection,e(a,"CollectionProperty",function(n,t){it.call(this,n,t)},it,{isLoaded:h(!1,bi),loadError:h(null),query:l(wr),value:l(ci),load:ki}),hi=a.CollectionProperty,rl=function(n){var t=n._details,i=n._entry;return ut(t,i,s(t,i))},ul=function(n){var t=n._details,i=s(t,n._entry),r=i.model;return i.linkSet.getAddedEntities(r.fromEnd.name,t.entity,r.toEnd.name)},nr=function(n,t,i,r){if(n&&t){var f=n.details,e=f.properties[t],s=e._entry,u=f[bt(t)];!u||u.state!==o.loaded||(u.state=o.available),k(s)?u&&gt(u,i,[r]):(e.dispatchChange("value"),n.dispatchChange(t))}},g(a,{entityState:h(null,function(){return this._.__entityState||n.unchanged}),hasEdits:h(null,function(){return!!this._.__hasEdits}),discardChanges:br,refresh:kr,_findModel:dr}),oc=function(t,i){t.entity=i,t._=lt?lt:{__entityState:n.added}},kc=function(t){var u=t.entity,i=t.entityState,c=t.hasEdits,s=t.entitySet,f=s.dataService.details,h=f.dataWorkspace.details,e=h._nestedChangeSets.length-1,r=t._,o=r.__changeSetIndex;i===n.unchanged||i===n.discarded||e>=0&&o!==e||(i===n.added?r.__parent?rr(u,t,i,r,o):(di(t,s),r.__hasEdits&&(r.__hasEdits=!1),r.__entityState=n.discarded,ot(u,t,ft.remove)):i===n.deleted?(yt(t),ot(u,t,ft.add)):i===n.modified&&rr(u,t,i,r,o),su(h,e,-1),t.hasEdits!==c&&t.dispatchChange("hasEdits"),i!==t.entityState&&(t.dispatchChange("entityState"),--f._changeCount==0&&f.dispatchChange("hasChanges"),f.dispatchEvent("contentchange",t.entity)))},bc=function(t){var u=t.entityState,v=t.entitySet,y=v.dataService.details,p=y.dataWorkspace.details,a=p._nestedChangeSets.length-1,r=t._,h=r.__changeSetIndex,c=h-1,o=r.__parent,f,e,s,l;return u===n.unchanged||u===n.discarded||a>=0&&h!==a?!1:((u===n.modified||u===n.added)&&i.each(t.properties.all(),function(n,i){i instanceof st&&(f=nt(t,i),ui(f,h)&&(l=f.model,f.linkSet.applyReferenceChanges(l.fromEnd.name,t.entity,l.toEnd.name),e=f.changeInfo.changeSetIndices,e.pop(),s=e.length,(s===0||s>0&&e[s-1]!==c)&&e.push(c)))}),(u!==n.added||o)&&u!==n.deleted&&o.__changeSetIndex===c?(delete r.__parent,delete r.__changeSetIndex,i.each(r,function(n,t){r.hasOwnProperty(n)&&(o[n]=t)}),t._=o,!1):(r.__changeSetIndex--,!0))},g(tt,{deleteEntity:gr}),ec=function(t,i){var c=t,s=c.constructor,f=t.details,u,h,e,o;i||(i=uf(r.application.activeDataWorkspace,t.constructor)),f.entitySet=i,f.entityState===n.added&&(u=i.dataService.details,i._addedEntities.push(t),h=u.dataWorkspace,e=h.details,o=e._nestedChangeSets.length-1,f._.__changeSetIndex=o,su(e,o,1),++u._changeCount==1&&u.dispatchChange("hasChanges"),u.dispatchEvent("contentchange",t),s.created&&s.created.call(null,t))},ns=function(n,t){for(var u=n.details,s=u._,h=u.properties.all(),e=h.length,i,o,f=[],c=u.entitySet.dataService.details,r=0;r<e;r++)i=h[r],i instanceof w?(o=i._entry.serviceName,ku(s[o],t[o])||f.push(i)):i instanceof st&&cu(n,u,s,t,i._entry)&&f.push(i);for(u._=t,r=0,e=f.length;r<e;r++)i=f[r],i.dispatchChange("value"),n.dispatchChange(i.name),c.dispatchEvent("contentchange",i)},ts=function(n,t,i){var u=t.__metadata.uri,r=n._loadedEntities[u];return r?lu(r,t,i):(lt=t,r=new n._entityType(n),lt=null,n._loadedEntities[u]=r),r},fl=function(n,t,i,r,u,f,e){var o=[],h=[],c=s(n.details,t),l=t.data.model;r&&(o=Array.isArray(r.results)?r.results:Array.isArray(r)?r:[r]),o.forEach(function(n){var t=ts(i,n,u);h.push(t),f.push(t),e.push(n)}),yi(n,t,c,h,u,!1),k(t)&&ti(n.details,t,c)},v("EntityState",n),v("Entity",tt),v("EntityCollection",ht),v("_defineEntity",hu)}(),function(){function i(){var n=ot.culture().calendars.standard.patterns;return n.d+" "+n.T}function r(){var n=ot.culture().calendars.standard.patterns;return n.d+" "+n.t}function n(n){return n<10?"0"+n.toString():n.toString()}function u(t){var s=t,o="",i,r,u,f,e;return i=s.ms,i<0&&(o="-",i=-i),r=Math.floor(i/864e5),i-=864e5*r,u=Math.floor(i/36e5),i-=36e5*u,f=Math.floor(i/6e4),i-=6e4*f,e=Math.floor(i/1e3),i-=e*1e3,o+(r>0?r.toString()+".":"")+n(u)+":"+n(f)+":"+n(e)+(i>0?"."+i.toString():"")}ef=function(n){if(!!n){var i=n.split(" "),t,u,f,o,h,c,l,a,v,r,s,e;if(i.length>2)return u=i[0].split("/"),h=parseInt(u[2],10),c=parseInt(u[0],10)-1,l=parseInt(u[1],10),f=i[1].split(":"),a=parseInt(f[0],10),v=parseInt(f[1],10),r=Math.floor(parseInt(f[2],10)*1e3),s=r%1e3,r=(r-s)/1e3,t=new Date(Date.UTC(h,c,l,a,v,r,s)),o=i[2].substr(1).split(":"),e=parseInt(o[0],10)*60+parseInt(o[1],10),!e||(i[2].charAt(0)==="+"?t.setMinutes(t.getMinutes()-e):t.setMinutes(t.getMinutes()+e)),t}return null},ie=function(n){var i=n===null||n===t?"":n.toString(),r=i.indexOf(".");return r!==-1?i.length-r-1:0},re=function(n){return n===""?null:n===null||n===t?n:parseFloat(n.toString())},of=function(n,t){var r="";switch(t){case":Date":r=ot.format(n,"d");break;case":DateTime":case":DateTimeOffset":r=ot.format(n,i());break;case":TimeSpan":r=u(n);break;case":Decimal":case":Double":case":Single":t===":Decimal"&&(n=re(n)),r=ot.format(n,"n"+ie(n).toString());break;default:r=n.toString()}return r},is=function(n,i){var u="",r,e,f,o,s;return n!==t&&n!==null&&(r=yr(i.propertyType),e=r.primitiveType.id,f=r.semanticType?r.semanticType.id:"",u=f===":Date"?of(n,f):of(n,e)),u},rs=function(){return[/^\s*\S+.*/,/^\s*\S+.*@\S+\s*$/]},el=function(n,t){var a,u,o,ut=t.propertyType,p=yr(ut),e=p.primitiveType.id,v=p.semanticType?p.semanticType.id:"",h,c,l,w=ot.culture().numberFormat,s,tt,b,k,d,g,y;if(e===":String"&&n===""&&!!ht(t,":@Required")&&!!ht(t,":@AllowEmptyString"))return{value:""};if(!n)return{value:null};if(a=n.toLowerCase(),e===":Byte"||e===":Int16"||e===":Int32"||e===":Int64")u=ot.parseInt(n),isNaN(u)||n.indexOf(w["."])!==-1?o=f("validation_invalidValue_integer"):(e===":Byte"?(h=0,c=255):e===":Int16"?(h=-65536,c=65535):e===":Int32"?(h=-4294967296,c=4294967295):e===":Int64"&&(h=-18446744073709551616,c=18446744073709551615),(u<h||u>c)&&(o=f("validation_invalidRange_2args",ot.format(h,"n"),ot.format(c,"n"))));else if(e===":Decimal"||e===":Double"||e===":Single")u=ot.parseFloat(n),(isNaN(u)||n.indexOf(w.currency.symbol)!==-1||n.indexOf(w.percent.symbol)!==-1)&&(o=f("validation_invalidValue_decimal"));else if(e===":Boolean")u=a==="true"||a==="1",u||a!=="false"&&a!=="0"&&(o=f("validation_invalidValue_boolean"));else if(v===":Date"||e===":DateTime"||e===":DateTimeOffset")u=ot.parseDate(n,[i(),r()]),!u||isNaN(u.getFullYear())?(u=ot.parseDate(n),(!u||isNaN(u.getFullYear()))&&(o=v===":Date"?f("validation_invalidValue_date"):f("validation_invalidValue_dateTime"))):v===":Date"&&u.setHours(0,0,0,0);else if(e===":TimeSpan")l=/^\s*(\+|-)?((\d+)?\.)?(\d{1,2})?:{0,1}(\d{1,2})?:{0,1}(\d{1,2})?(\.(\d{1,7})?)?\s*$/,s=l.exec(n),s===null?o=f("validation_invalidValue_timespan"):(tt=parseInt(s[3]||"0",10),b=parseInt(s[4]||"0",10),k=parseInt(s[5]||"0",10),d=parseInt(s[6]||"0",10),g=parseInt((s[8]||"0").slice(0,3),10),b>23||k>59||d>59||g>999?o=f("validation_invalidRange_timespan"):(y=tt*864e5+b*36e5+k*6e4+d*1e3+g,s[1]==="-"&&(y=-y),u={ms:y,__edmType:"Edm.Time"}));else if(e===":Guid")u=n,l=/^(\{{0,1}([0-9a-fA-F]){8}(-([0-9a-fA-F]){4}){3}-([0-9a-fA-F]){12}\}{0,1})$/,l.test(u)||(o=f("validation_invalidValue_guid"));else if(v===yi+":WebAddress")l=/^\s*(http|https):\/\/(.*)$/,u=l.test(n)?n:"http://"+n.replace(/^\s*/,"").replace(/\s*$/,"");else if(v===yi+":EmailAddress"){var it=rs(),nt=ht(t,yi+":@EmailAddressProperties"),rt=n.replace(/@.*$/,"");u=it[1].test(n)||!nt||!nt.defaultDomain||!it[0].test(rt)?n:rt+"@"+nt.defaultDomain.replace(/^\s*@/,"")}else u=n;return{value:o?null:u,error:o}}}(),function(){function e(n){var t;return n.length>0&&(t=n[n.length-1]),t}function h(n,t){return{state:n,changeSetIndex:t}}function c(n,t){return n._.__metadata.uri+" "+t._.__metadata.uri}function a(n,t,i,r,u){var f,e;return t===n._endNames[0]?(f=i,e=u):(f=u,e=i),c(f,e)}function w(t,i,r,u){var f=this._loadedLinks,e=a(this,t,i.details,r,u.details),o=f[e];o||(f[e]=new s(t,i,r,u,n.unchanged))}function t(n,t,r){var e=n._addedLinks,u=!0,f;if(r){for(f=e.length-1;f>=0;f--)if(u=t(e[f],f),u===!1)break}else i.each(e,function(n,i){return u=t(i,n)});u!==!1&&i.each(n._loadedLinks,function(n,i){return u=t(i,n)})}function v(t,i,r,u){var s,h=t.state,e,o;return t[i]===r&&(h===n.added||h===n.unchanged)&&(e=t[u],o=e.details.entityState,o!==f.deleted&&o!==f.discarded&&(s=e)),s}function y(n,i,r,u,f){var o=[],e;return t(n,function(n){return(e=v(n,i,r,u),e)?(o.push(e),!f):!0}),o}function b(n,t,i){return y(this,n,t,i)}function k(n,t,i){return y(this,n,t,i,!0)[0]}function d(n,t,i){var u=[],r;return this._addedLinks.forEach(function(f){r=v(f,n,t,i),r&&u.push(r)}),u}function nt(n,i){var r=!1;return t(this,function(t){return r=t[n]===i,!r}),r}function o(n,t,i){var r=n._states,u;r||(r=n._states=[]),u=e(r),!u||u.changeSetIndex!==i?r.push(h(t,i)):u.state=t}function tt(i,r,u,f){var h=r.details._.__changeSetIndex,a=this._propertyNames[u],c,l,e,v;return t(this,function(t){return t[i]===r&&(t[u]===f&&(t.state===n.unchanged||t.state===n.deleted?c=t:l=t),(t.state===n.unchanged||t.state===n.added)&&(e=t)),!(c&&l&&e)}),!e||(e.state===n.unchanged?(o(e,n.deleted,h),v=e[u]):o(e,n.discarded,h),nr(e[u],a,ft.remove,r)),f&&(l?o(l,n.added,h):(!c||c.state!==n.unchanged||o(c,n.deleted,h),this._addedLinks.push(new s(i,r,u,f,n.added,h))),nr(f,a,ft.add,r)),v}function it(n,t,i,r){var u=this,f=u._loadedLinks,e=a(u,n,t.details,i,r.details),o=f[e];o&&(delete f[e],nr(r,u._propertyNames[i],ft.remove,t))}function rt(i,r,u){var f;return t(this,function(t){return t.state!==n.discarded&&t[i]===r?(f=t[u],!1):!0}),f}function ut(i,r,u){var e=this,o=e._propertyNames[u],f;t(e,function(t,s){t[i]===r&&(f=t.state,f===n.added||f===n.discarded?(e._addedLinks.splice(s,1),f===n.added&&nr(t[u],o,ft.remove,r)):f===n.deleted&&(t._states=null,nr(t[u],o,ft.add,r)))},!0)}function et(i,r,u){var s=this,h=s._propertyNames[u],c,f,l,o,a;return t(s,function(t,v){t[i]===r&&(c=e(t._states),c.changeSetIndex===r.details._.__changeSetIndex&&(f=c.state,f===n.added||f===n.discarded?(f===n.added&&(l=t),a=ot(s,r,u,h,t,v,f),a&&(o=a)):(t._states=null,o=t[u])))},!0),l&&nr(l[u],h,ft.remove,r),o&&nr(o,h,ft.add,r),o}function ot(t,i,r,u,f,e){var s=f._states,h;return s.length===1?(t._addedLinks.splice(e,1),s=null):s.pop(),!s||f.state!==n.added||(h=f[r]),h}function st(n,i){var u,f,o,s;t(this,function(t){t[n]===i&&(u=t._states,f=e(u),o=f.changeSetIndex,o===i.details._.__changeSetIndex&&(u.length>1&&(s=u.length-2,u[s].changeSetIndex===o-1&&u.splice(s,1)),f.changeSetIndex-=1))})}function ht(){var i=this,u=i._endNames[0],e=i._endNames[1],r=i._loadedLinks;t(i,function(t,i){var h,l,o,s;switch(t.state){case n.added:h=t[u],l=t[e],o=h.details,s=l.details,o.entityState===f.unchanged&&s.entityState===f.unchanged&&(t._states=null,r[c(o,s)]=t);break;case n.deleted:delete r[i]}}),i._addedLinks.length=0}var s=r.Link,n=r.LinkState,p=r.LinkSet,f=r.EntityState;g(s,{state:l(function(){var t=this._states;return t?e(t).state:n.unchanged})}),sc=function(t,i,r,u,f,e,o){t[i]=r,t[u]=f,e===n.added&&(t._states=[],t._states.push(h(e,o)))},g(p,{attachLink:w,getTargetEntities:b,getTargetEntity:k,getAddedEntities:d,hasLinks:nt,setReferenceLink:tt,deleteReferenceLink:it,getAnyReferenceEntity:rt,discardReferenceChanges:ut,cancelReferenceChanges:et,applyReferenceChanges:st,resetAfterSave:ht}),hc=function(n,t,i){u(n,"_endNames",t),u(n,"_propertyNames",i),u(n,"_loadedLinks",{}),u(n,"_addedLinks",[])}}(),function(){function n(n,t){n.setMilliseconds(n.getMilliseconds()+t)}function u(t,i){n(t,i*864e5)}var t=3,i;ol=function(){return new Date},i={now:function(){return ol()},today:function(){var n=this.now();return n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n},endOfDay:function(){var n=this.now();return n.setHours(23),n.setMinutes(59),n.setSeconds(59),n.setMilliseconds(999),n},startOfWeek:function(){var n=this.today();return u(n,0-n.getDay()),n},endOfWeek:function(){var t=this.startOfWeek();return u(t,7),n(t,-1),t},startOfMonth:function(){var n=this.today();return n.setDate(1),n},endOfMonth:function(){var t=this.startOfMonth();return t.setMonth(t.getMonth()+1),n(t,-1),t},startOfQuarter:function(){var n=this.startOfMonth(),i=n.getMonth();return n.setMonth(i-i%t),n},endOfQuarter:function(){var i=this.startOfMonth(),r=i.getMonth();return i.setMonth(r-r%t+t),n(i,-1),i},startOfYear:function(){var n=this.today();return n.setMonth(0,1),n},endOfYear:function(){var t=this.startOfYear();return t.setFullYear(t.getFullYear()+1),n(t,-1),t}},nu("relativeDates",i),nu("relativeDateTimeOffsetDates",i),v("relativeDates",r.relativeDates),v("relativeDateTimeOffsetDates",r.relativeDates)}(),function(){var t={notDetermined:"NotDetermined",forms:"Forms"},n=t.notDetermined,i=new c.Promise(function(t){try{ou.request({headers:{accept:"application/json;odata=verbose"},requestUri:bf+"/Microsoft.LightSwitch.SecurityData.svc/GetAuthenticationType",method:"GET"},function(i){n=i.GetAuthenticationType,t(n)},function(){t(n)})}catch(r){t(n)}});u(r,"securityDataService",{AuthenticationType:t,getAuthenticationType:function(){return i}})}(),function(){function h(n,t,i,r){var o,e=ht(n,":@MaxLength"),u,s;return e&&(u=r,!!u&&!!u.length&&u.length>e.value&&(s=f("validation_max_length_1args",e.value),o=new hi(t,s))),o}function c(n,i,r,u){var e,s=ht(n,":@Required"),h=n,o=!1;return s&&(u!==""||yr(h.propertyType).primitiveType.id!==":String"||ht(n,":@AllowEmptyString")||(o=!0),(u===t||u===null||o)&&(e=new hi(i,f("validation_required")))),e}function l(n,i,r,u){var a,e=ht(n,":@Range"),o,s,h=null,c=null,l;if(e){switch(r){case":Date":case":Date?":h=":Date",o=new Date(e.minimum),s=new Date(e.maximum);break;case":DateTime":case":DateTime?":h=":DateTime",o=new Date(e.minimum),s=new Date(e.maximum);break;case":DateTimeOffset":case":DateTimeOffset?":h=":DateTimeOffset",o=ef(e.minimum),s=ef(e.maximum);break;default:u!==t&&u!==null&&(l=parseFloat(u),(l<e.minimum||l>e.maximum)&&(c=f("validation_invalidRange_2args",e.minimum,e.maximum)))}!h||!!u&&(!!o&&u.getTime()<o.getTime()||!!s&&u.getTime()>s.getTime())&&(c=f("validation_invalidRange_2args",e.minimum&&of(o,h),e.maximum&&of(s,h))),!c||(a=new hi(i,c))}return a}function a(n,t,i,r){var l,h=ht(n,":@DecimalConstraint"),e,o,c,u,s;return!r||!h||(e=Math.abs(r),o=e.toString().split("."),c=h.precision,u=h.scale,o[0].length>c-u?s=f("validation_decimalconstraints_precision_length_2args",e,c-u):!!o[1]&&o[1].length>u&&(s=f("validation_decimalconstraints_scale_length_2args",e,u)),s&&(l=new hi(t,s))),l}function v(n,t,i,r){var s,h,u=ht(n,e),o=!1;return!r||!u||!u.formats||(u.__regexparray||fs(u),b(u.__regexparray).each(function(n){return o=n.test(r),!o}),o||(h=f("validation_phonenumber_invalidFormat"),s=new hi(t,h))),s}function y(n,t,i,r){var e,h,c=ht(n,o),y=ht(n,s),l=rs(),a=l[0],v=l[1],u=!0;return!r||!c||(a.test(r)?c.domainRequired&&(u=v.test(r)):u=!1),u||(h=f("validation_emailaddress_invalidFormat"),e=new hi(t,h)),e}function u(t,i){var r;for(r in i)n[r]&&(t[r]=!0)}var n,i=r.EntityState,e=yi+":@PhoneNumberValidation",o=yi+":@EmailAddressValidation",s=yi+":@EmailAddressProperties";fs=function(n){var t,e,u,o,i,f,s,r,h;if(e=n.formats,e)for(n.__regexparray=[],n.__formatarray=e.split(";"),f=0,s=n.__formatarray.length;f<s;f++){for(u=n.__formatarray[f].replace(/[^ACN]/gi," ").replace(/\s{2,}/g," ").replace(/^\s*/,"").replace(/\s*$/,""),i=0,t="^[^a-z\\d]*?",o="",r=0,h=u.length;r<h;r++)if(o===u[r])i++;else{i>1&&(t+="{"+i.toString()+"}"),i>0&&(t+=")");switch(u[r]){case"C":case"A":t+="(\\d";break;case"N":t+="([a-z\\d]";break;case" ":t+="[^a-z\\d]+"}i=u[r]===" "?0:1,o=u[r]}i>1&&(t+="{"+i.toString()+"}"),i>0&&(t+=")"),t+="\\s*(?:(extension|extn\\.?|ext\\.?|ex\\.?|x\\.?|#)\\s*([a-z\\d]*))?\\s*$",n.__regexparray[f]=new RegExp(t,"i")}},n={":@MaxLength":h,":@Required":c,":@Range":l,":@DecimalConstraint":a,"Microsoft.LightSwitch.Extensions:@EmailAddressValidation":y,"Microsoft.LightSwitch.Extensions:@PhoneNumberValidation":v},us=function(t,r,f){var o=[],y=t,p=!y.entity?null:y.entity,h=!p?null:p.details.entityState,c,b,l,s=t.getModel(),e=s.propertyType,w,a={},v;if(h===i.deleted||h===i.discarded||f&&h===i.unchanged||t.isReadOnly)return o;uu(e)&&(w=e,e=w.underlyingType),u(a,s),!!e&&po(e)&&u(a,e);for(l in a)v=e,s[l]&&(v=s),c=n[l](v,t,s.propertyType.id,r),!c||o.push(c);return o}}(),function(){function pt(n){function f(n){var r=ni(n),t=i[r];t||(t=i[r]={}),i=t}function e(n){i=u,n.split("/").forEach(f)}var t=n,r,i,u={};do r=t._expand,typeof r=="string"&&r.split(",").forEach(e),t=t._source;while(t);return u}function st(n,t,i,r){var e;if(!(n.length<=0)&&!(d.keys(i).length<=0)){var v=n[0],y=v.details,l=y.properties,o,f,s,a,h,c,u,p=n.length;for(e in i)if(e in l&&(o=l[e],f=o._entry,h=[],c=[],f.kind==="reference"||f.kind==="collection")){for(s=f.serviceName,a=dc(o),u=0;u<p;u++)fl(n[u],f,a,t[u][s],r,h,c),t[u][s]=null;st(h,c,i[e],r)}}}function k(n){var i,t;if(Array.isArray(n))n.forEach(k);else for(i in n)i!=="__metadata"&&(t=n[i],t instanceof Date&&t.__edmType!=="Edm.DateTimeOffset"?t.setMinutes(t.getMinutes()+t.getTimezoneOffset()):typeof t=="object"&&k(t))}function tt(n,t,i){var r={message:n};return i&&(r.validationResult=new hi(t,i)),r}function ht(n){var t=n&&n.statusCode;return!t||typeof t=="number"||(t=parseInt(t,10)),t}function it(n,t){var o=[],ft=n.message,u=n.response,d,ot,r,a,v,s,y,h,g,p,e,nt,c,it,w,b,rt,ut,k,l,et;if(!ft)return null;if(d=ht(u),!u||200<=d&&d<=299)return o.push(tt(ft)),o;try{a=i.parseJSON(u.body),v=a&&(a.error||a["odata.error"]),e=v&&v.message&&v.message.value}catch(ot){try{s=i.parseXML(u.body),s&&(g=s.documentElement&&s.documentElement.prefix,p=g&&g+"\\:",p=p||"",y=i(s))}catch(ot){}!y||(h=y.find(p+"message"),h.length||(h=y.find("message")),!h.length||(e=h.text()))}if(e){try{nt=i.parseXML(e),nt&&(c=i(nt))}catch(ot){}c?(it=c.find("ValidationResult"),it.length>0&&!!t?i.each(it,function(n,r){w=i(r),b=w.find("Message").text(),rt=w.find("Target").text(),ut=w.find("Property").text(),l=null,rt&&ut&&(i.each(t._entitySets,function(n,t){return k=t._loadedEntities[rt],!k}),k&&(l=k.details.properties[ni(ut)])),et=l?l.name+": "+b:b,o.push(tt(et,l,b))}):r=c.find("EntityConflicts").length>0?f("conflict_dialog_message"):c.find("Message").text()||e):r=e}else r=f("dataService_status_error_message",u.statusCode,u.statusText);return!r&&r!==""||o.push(tt(r)),o}function wt(n){var t=n._metadataPromise;return t||(t=n._metadataPromise=ct(function(t){var i=n._serviceUri+"/$metadata";ou.read(i,t.code(function(n){t.complete(n)}),t.code(function(i){t.error(i),n._metadataPromise=null}),ou.metadataHandler)})),t}function rt(n){o(s.queryDataStart);return ct(function(t){function u(n){var i=it(n),r=[];i&&(r=i.map(function(n){return n.message})),t.error(r.join("\r\n"))}function f(f){var h={MinDataServiceVersion:"3.0"},a={requestUri:e,recognizeDates:!0,headers:h},c=gr("SPHostUrl"),l=gr("SPAppWebUrl");f&&(h.accept="application/json;q=0.8, application/json;odata=fullmetadata;q=0.7, application/atomsvc+xml;q=0.5, */*;q=0.1"),c&&(h["X-SPHostUrl"]=c),l&&(h["X-SPAppWebUrl"]=l),ou.read(a,t.code(function(u){o(s.queryDataEnd);var e=[],h=u?i.isArray(u.results)?u.results:[u]:[],c=n._mergeOption,l,f;k(h),i.each(h,function(n,t){r&&(t=ts(r,t,c)),e.push(t)}),e.length>0&&(l=pt(n),st(e,h,l,c)),f=u&&u.__count,!f||typeof f!="string"||(f=parseInt(f,10),f===Number.NaN&&(f=-1)),t.complete({totalCount:f,results:e}),o(s.queryDataApplyEnd)}),t.code(function(n){o(s.queryDataEnd);var i=ht(n.response);i===404?t.complete({totalCount:0,results:[]}):u(n)}),null,null,f)}var e=n._requestUri,r=n._entitySet;ot?wt(r.dataService.details).then(function(n){f(n)},function(n){u(n)}):f(),t.interleave()})}function lt(n){return n||r.MergeOption.appendOnly}function at(n){var t=n.getTimezoneOffset(),i;return t===0?"Z":(t<0?(i="+",t=-t):i="-",i.concat(c(Math.floor(t/60)),":",c(t%60)))}function bt(n,i){if(n===t||n===null)return n;i.charAt(0)!==":"&&(i=":"+i);switch(i){case":Binary":case":Binary?":case":Decimal":case":Decimal?":case":Guid":case":Guid?":case":Int64":case":Int64?":return n.toString();case":DateTimeOffset":case":DateTimeOffset?":return n.__edmType="Edm.DateTimeOffset",n.__offset||(n.__offset=at(n)),n;case":DateTime":case":DateTime?":case":Date":case":Date?":return n=new Date(n.valueOf()),n.setMinutes(n.getMinutes()-n.getTimezoneOffset()),n;default:return n}return}function vt(t,r,u,f,e){f===n.added?(r.method="POST",t.newEntities.push(r)):(r.method="MERGE",t.existingEntities.push(r),r.headers.Prefer="return-content");var v=r.data={},o,s,c,l,a,h,y,p;i.each(u.properties.all(),function(i,w){w instanceof et&&(o=w._entry.serviceName,w instanceof nt?(w.isChanged||f===n.added&&e.hasOwnProperty(o))&&(y=w.getModel(),p=yr(y.propertyType).primitiveType,v[o]=bt(e[o],p.id)):w._entry.kind==="reference"&&(f===n.added||w.isChanged)&&(s=f===n.added?nl(u,w):w.value,s?(c=s.details,l=c.entityState,a=c._,h=l===n.added?"$"+a.__contentID:a.__metadata.uri,f===n.added&&l===n.added?t.links.push({method:"PUT",requestUri:"$"+e.__contentID+"/$links/"+o,data:{uri:h}}):v[o]={__metadata:{uri:h}}):f===n.modified&&t.links.push({method:"DELETE",requestUri:r.requestUri+"/$links/"+o})))})}function kt(t,r){o(s.saveDataStart);var u=t.details,a=u.dataWorkspace.details,l,c,v=t.details._serviceUri+"/$batch",e={newEntities:[],existingEntities:[],links:[]},h;if((l=a._nestedChangeSets.length>0)||(c=t.details.getChanges()).length===0)if(o(s.saveDataEnd),l)iu(f("dataService_save_with_nested_changes"));else{r.complete();return}c.forEach(function(n,t){n.details._.__contentID=t.toString()}),c.forEach(function(t){var r=t.details,f=r.entityState,l=r.entitySet,o=r._,i={recognizeDates:!0},s=i.headers={},h,c;s["Content-ID"]=o.__contentID,s.DataServiceVersion="3.0",f===n.added?(i.requestUri=l._requestUri.substr(u._serviceUri.length+1),vt(e,i,r,f,o)):(h=o.__metadata,i.requestUri=h.uri.substr(u._serviceUri.length+1),c=h.etag,c&&(s["If-Match"]=c),f===n.modified?vt(e,i,r,f,o):f===n.deleted&&(i.method="DELETE",e.existingEntities.push(i)))}),ou.request({requestUri:v,method:"POST",data:{__batchRequests:[{__changeRequests:[].concat(e.newEntities,e.existingEntities,e.links)}]},recognizeDates:!0},r.code(function(t){var l=t.__batchResponses[0].__changeResponses,a=[],e,f,v;l.length===1&&(h=it(l[0],u)),h||(i.each(l,function(t,r){var l=r.headers,w=l&&l["Content-ID"],v,o,s,u,h,y,p;w&&(e=c[parseInt(w,10)],f=e.details,o=f.entityState,s=f.entitySet,u=f._,h=[],v={entity:e,oldEntityState:o,oldHasEdits:f.hasEdits,newEntityData:r.data},o===n.added?(k(r.data),i.each(f.properties.all(),function(n,t){t instanceof nt?r.data[t._entry.serviceName]!==t.value&&h.push(t):tl(f,t,r.data)}),v.changedProperties=h,f._=r.data,u=f._,i.each(s._addedEntities,function(n){return this===e?(s._addedEntities.splice(n,1),!1):!0}),s._loadedEntities[u.__metadata.uri]=e):o===n.modified?(y=u.__original,i.each(f.properties.all(),function(n,t){var i;t instanceof et&&t.isChanged&&(t instanceof nt?(i=t._entry.serviceName,y[i]=u[i]):il(f,t),h.push(t))}),v.changedProperties=h,p=l&&l.ETag,p&&(y.__metadata.etag=p),f._=y):o===n.deleted&&(delete s._loadedEntities[u.__metadata.uri],u.__entityState=n.discarded),a.push(v))}),i.each(u._linkSets,function(n,t){t.resetAfterSave()}),i.each(u.dataWorkspace.details._linkSets,function(n,t){t.resetAfterSave()}),i.each(a,function(t,r){e=r.entity,f=e.details;switch(r.oldEntityState){case n.added:i.each(r.changedProperties,function(){this.dispatchChange("value"),e.dispatchChange(this.name),u.dispatchEvent("contentchange",this)}),r.oldHasEdits&&f.dispatchChange("hasEdits"),f.dispatchChange("entityState");break;case n.modified:i.each(r.changedProperties,function(){this.dispatchChange("originalValue"),this.dispatchChange("isChanged"),this.dispatchChange("isEdited")}),v=r.newEntityData,v&&ns(e,r.newEntityData),f.dispatchChange("hasEdits"),f.dispatchChange("entityState");break;case n.deleted:f.dispatchChange("hasEdits"),f.dispatchChange("entityState"),u.dispatchEvent("contentchange",e)}u._changeCount--}),u.dispatchChange("hasChanges")),o(s.saveDataEnd),h?r.error(h):r.complete()}),r.code(function(n){h=it(n,u),o(s.saveDataEnd),r.error(h)}),ou.batchHandler)}function dt(){var i=this,t,n;if(t=ct(function(t){try{kt(i,t)}catch(r){n=r;throw r;}}),n)throw n;return t}function gt(){var t=[];return i.each(this.properties.all(),function(){var r=this.value;t=t.concat(r._addedEntities),i.each(r._loadedEntities,function(){this.details.entityState!==n.unchanged&&t.push(this)})}),t}function ti(){i.each(this.getChanges(),function(){this.details.discardChanges()})}function ii(){var n=this.dataService,f=null,s=r.services.modelService,t,e,i,u,o;return!!n&&s.isLoaded&&(e=n.details,u=e.dataWorkspace,u&&(o=u.details,i=b(o.properties.all()).first(function(t){return t.value===n}),i&&(t=wu(),t&&(f=ru(t.globalItems,i.name,function(n){return yo(n)}))))),f}function ri(){var u=this._details,t=this._entry,i=u._entitySets,r=t.name,n=i[r];return n||(i[r]=n=new y(this.dataService,t)),n}function ui(){function t(n){w.call(this,n)}return t}function fi(n,t,i,r){var f=n,e=ui(n),u={};return pi(null,null,n,e,p),g(e,{_serviceUri:t}),i&&i.forEach(function(n){var t=n.name;n.serviceName=t,n.get=function(){return this.details.properties[t].value},u[t]=sr(n,y,ft)}),r&&r.forEach(function(n){n.serviceName=n.name,u[n.name]=n}),g(f,u),f}function ei(n){var t,i;if(n){switch(n.charAt(0)){case"Z":return 0;case"+":t=1;break;case"-":t=-1;break;default:return null}return i=n.substr(1).split(":"),t*(parseInt(i[0],10)*60+parseInt(i[1],10))}return null}function oi(n){var i=n,r,t;return!i.__offset||(r=ei(i.__offset))===null?n.getFullYear().toString()+"-"+c(n.getMonth()+1)+"-"+c(n.getDate())+"T"+c(n.getHours())+":"+c(n.getMinutes())+":"+ut(n.getSeconds(),n.getMilliseconds(),i.__ns)+at(n):(t=new Date(n.valueOf()),t.setUTCMinutes(t.getMinutes()+r),t.getUTCFullYear().toString()+"-"+c(t.getUTCMonth()+1)+"-"+c(t.getUTCDate())+"T"+c(t.getUTCHours())+":"+c(t.getUTCMinutes())+":"+ut(t.getUTCSeconds(),t.getUTCMilliseconds(),i.__ns)+i.__offset)}function c(n){return n<10?"0"+n.toString():n.toString()}function ut(n,t,i){var r;return t||i?(i||(i=0),r=(1e3+t)*1e4+i,c(n)+"."+r.toString().substr(1)):c(n)}function yt(n,t){var i,r;return b(n.details.properties.all()).each(function(n){return b(n.value.details.properties.all()).each(function(n){return(i=n.value,i.getEntityType()===t)?(r={entitySet:i,model:n.getModel()},!1):!0}),!r}),r}var p=r.DataService,w=p.Details,ft,y=r.EntitySet,a=r.DataServiceQuery,n=r.EntityState,et=r.Entity.Details.TrackedProperty,nt=r.Entity.Details.StorageProperty,ot;ot=!!hr&&!!hr.version&&!!hr.version.major&&hr.version.major>=1&&!!hr.version.minor&&hr.version.minor>=1&&!!hr.version.build&&hr.version.build>=1,u(r,"queryable",{filter:function(n){var t=new a(this);return u(t,"_filter",n),t},orderBy:function(n){var t=new a(this);return u(t,"_orderBy",n),t},orderByDescending:function(n){var t=new a(this);return u(t,"_orderBy",n+" desc"),t},thenBy:function(n){var t=new a(this);return u(t,"_orderBy",n),t},thenByDescending:function(n){var t=new a(this);return u(t,"_orderBy",n+" desc"),t},expand:function(n){var t=new a(this);return u(t,"_expand",n),t},skip:function(n){var t=new a(this);return u(t,"_skip",n),t},top:function(n){var t=new a(this);return u(t,"_take",n),t},includeTotalCount:function(){var n=new a(this);return u(n,"_includeTotalCount",!0),n},merge:function(n){var t=new a(this);return u(t,"__mergeOption",n),t}}),g(a,r.queryable),ff=function(n){return typeof n=="number"&&n>0},g(a,{execute:function(){var n=this,t=n,i;do{if(i=t._afterQueryExecuted,ai(i))break;t=t._source}while(t);return i?ct(function(t){rt(n)._thenEx(function(r,u){if(r)t.error(r);else{try{i(n,u)}catch(f){t.error(f)}t.complete(u)}}),t.interleave()}):rt(n)},_requestUri:l(function(){var s,n=this,c,r=[],e,o,h,u=[],f=[],t=[];do{if(n._rootUri){s=n._rootUri;break}typeof n._filter=="string"&&(r.length===0?r.unshift(n._filter):(r.length===1&&(r[0]="("+r[0]+")"),r.unshift("("+n._filter+")"))),typeof n._orderBy=="string"&&u.unshift(n._orderBy),typeof n._expand=="string"&&f.push(n._expand.replace(/\./g,"/")),typeof e!="number"&&ff(n._skip)&&(e=n._skip),typeof o!="number"&&ff(n._take)&&(o=n._take),typeof h!="boolean"&&n._includeTotalCount&&(h=n._includeTotalCount),n=n._source}while(n);return n._queryParameters&&i.each(n._queryParameters,function(n,i){i!=="null"&&t.push(encodeURIComponent(n.toString())+"="+encodeURIComponent(i.toString()))}),r.length>0&&t.push("$filter="+encodeURIComponent(r.join(" and "))),u.length>0&&(u=u.map(function(n){return encodeURIComponent(n).replace(/\%20/g," ").replace(/\%2C/g,",")}),t.push("$orderby="+u.join(","))),f.length>0&&(f=f.map(function(n){return encodeURIComponent(n).replace(/\%2C/g,",").replace(/\%2F/g,"/")}),t.push("$expand="+f.join(","))),typeof e=="number"&&t.push("$skip="+e.toString()),typeof o=="number"&&t.push("$top="+o.toString()),h&&t.push("$inlinecount=allpages"),t.length>0&&(s+="?"+t.join("&")),s}),_mergeOption:l(function(){var t,n=this;do{if(t=n.__mergeOption,t)break;n=n._source}while(n);return lt(t)})}),lc=function(n,t,i,r){u(n,"_source",t),u(n,"_entitySet",t._entitySet),u(n,"_rootUri",i),u(n,"_queryParameters",r)},g(y,r.queryable),g(y,{canInsert:l(function(){return!!this._model.canInsert}),canUpdate:l(function(){return!!this._model.canUpdate}),canDelete:l(function(){return!!this._model.canDelete}),_mergeOption:l(function(){return lt()}),getModel:function(){return this._model},getEntityType:function(){return this._entityType},load:function(){return rt(this)},addNew:function(){return new(this.getEntityType())(this)}}),cc=function(n,t,i){var r=t.details;n.dataService=t,n.name=i?i.name:null,u(n,"_model",r.properties[i.name].getModel()),u(n,"_entityType",i.elementType),u(n,"_requestUri",r._serviceUri+"/"+encodeURIComponent(i.serviceName)),u(n,"_rootUri",n._requestUri),u(n,"_entitySet",n),u(n,"_addedEntities",[]),u(n,"_loadedEntities",{})},g(p,{saveChanges:dt}),ac=function(n,t){t&&(n.details.dataWorkspace=t)},g(w,{hasChanges:h(null,function(){return this._changeCount>0}),getChanges:gt,discardChanges:ti,_findModel:ii,contentchange:er(),dispatchEvent:co(function(n,t,i){i.call(this,n,t);var f=this.dataWorkspace,r,u;f&&(r=f.details,n==="contentchange"?r.dispatchEvent("contentchange",t):n===gu&&t==="hasChanges"&&(u=this.hasChanges?++r._changeCount==1:--r._changeCount==0,u&&r.dispatchChange("hasChanges")))})}),vc=function(n,t){n.dataService=t,u(n,"_entitySets",{}),u(n,"_linkSets",{}),u(n,"_changeCount",0)},sl=function(n){i.each(n.getChanges(),function(){kc(this.details)})},hl=function(n){var t=0;return i.each(n.getChanges(),function(){bc(this.details)&&t++}),t},e(w,"EntitySetProperty",function(n,t){wr.call(this,n,t),this.dataService=this.owner},wr,{value:l(ri),_findModel:function(){return ru(this._details.getModel().entitySets,this._entry.name)}}),ft=w.EntitySetProperty,ko=function(n,i){var u,l,a,o,r,f,s,h,e;if(n===t||n===null)return"null";i.charAt(0)!==":"&&(i=":"+i);switch(i){case":Binary":case":Binary?":return"binary'"+n+"'";case":Date":case":DateTime":case":Date?":case":DateTime?":return u=n,"datetime'"+u.getFullYear().toString()+"-"+c(u.getMonth()+1)+"-"+c(u.getDate())+"T"+c(u.getHours())+":"+c(u.getMinutes())+":"+ut(u.getSeconds(),u.getMilliseconds(),u.__ns||0)+"'";case":DateTimeOffset":case":DateTimeOffset?":return l=n,"datetimeoffset'"+oi(l)+"'";case":Decimal":case":Decimal?":return n+"M";case":Guid":case":Guid?":return"guid'"+n+"'";case":Int64":case":Int64?":return n+"L";case":Single":case":Single?":return n+"f";case":String":case":String?":return"'"+n.replace(/'/g,"''")+"'";case":TimeSpan":case":TimeSpan?":return a=n,o="",r=a.ms,r<0&&(o="-",r=-r),f=Math.floor(r/864e5),r-=864e5*f,s=Math.floor(r/36e5),r-=36e5*s,h=Math.floor(r/6e4),r-=6e4*h,e=Math.floor(r/1e3),r-=e*1e3,"time'"+o+"P"+(f>0?f.toString()+"D":"")+"T"+s.toString()+"H"+h.toString()+"M"+(r>0?(e+r/1e3).toString():e.toString())+"S'";case":Byte":case":Byte?":case":Boolean":case":Boolean?":case":Double":case":Double?":case":Int16":case":Int16?":case":Int32":case":Int32?":case":SByte":case":SByte?":return n.toString();default:return}return},v("DataService",p),v("_toODataString",ko),v("EntitySet",y),v("DataServiceQuery",a),v("_defineDataService",fi),uf=function(n,t){var i=yt(n,t);return i?i.entitySet:null},wc=function(n,t){var r=yt(n,t),i=r.model;return!(i.canDelete||i.canInsert||i.canUpdate)}}(),function(){function w(){return this._changeCount>0}function b(n){var t=n._owner._nestedChangeSets;return t.length<=0?!1:n===t[t.length-1]}function o(n,t){var i=n.hasNestedChanges;n._changeCount+=t,i!==n.hasNestedChanges&&n.dispatchChange("hasNestedChanges")}function a(n,t,i){o(n,-n._changeCount),t&&o(t,i)}function y(n,t){var r=n._owner,i=r._nestedChangeSets,u;i.pop(),i.length>0&&(u=i[i.length-1]),a(n,u,t),i.length===0&&r.dispatchChange("hasNestedChangeSets")}function p(n){var t=0;return i.each(n._owner._dataServices,function(n,i){t+=hl(i.details)}),t}function k(){var t=this._owner.getChanges(),r=this._owner._nestedChangeSets.indexOf(this),n=[];return i.each(t,function(){for(var t=this.details._;t;){if(t.__changeSetIndex===r){n.push(this);break}t=t.__parent}}),n}function s(n){b(n)||iu(f("nestedChangeSet_not_last"))}function d(){s(this);var i=p(this),r=this._owner,n=r._nestedChangeSets,t;n.length>1&&(t=n[n.length-2]),a(this,t,i)}function nt(){s(this),y(this,p(this))}function tt(){s(this),i.each(this._owner._dataServices,function(n,t){sl(t.details)}),y(this,0)}function it(){return this._changeCount>0}function rt(){return this._nestedChangeSets.length>0}function ut(){var n=[];return i.each(this._dataServices,function(){n=n.concat(this.details.getChanges())}),n}function ft(){return ru(wu().globalItems,"DataWorkspace")}function et(){var t=this._details,i=this._entry,r=t._dataServices,u=i.name,n=r[u];return n||(r[u]=n=new i.type(t.dataWorkspace)),n}function ot(){function i(n){t.call(this,n)}return i}function st(t,i){var r=t,f=ot(t),u={};return pi(null,null,t,f,n),i&&(i.forEach(function(n){var t=n.name;n.serviceName=t,n.get=function(){return this.details.properties[t].value},u[t]=sr(n,n.type,c)}),g(r,u)),r}var n=r.DataWorkspace,t=n.Details,c;e(n,"NestedChangeSet",function(n){u(this,"_owner",n)},null,{_changeCount:0,hasNestedChanges:h(null,w),getNestedChanges:k,applyNestedChanges:d,commitNestedChanges:nt,cancelNestedChanges:tt}),yc=function(){},bo=function(n){var t=n.details,i=t._nestedChangeSets,u=new r.DataWorkspace.NestedChangeSet(t);return i.push(u),i.length===1&&t.dispatchChange("hasNestedChangeSets"),u},g(t,{hasChanges:h(null,it),hasNestedChangeSets:h(null,rt),getChanges:ut,_findModel:ft,contentchange:er()}),pc=function(n,t){n.dataWorkspace=t,u(n,"_dataServices",{}),u(n,"_linkSets",{}),u(n,"_nestedChangeSets",[]),u(n,"_changeCount",0)},su=function(n,t,i){var r=n._nestedChangeSets;0<=t&&t<r.length&&o(r[t],i)},e(t,"DataServiceProperty",function(n,t){wr.call(this,n,t),this.dataWorkspace=this.owner},wr,{value:l(et),_findModel:function(){return ru(this._details.getModel().members,this._entry.name)}}),c=t.DataServiceProperty,v("DataWorkspace",n),v("_defineDataWorkspace",st)}(),function(){function n(n,t){u(this,"_collectionChangeCallback",n),u(this,"_invalidatedCallback",t)}function i(){throw t;}function f(){throw t;}function o(){throw t;}function s(){throw t;}e(r,"CollectionLoader",function(n){n||(n=45),u(this,"_pageSize",n)},null,{canLoadNext:!1,subscribe:n,loadNext:i,reset:f,addNewItem:o,deleteItem:s}),sf=r.CollectionLoader}(),ue=0,function(){function s(n,t,r,u,f){if(this.bindingPath=n,this.bindingSource=t,this.targetProperty=r,this.bindingTarget=u,this.bindingMode=f?f:yt.twoWay,this._resetting=!1,this._lastSourceNode=null,this._lastSourceProperty=null,this._callbacks=[],i.isFunction(u)&&(this.bindingMode===yt.twoWay||this.bindingMode===yt.oneWayFromTarget))throw"Binding initialization error. Invalid binding mode.";}function u(n,t,i){this.host=n,this.propertyName=t,this.callback=i}function h(){var t=this,r=t.bindingTarget;n(t,!1),vh(t)||(r&&!i.isFunction(r)?gt(r,t):gt(t.bindingSource,t))}function c(){this._isDeactivated&&(this._isDeactivated=!1,this._invalidated&&(n(this,!1),this._invalidated=!1))}function l(){this._isDeactivated=!0}function a(){this.bindingSource=null,n(this,!0),this.bindingTarget=null,this.value=null}function n(i,r){function k(){i._isDeactivated?i._invalidated=!0:(w=f(i,i._lastSourceNode[i._lastSourceProperty]),t(i,l,i.targetProperty,w))}function d(){i._isDeactivated?i._invalidated=!0:n(i,!1)}var p=i.bindingPath?i.bindingPath.split("."):[],e=i.bindingSource,a=i._callbacks,s,h,b,c=i._targetCallback,l=i.bindingTarget,w,y;if(!i._resetting)try{for(ue++,i._resetting=!0,s=0;s<a.length;s++)h=a[s],h.host.removeChangeListener(h.propertyName,h.callback);if(a=[],r)i._lastSourceNode=null,i._lastSourceProperty=null,i.value=null;else{for(s=0;s<p.length;s++){if(y=p[s],e&&o(e)&&(i.bindingMode===yt.twoWay||i.bindingMode===yt.oneWayFromSource)&&(h=s===p.length-1?k:d,e.addChangeListener(y,h),a.push(new u(e,y,h))),i._lastSourceNode=e,i._lastSourceProperty=y,!e)break;if(e=e[y],!e&&s<p.length-1){i._lastSourceNode=null;break}}w=f(i,e),t(i,l,i.targetProperty,w)}c&&c.host.removeChangeListener(c.propertyName,c.callback),c=null,r||!!l&&o(l)&&(i.bindingMode===yt.twoWay||i.bindingMode===yt.oneWayFromTarget)&&(b=function(){i._isDeactivated?i._invalidated=!0:v(i)},l.addChangeListener(i.targetProperty,b),c=new u(l,i.targetProperty,b))}finally{i._resetting=!1,ue--,i._callbacks=a,i._targetCallback=c}}function v(n){var r=n._lastSourceProperty,i;n._resetting||(n._resetting=!0,i=y(n,n.bindingTarget[n.targetProperty]),t(n,n._lastSourceNode,n._lastSourceProperty,i),n._resetting=!1)}function f(n,t){var r=n.converter;return!r||!i.isFunction(r.convert)?t:r.convert(t)}function y(n,t){var r=n.converter;return!r||!i.isFunction(r.convertBack)?t:r.convertBack(t)}function o(n){return n.addChangeListener&&n.removeChangeListener}function t(n,t,r,u){ku(n.value,u)&&n._isTargetInitialized||(n.value=u,i.isFunction(t)?t.call(n,u):!t||!r||t[r]===u||(t[r]=u),n._isTargetInitialized=!0)}at("data",{DataBindingMode:{twoWay:1,oneWayFromSource:2,oneWayFromTarget:3,once:4}}),yt=r.data.DataBindingMode,e("data","DataBinding",s,null,{value:null,bind:h,activate:c,deactivate:l,_onDispose:a})}(),function(){function n(n){return e(null,null,function(){},r.BoundArguments,{length:n})}function t(){for(var t=[],n=0,i=this.length;n<i;n++)t.push(this["arg"+n.toString()]);return t}bu=function(t,u){var e=n(u.length),o=new e,f={},s,c=[];return i.each(u,function(n){var i="arg"+n.toString(),l=this.optional,u=this.binding,e=this.value;u?(f[i]=h(e),s=new r.data.DataBinding(u,t,i,o),c.push(s)):f[i]=ho(e),l&&(f[i+".optional"]=!0)}),g(e,f),c.forEach(function(n){n.bind()}),o},e(r,"BoundArguments",function(){},null,{getCurrentValues:t}),tu(r.BoundArguments)}(),function(){function n(){}function t(n){for(var u=/\{(.*)\}/,t,r=u.exec(this.format),i=this.format,f;!!r;)t=r[1],f=t==="value"?n:this[t]?this[t]:"",i=i.replace("{"+t+"}",f),r=u.exec(i);return i}function i(n){return n}function r(n,t){ao(n,"convert"),this._convert=n,this._convertBack=t}function u(n){return this._convert.call(this,n)}function f(n){return this._convertBack?this._convertBack.call(this,n):n}e("ui.converters","TextFormatConverter",n,null,{convert:t,convertBack:i}),e("ui.converters","GenericConverter",r,null,{convert:u,convertBack:f})}(),function(){function t(n){var t=n._activeQuery,i=t.execute||t.load;return i.call(t)}function n(n){var t,i;return n&&(t=n.details._)&&(i=t.__metadata)&&i.uri}function i(t,i,r){var u=r,f={};return!i||i.length<=0||!r||r.length<=0?u:(u=[],i.forEach(function(t){var i=n(t);i&&(f[i]=!0)}),r.forEach(function(t){var i=n(t);i&&f[i]||u.push(t)}),u)}function r(n,r){var u=this,f=u._activePromise,e;return f||(f=u._activePromise=ct(function(o){function c(n,t,r,f){if(e=!0,u._activePromise=null,u._activeQuery=null,t)f.error(t);else{var s=r.results,h=s.length,o,c;u._isFirstPage?(o=s,c=u._getAddedEntities(),!!c&&c.length>0&&(o=c.slice(0).reverse().concat(o)),u._skipCount=h,u._serverCount=u._disablePaging||h<u._pageSize?h:Number.MAX_VALUE,u._isFirstPage=!1):(o=i(u,n,s),u._skipCount+=h,s.length<u._pageSize&&(u._serverCount=u._skipCount)),f.complete(o)}}f=u._activePromise=o.promise();var s=u._baseQuery,l=u._skipCount,h;u.canLoadNext&&!!s?(h=u._pageSize,u._disablePaging||(s=s.skip(l).top(h)),n&&(s=s.merge(n)),u._activeQuery=s,t(u)._thenEx(function(n,t){u._activeQuery!==s?o.complete():c(r,n,t,o)}),o.interleave()):c(r,null,{totalCount:0,results:[]},o)}),e&&(u._activePromise=null)),f}function u(){this._activePromise=null,this._activeQuery=null,this._isFirstPage=!0,this._skipCount=0}fe=function(n){g(n,{_isFirstPage:!0,_serverCount:0,_skipCount:0,canLoadNext:l(function(){var n=this;return n._isFirstPage||!!n._baseQuery&&n._skipCount<n._serverCount}),loadNext:r,reset:u})}}(),function(){function s(t){return n(t,l)}function h(t){return n(t,a)}function n(n,t){var f=new r.ExpressionInfo,i;return dh(n)?(i=n,u(i.links||[],t)):u([n],t)}function u(i,u){var f=new r.ExpressionInfo,y,d,w,rt,g,o,k,p,a,et,v,s;if(i.length===1&&gh(i[0]))return f.constantValue=i[0].value,f.isConstant=!0,f;if(f.valueBindingPath=u(i),i.length===0)return f.isBinding=!0,f;for(y=0;y<i.length;y++){var e=i[y],c,l,it=nc(e),ot=kh(e),st=y===i.length-1;if(it)c=e.member,typeof e.member=="string"?(l=e.member,c=null):l=c.name;else if(ot)c=e.target,l=c.name,f.valueBindingPath==="screen"&&l==="showDialog"&&(l="showPopup");else return f;if(d=ni(l),w=f.valueBindingPath,f.valueBindingPath=t(w,d),st)if(f.lastModelItem=c,f.lastObjectBindingPath=w,it)rt=t(w,"details","properties",d),f.detailsBindingPath=rt;else{g=ht(e,":@AssociatedCollection"),g&&(f.associatedCollection=g.collection),f.createNewEntities=nf(e,":@CreateNewEntity")||[],f.argumentBindings=[],f.isCall=!0;for(var h=e.target.parameters,nt=e.target.source,tt,ut,ct=e,ft=ct.arguments||[];nt;)if(!(tt=nt.member))break;else!(ut=tt.parameters)||(h=ut.concat(h||[])),nt=tt.source;if(h){for(o=f.argumentBindings,k=0;k<ft.length;k++)p=ft[k],a=h.indexOf(p.parameter),a<0||!p.value?o[a]=null:(et=p.value,v=n(et,u),v.isConstant?o[a]={value:v.constantValue}:v.isCall||v.isBinding&&(o[a]={binding:v.valueBindingPath}),uu(p.parameter.parameterType)&&(o[a].optional=!0));for(s=0;s<h.length;s++)o[s]||(o[s]={},(uu(h[s].parameterType)||b(f.createNewEntities).any(function(n){return n.targetParameter===h[s]}))&&(o[s].optional=!0))}}}return f.isBinding=!0,f}function c(){return null}function l(n){var t="data";if(n.length===0)return t;switch(f(n[0])){case"Screen":return"screen";case"Application":return"application";case"EntityType":return t;default:return null}}function a(n){if(n.length===0)return"";switch(f(n[0])){case"Screen":return"";case"EntitySets":return"";default:return null}}function f(n){var u=n.member||n.target,t,i;return u&&(i=u.id.replace(/[\/].*/,""),t=r.services.modelService.tryLookupById(i),!t&&wu().name===i)?"Application":wo(t)?"Application":rc(t)?"Screen":uc(t)?"EntityType":yo(t)?"EntitySets":void 0}function t(){var n=null;return i.each(arguments,function(t,i){!i||(n=!n?i:[n,i].join("."))}),n}var o="";e(r,"ExpressionInfo",function(){},null,{isConstant:!1,isBinding:!1,detailsBindingPath:null,valueBindingPath:o}),ee=s,es=h,cl=function(t){var i=n(t,c);return i.constantValue},fv=t}(),function(){function i(n){var t={result:n};switch(n){case p.cancel:t.text=f("dialogService_cancel"),t.icon="back";break;case p.ok:t.text=f("dialogService_ok"),t.icon="check";break;case p.yes:t.text=f("dialogService_yes"),t.icon="check";break;case p.no:t.text=f("dialogService_no"),t.icon="delete";break;default:return}return t}function e(n){var t=[];return n&&(Array.isArray(n)?t=n:typeof n=="number"&&hh(hu,n)&&[p.ok,p.yes,p.no,p.cancel].forEach(function(r){(n&r)===r&&t.push(i(r))})),t}var n,t;u(r,"modal",{}),kt=r.modal,at(kt,{DialogResult:{none:0,cancel:1,ok:2,yes:4,no:8}}),p=kt.DialogResult,at(kt,{DialogButtons:{none:0,ok:p.ok,okCancel:p.ok|p.cancel,yesNo:p.yes|p.no,yesNoCancel:p.yes|p.no|p.cancel}}),hu=kt.DialogButtons,u(kt,"show",function(n){return ct(function(t){n.buttons=e(n.buttons),kt._modalView.show(n).then(function(n){t.complete(n)})})}),u(kt,"close",function(){kt._modalView.close()}),u(kt,"isOpen",function(){return kt._modalView.isOpen()}),os=function(n,t){function f(n){return n&&n.message&&typeof n.message=="string"?n.message:typeof n=="string"?n:null}var r="Error",u,i;return n.noErrorDialog?c.Promise.as():(n.title&&typeof n.title=="string"?r=n.title:!t||typeof t!="string"||(r=t),Array.isArray(n)?(i="",u=n,u.forEach(function(n){var t=f(n);t&&(i&&(i+="\r\n"),i+=t)})):i=f(n),kt.show({title:r,message:i,buttons:hu.ok}))},at(r,{MessageBoxButtons:{ok:hu.ok,okCancel:hu.okCancel,yesNo:hu.yesNo,yesNoCancel:hu.yesNoCancel}}),n=r.MessageBoxButtons,at(r,{MessageBoxResult:{ok:p.ok,yes:p.yes,no:p.no,cancel:p.cancel}}),t=r.MessageBoxResult,v("MessageBoxButtons",r.MessageBoxButtons),v("MessageBoxResult",r.MessageBoxResult),v("showMessageBox",function(i,r){r=r||{};var f=r.buttons||n.ok,u=r.defaultResult;if(!u)switch(f){case n.ok:u=t.ok;break;case n.okCancel:u=t.cancel;break;case n.yesNo:u=t.no;break;case n.yesNoCancel:u=t.cancel;break;default:u=t.cancel}return kt.show({title:r.title,message:i,buttons:f,defaultResult:u})})}(),ss="CommandProgressStart",oe="CommandProgressComplete",function(){function o(){var i=n<=0;n++,i&&st(ss)}function s(){n--,n<=0&&st(oe)}function u(){var r=this,e=r._method,o=r._executionContext,f=r._argumentValues,s=!1,n,u;return!e||!o||!f?!1:(i.each(f,function(n,i){return(i===t||i===null)&&!r._isOptional(n)?(s=!0,!1):!0}),s)?!1:(n=e.canExecute,u=i.isFunction(n)?!!n.apply(o,f):typeof n=="boolean"?n:!0)}function l(){return!1}function a(t){var i=this;return n?c.Promise.as():(o(i),i._isExecuting=!0,ct(function(n){var r,u;i._computeCanExecute()||ar("cannotExecuteError",f("command_cannot")),hs=t;try{r=i._method.apply(i._executionContext,i._argumentValues)}finally{hs=null}c.Promise.is(r)?(u=r,u.then(function(t){n.complete(t)},function(t){n.error(t)})):n.complete(r)})._thenEx(function(n,t){if(i._isExecuting=!1,s(i),n)throw n;return t}))}var n=0;e(r,"Command",function(n,t,i){this._method=n,this._executionContext=t,this._argumentValues=i,this.options={}},null,{_method:h(null),_executionContext:h(null),_argumentValues:h(null),_isExecuting:h(!1),canExecute:dt(function(){return!this._isExecuting&&u.call(this)}),execute:a,_computeCanExecute:u,_isOptional:l})}(),function(){e(r,"BoundCommand",function(n,t,i){var f,o,e,s;r.Command.prototype.constructor.call(this,null,null,null),ao(t,"bindingSource"),f=this,o=new r.data.DataBinding(n,t,"_method",f),o.bind(),e=n.replace(/[.][^.]+$/,""),n===e?f._executionContext=t:(s=new r.data.DataBinding(e,t,"_executionContext",f),s.bind()),!!i&&i.length>0?(u(f,"_boundArguments",i),f._argumentValues=f._boundArguments.getCurrentValues(),i.addChangeListener(null,function(){f._argumentValues=f._boundArguments.getCurrentValues()})):f._argumentValues=[]},r.Command,{_isOptional:function(n){return!!this._boundArguments["arg"+n.toString()+".optional"]},_onDispose:function(){var n=this;n._boundArguments&&(y(n._boundArguments),n._boundArguments=null)}})}(),function(){at(r,{BoundaryOption:{none:"none",nested:"nested",save:"save"}}),tt=r.BoundaryOption,at(r,{NavigateBackOption:{none:"none",saveBoundary:"saveBoundary",beforeSaveBoundary:"beforeSaveBoundary"}}),wi=r.NavigateBackOption,at(r,{NavigateBackAction:{cancel:"cancel",commit:"commit"}}),se=r.NavigateBackAction,v("NavigateBackAction",se)}(),function(){function i(t,i){var u=i.defaultValueSource,r;u&&n(t,u),r=i.isReadOnly,typeof r!="undefined"&&(t._isReadOnly=!!r)}function n(n,t){t&&(n._defaultValue=cl(t))}function t(n){var t=new r.PropertyDescription(n.propertyDefinition);return t._defaultValue=n._defaultValue,t._isReadOnly=n._isReadOnly,t}function u(n){var r=t(this);return i(r,n),r}function f(i){var r=t(this);return n(r,i),r}function o(n){var i=t(this);return i._defaultValue=n,i}e(r,"PropertyDescription",function(t){this.propertyDefinition=t;var i=t.propertyType;i&&!ic(i),n(this,t.defaultValueSource),this._isReadOnly=!!t.isReadOnly},null,{_defaultValue:null,isReadOnly:l(function(){return this._isReadOnly}),defaultValue:l(function(){return this._defaultValue}),propertyType:l(function(){return this.propertyDefinition.propertyType}),isAttachable:l(function(){return!!this.propertyDefinition.isAttachable}),isInheritable:l(function(){return!!this.propertyDefinition.isInheritable}),propertyId:l(function(){return this.propertyDefinition.id}),propertyName:l(function(){return this.propertyDefinition.name}),applyPropertyOverrides:u,applyDefaultValueOverride:f,applyDefaultValueOverrideFromConstant:o})}(),function(){function t(t,i){t in this.values&&n(this,t,i)}function n(n,t,i){var f=r.services.modelService.tryLookupById(t),u=ni(f.name,!0);u in n.values&&(delete n.values[u],delete n.values[t]),d.defineProperty(n.values,u,{configurable:!0,enumerable:!0,writable:!1,value:i}),d.defineProperty(n.values,t,{configurable:!0,enumerable:!0,writable:!1,value:i})}e(r,"PropertyDictionary",function(t,r){var u=this;this.descriptions=t,this.values={},this.contentItemName=r,i.each(t,function(t,i){n(u,i.propertyId,i.defaultValue)})},null,{setValue:t})}(),function(){function c(n){return w(this),k(this,n),d(this,n),g(this,this._parentView),nt(this,this._placeholderInParent),this._stateIsResolved=!0,this._properties}function l(n,t){var r,i;if(!t||!(r=wh(t)))return!1;for(i=n._parentView;i;){if(r.id===i.id)return!0;i=i.baseControl}return!1}function a(n){if(!t){t=[],f=[];var u=v(n);i.each(u,function(n,i){i.isAttachable&&i.attachedPropertyAvailability==="ImmediateChildren"?f.push(new r.PropertyDescription(i)):t.push(new r.PropertyDescription(i))})}return t}function v(){var r=[],u=vo(tc);return i.each(u,function(n,t){t.properties&&i.each(t.properties,function(n,t){t.isInheritable&&!t.isAttachable,t.isAttachable&&r.push(t)})}),!n||!n.properties||i.each(n.properties,function(n,t){t.isAttachable||r.push(t)}),r}function y(n){var t=a(n).slice(0);return i.each(f,function(i,r){l(n,r.propertyDefinition)&&t.push(r)}),t}function p(n,t){var i=t;!i||s(n,i)}function s(t,u){var f=u.baseControl;f||(f=n),f&&(n&&f.id===n.id||s(t,f)),u.propertyOverrides&&i.each(u.propertyOverrides,function(n,i){var r=i.property.id,u=t._properties[r];!u,t._properties[r]=u.applyPropertyOverrides(i)}),u.properties&&i.each(u.properties,function(n,i){i.isAttachable||(t._properties[i.id]=new r.PropertyDescription(i))})}function w(n){var t=y(n);i.each(t,function(t,i){var r;!i.isInheritable||!n._ownerPropertyValues||!(r=n._ownerPropertyValues[i.propertyDefinition.id])||(i=i.applyDefaultValueOverrideFromConstant(r)),n._properties[i.propertyDefinition.id]=i})}function b(n,t,i){var r=t.id,u=n._properties[r];u&&(n._properties[r]=u.applyDefaultValueOverride(i))}function k(n,t){t&&p(n,t)}function d(n,t){!t||!t.propertySources||o(n,t.propertySources)}function g(n,t){!t||!t.childItemPropertySources||o(n,t.childItemPropertySources)}function nt(n,t){!t||!t.propertySources||o(n,t.propertySources)}function o(n,t){i.each(t,function(t,i){b(n,i.property,i.source)})}var h=":RootControl",n,t,f;ev=function(){n=null,t=null,f=null},e(r,"PropertyDefaultsResolver",function(t,i,f,e){u(this,"_ownerPropertyValues",i),u(this,"_placeholderInParent",f),u(this,"_parentView",e),u(this,"_properties",{}),n||(n=r.services.modelService.tryLookupById(h))},null,{_stateIsResolved:!1,resolveProperties:c})}(),function(){pi(r,"Screen",function(n,t,i){eu.call(this),ll(this,n,t,i)},function(n){tf.call(this,n),al(this,n)},eu),e(r,"VisualCollection",function(n,t){yl(this,n,t)})}(),as=ut("IsDynamicTile","TileList"),he=ut("WidthSizingMode"),function(){function rt(){var n=this;n.children.forEach(y),n.children=null,n.commandItems.forEach(y),n.commandItems=null,n._binding=null,n._detailsBinding=null,n._choicesSourceBinding=null,n._externalBindings=null,n.parent=null,n._view=null,n.__details=null,n.__screen=null,n.__value=null,n.__data=null,n.__choicesSource=null}function ft(n){var t=this,i=t.model,r=i.choicesSource,u;t.kind=i.kind,t.name=i.name,t.displayName=vr(i.displayName),t.description=vr(i.description),r&&(u=ee(r),t._choicesSourceBindingPath=u.valueBindingPath),t._initializeCore(n)}function ot(n){var t=this,r=t.model,i;t.data=n,t.children=[],t.commandItems=[],t._parseDataSource(),!t.parent||t.parent.kind==="Collection"||(t.data=t.parent.value),t._resolveProperties(),oi(t),t._parseChoiceList(),t.kind===et.value&&t.valueModel&&(i=ht(t.valueModel,":@MaxLength"),!i||(t.maxLength=i.value)),!!t.parent&&t.parent._isActivated&&t._activate(),t._isUnderList=!!t.parent&&(t.parent.kind===et.collection||t.parent._isUnderList)}function st(){var n=this,t,i,r;if(n._bindingInitialized){if(!n._detailsBinding||n._detailsBinding.activate(),!n._binding||n._binding.activate(),!n._choicesSourceBinding||n._choicesSourceBinding.activate(),r=n._externalBindings,!!r)for(t=0,i=r.length;t<i;t++)r[t].activate()}else u(n,"_bindingInitialized",!0),ui(n);for(t=0,i=n.children.length;t<i;t++)n.children[t]._activate();for(t=0,i=n.commandItems.length;t<i;t++)n.commandItems[t]._activate();n._isActivated=!0}function ct(){var n=this,t,i,r;if(!n._detailsBinding||n._detailsBinding.deactivate(),!n._binding||n._binding.deactivate(),!n._choicesSourceBinding||n._choicesSourceBinding.deactivate(),r=n._externalBindings,!!r)for(t=0,i=r.length;t<i;t++)r[t].deactivate();for(t=0,i=n.children.length;t<i;t++)n.children[t]._deactivate();for(t=0,i=n.commandItems.length;t<i;t++)n.commandItems[t]._deactivate();n._isActivated=!1}function lt(){var n=this,t,r,i;if(!!n._stringValueConversionError)try{n._doNotUpdateValue=!0,p(n)}finally{n._doNotUpdateValue=!1}for(i=n.children,t=0,r=i.length;t<r;t++)i[t]._refreshStringValue()}function vt(n){this.parent=n,n.children.push(this)}function wt(n){this.parent=n,n.commandItems.push(this)}function bt(n){var r=0,t,u=this._isClone,i;if(this.name===n)return this;if(!!this.children)while(r<this.children.length)if(i=this.children[r++],i._isClone===u&&(t=i.findItem(n),!!t))return t;if(r=0,!!this.commandItems)while(r<this.commandItems.length)if(i=this.commandItems[r++],i._isClone===u&&(t=i.findItem(n),!!t))return t;return t}function o(n,t,i){var r,f=n.details,e=n.children,u,s;if(!f||n.kind!==et.value||ce(n)||(r=us(f,n.value,i)),r?(!n._stringValueConversionError||r.push(n._stringValueConversionError),c(n,r)):a(n),t)for(u=0,s=e.length;u<s;u++)o(e[u],t,i)}function kt(n){o(this,n,!0)}function ti(n){return this.validationResults.length?!0:n?b(this.children).any(function(){return this.hasValidationErrors(n)}):!1}function ii(n,t){if(!t||!i.isFunction(t))throw f("databinding_invalid_callback");var e=new r.data.DataBinding(n,this,"",t,yt.oneWayFromSource);e.bind(),this._externalBindings?this._externalBindings.push(e):u(this,"_externalBindings",[e])}function d(n){return n.pageKind!==bi.none}function ri(){var n=this,i=n.model,r=!!n.parent&&n.parent.kind!=="Collection",t;i.dataSource?n.kind===et.command?(n.bindingPath=null,u(n,"_detailsBindingPath",null)):(t=ee(i.dataSource),n.bindingPath=t.valueBindingPath,n.bindingPath==="data"&&r?u(n,"_detailsBindingPath","parent.details"):u(n,"_detailsBindingPath",t.detailsBindingPath),n.valueModel=t.lastModelItem):(n.bindingPath="data",r&&u(n,"_detailsBindingPath","parent.details"))}function ui(n){function f(){var t=n.details,i=t&&t.owner,u=i&&i.details;n.kind===et.value&&(n._stringValueUpdating||!!t&&(t.isChanged||!!u&&u.entityState===r.EntityState.added)?o(n,!1,!1):a(n)),n._validated=!0}var i;!n._detailsBindingPath||(u(n,"_detailsBinding",new s(n._detailsBindingPath,n,"details",n,yt.oneWayFromSource)),n._detailsBinding.bind()),!n.bindingPath||(u(n,"_binding",new s(n.bindingPath,n,"value",n)),n._binding.bind()),i=n._choicesSourceBindingPath,i&&(u(n,"_choicesSourceBinding",new s(i,n,"choicesSource",n)),n._choicesSourceBinding.bind()),n.addChangeListener("details",function(){n._validated=!1,pt(function(){n._validated||f()})}),n.addChangeListener("value",function(){n._valueUpdating=!0;try{if(n._stringValueUpdating||n.kind!==et.value||p(n),f(),n.kind!==et.collection){var e=n.value,r=n.children,u=n.commandItems,t,i;if(r)for(t=0,i=r.length;t<i;t++)r[t].data=e;if(u)for(t=0,i=u.length;t<i;t++)u[t].data=e}}finally{n._valueUpdating=!1}}),n.addChangeListener("stringValue",function(){if(!n._stringValueUpdating){n._stringValueUpdating=!0;try{n._valueUpdating||n._doNotUpdateValue||n.kind!==et.value||vi(n)}finally{n._stringValueUpdating=!1}}}),n.value!==t&&n.dispatchChange("value")}function fi(){var n=this,t=n.parent,f=n.model,e=t?t.properties:{},o=null,s=new r.PropertyDefaultsResolver(n.name||n.displayName,e,o,n.parent?n.parent.controlModel:null),h=s.resolveProperties(n.controlModel);u(n,"_dictionary",new r.PropertyDictionary(h,n.name)),f.propertySources&&i.each(f.propertySources,function(){var t=si(n,this);n._dictionary.setValue(t.property.id,t.value)})}function oi(n){n.horizontalAlignment=n.properties[g],n.widthSizingMode=n.properties[as]?ci.stretchToContainer:n.properties[he],n.heightSizingMode=n.properties[nt],u(n,"_isHStretch",n.widthSizingMode===ci.stretchToContainer),u(n,"_isVStretch",n.heightSizingMode===tr.stretchToContainer)}function si(n,t){var e=t.property,f,i,u,o;return"value"in t?f=t.value:!e.isAction||!t.source||(i=ee(t.source),u=bu(n,i.argumentBindings),(!!i.associatedCollection||i.createNewEntities.length>0)&&(o=i.lastModelItem,u.length=o.parameters.length,u["arg"+(u.length++).toString()]={canExecute:li(n,i),beforeShown:ai(n,i)}),f=new r.BoundCommand(i.valueBindingPath,n,u),gt(f,u),gt(n,f)),{property:e,value:f}}function li(t,i){return function(){var r=!0,e=i.createNewEntities,s=t.screen.details.dataWorkspace,u=i.associatedCollection,f,o;return(u&&(f=t.screen[ni(u.name)]),r=b(e).all(function(){var t;if(u||!this.entityType){if(u)return f.addNew.canExecute.apply(f)}else return t=n.msls.application[this.entityType.name],uf(s,t).canInsert;return!0}),!r)?r:(!u||b(e).first(function(){return!this.entityType})||(o=f.selectedItem,r=!!o),r)}}function ai(t,i){return i.createNewEntities.length>0?function(){var f=this,r,e,u;i.createNewEntities.forEach(function(o){i.associatedCollection||!o.entityType?i.associatedCollection&&(e=t.screen[ni(i.associatedCollection.name)],u=e.addNew()):(r=n.msls.application[o.entityType.name],u=new r(uf(f.details.dataWorkspace,r))),o.targetParameter&&(f[ni(o.targetParameter.name)]=u)})}:null}function c(n,t){t=t||[],t.forEach(function(n){n._isInternal=!0});var i=!n._internalValidationResults||!n._internalValidationResults.length,r=!!t&&!t.length;i&&r||(n._internalValidationResults=t,n.dispatchChange(w))}function a(n){c(n,[])}function p(n){var u="",r=n.value,f=!1,e;hf(n),r!==t&&r!==null&&(n.choiceList&&i.each(n.choiceList,function(){return this.value===r?(u=this.stringValue,f=!0,!1):!0}),f||(n.details?(e=n.details.getModel(),u=is(r,e)):u=r.toString())),n.stringValue=u}function vi(n){var r=n.stringValue,u=!1,f,t,e;n.choiceList&&i.each(n.choiceList,function(){return this.stringValue===n.stringValue?(r=this.value,u=!0,!1):!0}),u||!n.details?n.value=r:(f=n.details.getModel(),t=el(r,f),t.error?(e=new hi(n.details,t.error),le(n,e)):(hf(n),n.value===t.value&&o(n,!1,!1),n.value=t.value,p(n)))}function yi(){var n=this,u,t,f,r;n.kind===et.value&&n.valueModel&&(t=nf(n.valueModel,":@SupportedValue"),t&&(n.choiceList=[],r=ht(n.valueModel,":@Required"),r||n.choiceList.push({value:"",stringValue:""}),i.each(t,function(){n.choiceList.push({value:this.value,stringValue:vr(this.displayName)||this.value})})))}function pi(){return this.kind===et.tab?bi.tab:this.kind===et.popup?bi.popup:bi.none}function wi(){var t=this.details,i,u,n,f,o,e;return!t&&!this.value?!1:this.kind===et.command&&!!(i=this.properties[tt])&&!i.canExecute&&!i._isExecuting?!1:(u=t&&t.owner,n=u&&u.details,n&&"entityState"in n&&(f=n.entityState,f===r.EntityState.deleted||f===r.EntityState.discarded))?!1:(o=this._backingIsEnabled,typeof this._backingIsEnabled=="boolean")?o:(e=this.parent,!!e&&!d(this))?e.isEnabled:!0}function ki(n){this._backingIsEnabled=n}function di(){var n=this,i=n.details,r=i&&i.isReadOnly,u=n._backingIsReadOnly,t=n.parent;return typeof r=="boolean"&&r?!0:typeof u=="boolean"?u:!!t&&!d(n)&&t.kind!==et.collection?t.isReadOnly:!1}function gi(n){this._backingIsReadOnly=n}function nr(){var n=this._backingIsVisible,t;return typeof n=="boolean"?n:this.properties[it]&&!this.isEnabled?!1:(t=this.model,!t.isHidden)}function ir(n){this._backingIsVisible=n}function rr(){var n,t;return this.kind===et.command?!1:(n=this.details,n&&(t=n.isLoaded,typeof t=="boolean"))?!t&&!n.loadError&&!this.displayError:!1}function ur(){if(this.kind===et.command)return!1;if(this._backingDisplayError)return this._backingDisplayError;var n=this.details;return n?n.loadError:null}function fr(n){this._backingDisplayError=n}function er(){return this.isVisible?this.displayError?k.hasDisplayError:this.isLoading?k.loading:this.isEnabled?this.isReadOnly?k.readOnly:!this.validationResults.length||this.kind===et.command?k.normal:k.hasValidationError:k.disabled:k.hidden}var s=r.data.DataBinding,g=ut("HorizontalAlignment"),nt=ut("HeightSizingMode"),tt=ut("Tap"),it=ut("HiddenIfDisabled","RootCommand"),w="validationResults";at(r,{AttachedLabelPosition:{leftAligned:"LeftAligned",rightAligned:"RightAligned",topAligned:"Top",hidden:"Hidden",none:"None"}}),ei=r.AttachedLabelPosition,at(r,{HorizontalAlignment:{left:"Left",right:"Right"}}),ls=r.HorizontalAlignment,at(r,{WidthSizingMode:{stretchToContainer:"StretchToContainer",fitToContent:"FitToContent",fixedSize:"FixedSize"}}),ci=r.WidthSizingMode,at(r,{HeightSizingMode:{stretchToContainer:"StretchToContainer",fitToContent:"FitToContent",fixedSize:"FixedSize"}}),tr=r.HeightSizingMode,at(r,{ContentItemKind:{collection:"Collection",command:"Command",value:"Value",details:"Details",group:"Group",screen:"Screen",tab:"Tab",popup:"Popup"}}),et=r.ContentItemKind,at(r,{PageKind:{none:"None",tab:"Tab",popup:"Popup"}}),bi=r.PageKind,at(r,{VisualState:{hidden:"hidden",loading:"loading",hasDisplayError:"hasDisplayError",disabled:"disabled",readOnly:"readOnly",hasValidationError:"hasValidationError",normal:"normal"}}),k=r.VisualState,ce=function(n){var t=n.controlModel;return t?t.isViewer:!1},le=function(n,t){n._stringValueConversionError=t,c(n,[t])},hf=function(n){n._stringValueConversionError&&(n._stringValueConversionError=null,a(n))},e(r,"ContentItem",function(n,t){this.screen=n,this.model=t},null,{application:l(function(){return n.msls.application}),choicesSource:h(),data:h(),details:h(),displayName:h(),description:h(),isEnabled:dt(wi,ki),isReadOnly:dt(di,gi),isLoading:dt(rr),displayError:dt(ur,fr),isVisible:dt(nr,ir),_isActivated:h(),_visualState:dt(er),_backingIsEnabled:h(),_backingIsReadOnly:h(),_backingIsVisible:h(),_backingDisplayError:h(),pageKind:l(pi),properties:l(function(){return this._dictionary.values}),stringValue:h(),value:h(null,function(){return this.__value},function(n){var i,r,t;typeof n=="number"&&!!(i=this.valueModel)&&(r=i.propertyType)&&!!(t=yr(r).primitiveType.id)&&(t===":Decimal"||t===":Int64")&&(n=n.toString()),n!==this.__value&&(this.__value=n,this.dispatchChange("value"))}),controlModel:l(function(){var n=this.model;return n.view}),validationResults:h(null,function(){var n=this._internalValidationResults&&this._internalValidationResults.slice(0)||[],t=this._userValidationResults;return t&&(n=n.concat(t)),n},function(n){var t,i,u,f;n?Array.isArray(n)||(n=[n]):n=[],t=this,i=n.map(function(n){return typeof n=="string"?new r.ValidationResult(null,n):n}),i=i.filter(function(n){return!n._isInternal}),u=!t._userValidationResults||!t._userValidationResults.length,f=!i.length,u&&f||(t._userValidationResults=i,t.dispatchChange(w))}),_stringValueConversionError:h(),_alwaysShowValidationResults:dt(function(){var n,t;return n=this._alwaysShowValidationResultsValue||!!this.parent&&this.parent._alwaysShowValidationResults||!!this._stringValueConversionError,n||(t=this.details,n=!!t&&t.isEdited),n},function(n){this._alwaysShowValidationResultsValue=n}),_alwaysShowValidationResultsValue:h(),findItem:bt,validate:kt,hasValidationErrors:ti,dataBind:ii,handleViewDispose:function(n){if(n!==null&&!i.isFunction(n))throw f("view_dispose_invalid_handler");this._customViewDisposeHandler=n},_initialize:ft,_activate:st,_deactivate:ct,_initializeCore:ot,_refreshStringValue:lt,_setParent:vt,_setCommandItemParent:wt,_parseDataSource:ri,_resolveProperties:fi,_parseChoiceList:yi,_onDispose:rt}),v("ContentItem",r.ContentItem),v("HorizontalAlignment",ls),v("WidthSizingMode",ci),v("HeightSizingMode",tr),v("ContentItemKind",et),v("PageKind",bi)}(),function(){function n(n){var t=this._template,i=t._choicesSourceBindingPath;this.kind=t.kind,this.name=t.name,this.displayName=t.displayName,this.model=t.model,this.screen=t.screen,i&&(this._choicesSourceBindingPath=i),this._initializeCore(n)}function t(){this.bindingPath=this._template.bindingPath,this._detailsBindingPath=this._template._detailsBindingPath,this.valueModel=this._template.valueModel}function i(){this._dictionary=this._template._dictionary}function u(){this.choiceList=this._template.choiceList}e("ui","ContentItemClone",function(n){this._template=n},r.ContentItem,{_initialize:n,_parseDataSource:t,_resolveProperties:i,_parseChoiceList:u,_isClone:!0})}(),function(){function f(){}function o(t,i,r,u){return n(t,i,r,null,u)}function n(t,u,f,e,o){var s,h=new r.ContentItem(t,u),c,a,l,v;if(f?h._setParent(f):!e||h._setCommandItemParent(e),h._initialize(o),i.isArray(u.childContentItems))for(s=0;s<u.childContentItems.length;s++)c=u.childContentItems[s],a=n(t,c,h,null);if(i.isArray(u.commandItems))for(s=0;s<u.commandItems.length;s++)l=u.commandItems[s],v=n(t,l,null,h);return h}function s(n,i,r){return t(n,i,null,r)}function t(n,i,u,f){var e,o=new r.ui.ContentItemClone(n),s,c,h,l;for(i?o._setParent(i):!u||o._setCommandItemParent(u),o._initialize(f),e=0;e<n.children.length;e++)s=n.children[e],c=t(s,o,null);for(e=0;e<n.commandItems.length;e++)h=n.commandItems[e],l=t(h,null,o);return o}e("ui","ContentItemService",f,null,{createContentItemTree:o,cloneContentItemTree:s}),u(r.services,"contentItemService",new f)}(),function(){function o(n){return n.screen["__"+this.name]}function s(n,t){var i=this.name,f=n.properties[i],r=n.screen;u(r,"__"+i,t),f.dispatchChange("value"),r.dispatchChange(i)}function e(n){var t=this.name,i=n.properties[t],r=n._propertyData[t],u=!0;return!i.isLoaded&&u?i.load():c.Promise.as(r._value)}function a(n,t){var i=n._propertyData[t.name];return cs(n,t,i)}function p(i,u,f){var c=i,l=w(i),h={};return pi(null,null,i,l,n),u&&u.forEach(function(n){var u=n.name;typeof n.kind!="string"&&(n.kind="local");switch(n.kind){case"local":n.type||(n.type=String),h[u]=sr(n,n.type,t.LocalProperty),n.getValue=o,n.setValue=s;break;case"reference":n.type||(n.type=r.Entity),h[u]=sr(n,n.type,t.ReferenceProperty),n.async=!0,n.getValue=e;break;case"collection":n.type=vl(i,n),n.elementType||(n.elementType=r.Entity),h[u]=sr(n,n.type,t.CollectionProperty),n.async=!0,n.getValue=e,n.rawGet=a}n.get=function(){return n.getValue(this.details)},n.setValue&&(n.set=function(t){n.setValue(this.details,t)})}),f&&f.forEach(function(n){n.value?h[n.name]=n:(h[n.name]=function(){var t=c[n.name+"_execute"],i;return ai(t)&&(i=t.call(null,this)),i},h[n.name].canExecute=function(){var t=!0,i=c[n.name+"_canExecute"];return ai(i)&&(t=!!i.call(null,this)),t})}),g(c,h),c}function w(){function i(n){t.call(this,n)}return i}var n=r.Screen,t=n.Details;pl=function(n,t,r){var u;return!i.isFunction(n)||!!r&&!i.isArray(r)?u:(u=d.create(n.prototype),n.call(u,r,t),u)},ll=function(n,t,i,e){var nt=n,tt=nt.constructor,s=n.details,h,l,a,p,w,c,k,v,y=!1,d=!1,g=!1,o;s.dataWorkspace=t,u(s,"_modelId",i),o=s.getModel(),o&&(n.details.displayName=vr(o.displayName),n.details.description=vr(o.description)),e&&o.properties&&(l=b(o.properties).where(function(n){return!!ht(n,":@IsParameter")}).array,e.length>l.length&&iu(f("screen_too_many_parameter_values")),e.forEach(function(i,f){h=ni(l[f].name),a=s.properties[h],d=a instanceof r.Screen.Details.LocalProperty,g=a instanceof r.Screen.Details.ReferenceProperty,i instanceof r.Entity?(p=i,w=p.details,c=w.entitySet,!c||!c.dataService||(k=c.dataService.details,!t||k.dataWorkspace!==t||(y=!0))):y=!0,y&&(d?u(n,"__"+h,i):g&&(v=s._propertyData[h],v._value=i,v._isLoaded=!0))}))},al=function(n,t){n.screen=t,u(n,"_model",null),n.serverErrors=[],u(n,"_propertyData",{}),i.each(n.properties.all(),function(){n._propertyData[this.name]={}})},g(n,{showTab:function(n,t){var i=t?t.beforeShown:null;return r.shell.showTab(n,null,i)},showPopup:function(n){return r.shell.showPopup(n)},closePopup:function(){return r.shell.closePopup()},findContentItem:function(n){return this.details.rootContentItem.findItem(n)}}),u(n.prototype.showTab,"canExecute",function(n,t){return!!t&&ai(t.canExecute)?t.canExecute.apply(this,arguments):!0}),u(n.prototype.showPopup,"canExecute",function(n,t){return!!t&&ai(t.canExecute)?t.canExecute.apply(this,arguments):!0}),g(t,{displayName:h(),description:h(),serverErrors:h(),saveChangesTo:l(function(){var n=this,t;return n._saveChangesToValue||(t=nf(n.getModel(),":@SaveChangesTo"),u(n,"_saveChangesToValue",[]),t&&i.each(t,function(){var t;!this.property||!(t=this.property.name)||n._saveChangesToValue.push(n.dataWorkspace[ni(t)])})),n._saveChangesToValue}),startPage:l(function(){var n;return this._startPageValue||(n=ht(this.getModel(),":@StartPage"),n?u(this,"_startPageValue",this.screen.findContentItem(n.value)):u(this,"_startPageValue",this.pages[0])),this._startPageValue}),validate:function(){var n=[],t,u;return!!this.saveChangesTo&&this.saveChangesTo.length>0&&(t=this.saveChangesTo[0],!t||(u=t.details.getChanges(),i.each(u,function(){i.each(this.details.properties.all(),function(){this instanceof r.Entity.Details.StorageProperty&&(n=n.concat(us(this,this.value,!0)))})}))),n},rootContentItem:l(function(){if(!this._rootContentItem){var n=this.getModel();u(this,"_rootContentItem",r.services.contentItemService.createContentItemTree(this.screen,n.rootContentItem,null))}return this._rootContentItem}),pages:l(function(){var r=this.rootContentItem,t,i=[],n;if(!!r&&!!(t=r.children))for(n=0;n<t.length;n++)i=i.concat(t[n].children.slice(0));return i}),_findModel:function(){return r.services.modelService.tryLookupById(this._modelId)},_onDispose:function(){this._rootContentItem&&(y(this._rootContentItem),this._rootContentItem=null),this._startPageValue&&(this._startPageValue=null),this._propertyData=null}}),v("_defineScreen",p),v("Screen",n)}(),function(){e(r,"ShellCommandViewModel",function(n,t,i){this.command=n,this.displayName=t,this.name=i},null,{}),cr=function(n,t,i,u,f){var e=new r.BoundCommand(n,t,i),o=new r.ShellCommandViewModel(e,u,f);return gt(o,e),o}}(),function(){var n=ut("ScreenType","Screen");e(r,"NavigationUnit",function(n){this.shell=n,this._pageUiControls=[]},null,{boundaryOption:tt.none,popup:!1,nestedChangeSet:null,dialogTitle:h(),pageName:h(),isBrowseMode:function(){var t=this;return!t.isPopupPage&&t.screen.details.rootContentItem.properties[n]==="Browse"},hasChanges:l(function(){var n=this.boundaryOption;return n===tt.save?this.screen.details.dataWorkspace.details.hasChanges:n===tt.nested?!!this.nestedChangeSet&&this.nestedChangeSet.hasNestedChanges:!1}),registerPageUiControl:function(n){this._pageUiControls.push(n)},cleanPageUiControls:function(){this._pageUiControls.forEach(y),this._pageUiControls=[]},_onDispose:function(){var n=this;n.cleanPageUiControls(),n.contentItemTree=null,n.screen=null,n.task=null}}),e(r,"TaskViewModel",function(n,t,i){this.shell=n,this.screen=t,this.taskBoundaryOption=i},null,{screenTitle:h(),_onDispose:function(){var n=this,t=n.tabCommands,i,r;t&&(t.forEach(y),n.tabCommands=null),n.screen=null}})}();var it,wl="activeNavigationUnitChanged",bl,kl="shellCommandStart",dl="shellCommandComplete";(function(){function pi(n,t){var i=this;return(i.saveCommand=cr("commitChanges",this,null,f("shell_saveChanges_btn"),"save"),i.discardCommand=cr("cancelChanges",this,null,f("shell_discardChanges_btn"),"discard"),i.okCommand=cr("commitChanges",this,null,f("shell_acceptNested_btn"),"ok"),i.cancelCommand=cr("cancelChanges",this,null,f("shell_cancelNested_btn"),"cancel"),i.backCommand=cr("navigateBack",this,null,f("shell_back_btn"),"back"),i.closeCommand=cr("navigateBack",this,null,f("shell_close_btn"),"close"),i.logoutCommand=cr("logout",this,null,f("shell_logout_btn"),"logout"),n=n||wu(),t&&(i._homeScreen=r.services.modelService.tryLookupById(t)),i._homeScreen||(i._homeScreen=n?n.homeScreen:null),!i._homeScreen)?c.Promise.wrapError(f("shellViewModel_noHomeScreen")):(i.logoPath=vu+n.logo,i.beforeFirstPageNavigationUnit=new r.NavigationUnit(i),i.beforeFirstPageNavigationUnit.boundaryOption=tt.none,i.beforeFirstPageNavigationUnit.index=-1,i._startNavigationOperation(null,function(n){var t=d(i,{screenDefinition:i._homeScreen,boundaryOption:tt.save});a(n,ot(i,t,!1))}))}function ki(){var n=this;return n._currentNavigationOperation?n._currentNavigationOperation.promise():ct(function(t){pt(t.code(function(){n._currentNavigationOperation?a(t,n._currentNavigationOperation.promise()):t.complete()}))})}function di(n,t,i,u,f,e){var a=r.services.modelService,o,s,h=this.activeNavigationUnit,c,l;return typeof n=="string"?o=n:s=n,c=h.isBrowseMode()&&h.boundaryUnit.boundaryOption===tt.save?tt.save:tt.nested,u=!!u,l={screenId:o,screenDefinition:s,pageName:i,screenArguments:t,boundaryOption:c,popup:u,beforeShown:f,afterClosed:e},fi(this,l)}function gi(n){o(s.getPopupContentStart);var r=hs,i=this.activeNavigationUnit.screen,t=ft(i,n,!0);return ui(t,i),t._activate(),o(s.getPopupContentEnd),this.shellView.showPopup(t,function(){t._deactivate()},r)}function nr(){return this.shellView.closePopup()}function tr(n,t,i){var r=this,u;if(n===r.activeNavigationUnit.pageName)return rt();var f=ft(r.activeNavigationUnit.screen,n,!1),e=f.pageKind,o=e===bi.popup?tt.nested:tt.none;return t=typeof t=="string"?t:o,u={screen:r.activeNavigationUnit.screen,pageName:n,boundaryOption:t,popup:!1,beforeShown:i,isShowTab:!0},fi(r,u)}function ir(n){oi(this,this.activeNavigationUnit,n)}function rr(){var n=this,t=wi.none;return n.canApplyNestedChanges?n.applyNestedChanges(t):n.saveChanges(t)}function ur(){var n=this,t=wi.beforeSaveBoundary;return n.canApplyNestedChanges?n.applyNestedChanges(t):n.saveChanges(t)}function er(){var n=this;return n.canCancelNestedChanges?n.cancelNestedChanges():n.discardChanges(wi.beforeSaveBoundary)}function at(n){var t=this;return t.canSaveChanges||k(),n=li(t,n),t._startNavigationOperation("saveChanges",function(i){var r=1;ri(function(){ei(t,i,function(){var r=et(t),u=ai(t,n);a(i,w(t,r,!0,u))})},r)})}function vt(n){var t=this;return this.canDiscardChanges||k(),n=li(t,n),t._startNavigationOperation(null,function(i){ri(i.code(function(){var f=t.activeNavigationUnit,r=et(t),u=ai(t,n);a(i,w(t,r,!1,u))}),1)})}function wt(n){this.canApplyNestedChanges||k();var t=this;return t._startNavigationOperation(null,function(i){t.validateActivePage(i.code(function(u){if(u)i.error(u);else{var e=ci(t,n),f=et(t);n===r.NavigateBackOption.none&&(f.onlyApplyNestedChanges=!0),a(i,w(t,f,!0,e))}}))})}function bt(){this.canCancelNestedChanges||k();var n=this;return n._startNavigationOperation(null,function(t){var i=ci(n),r=g(n,n.activeNavigationUnit,i,!1);a(t,w(n,r,!1,i))})}function gt(){return this.activeNavigationUnit.index>0?this.navigateBack(this.activeNavigationUnit.index):rt()}function or(n){var t=this,r,i,u;return n=n||1,r=t.activeNavigationUnit.index,i=r-n,(n<=0||i<0)&&gf(null,n,"distance"),u=t.navigationStack[i],t._startNavigationOperation(null,function(n){a(n,t._requestNavigateBack(u))})}function sr(n){var t=this;if(n!==this.activeNavigationUnit)return ct(function(i){var r=g(t,t.activeNavigationUnit,n,!1);hi(t,r,n).then(function(){pt(function(){i.complete()})},function(n){i.error(n||f("command_exec_err"))})})}function hr(n){var t=this,i;return n&&n!==this.activeNavigationUnit?(i=g(t,t.activeNavigationUnit,n,!0),w(t,i,!1,n)):new c.Promise(function(n){n()})}function ni(){this.shellView.logout()}function lr(){for(var n in this.navigationStack)if(this.navigationStack[n].hasChanges)return!0;return!1}function k(){ar("CannotExecuteError",f("command_cannot"))}function t(n,t){n&&n(t||null)}function a(n,t){t.then(function(t){n.complete(t)},function(t){n.error(t)})}function vr(n,t){o(s.navigationStart);var i=this;return i._currentNavigationOperation&&ar("AlreadyNavigatingError",f("shell_already_nav")),ct(function(r){i.shellView.commitActiveElement(),n&&st(kl,{name:n}),i._currentNavigationOperation=r,t(r),t=null})._thenEx(function(t){if(i._currentNavigationOperation=null,n&&st(dl,{name:n,error:t}),t)throw t;})}function rt(n){return ct(function(t){pt(function(){t.complete(n)})})}function ut(n,t){return n.navigationStack[t]}function ti(n,t){return t.index>0?ut(n,t.index-1):null}function yr(n){for(var r=[],i,t=0;t in this.navigationStack;t++)i=this.navigationStack[t],(!n||n(i))&&r.push(i);return r}function ii(n,t){return ct(function(i){function r(n){if(n.length===0)i.complete();else{var u=n[0],f=null,e=n.slice(1);try{t(u,i.code(function(n){f=n,f?i.error({error:f,errorElement:u}):r(e)}))}catch(o){i.error({error:o,errorElement:u})}}}r(n)})}function pr(n,t){if(!!t.screenId&&!t.screenDefinition&&(t.screenDefinition=r.services.modelService.tryLookupById(t.screenId),!t.screenDefinition))throw f("shell_invalid_1args",t.screenId);}function d(t,u){var e=i.extend({},d.defaults,u),y=!!e.popup,nt=!!e.isShowTab,l,h,it,rt,a=e.boundaryOption,w,c,v,f,k,p,g;return o(s.loadScreenStart),e.screen?h=e.screen:(w=t.activeNavigationUnit?t.activeNavigationUnit.screen.details.dataWorkspace:null,l=n.msls.application[e.screenDefinition.name],h=pl(l,w,e.screenArguments)),c=ft(h,e.pageName,!1),c.isVisible=!0,v=b(lo(t.navigationStack).map(function(n){return n.task})).first(function(n){return n.screen===h}),v||(v=lu(t,h,a)),nt?(f=t.activeNavigationUnit,f.contentItemTree&&f.contentItemTree._deactivate(),c._activate(),f.contentItemTree=c,f.pageName=c.name):(f=new r.NavigationUnit(t),k=t.activeNavigationUnit?t.activeNavigationUnit.index:-1,p=k+1,f.index=p,f.boundaryOption=a,f.popup=y,f.popupDepth=(t.activeNavigationUnit?t.activeNavigationUnit.popupDepth:0)+(y?1:0),f.screen=h,f.contentItemTree=c,f.pageName=c.name,f.task=v,a===tt.none?t.activeNavigationUnit&&(f.boundaryUnit=t.activeNavigationUnit.boundaryUnit):f.boundaryUnit=f,y&&(g=new r.data.DataBinding("screenTitle",f.task,"dialogTitle",f,yt.oneWayFromSource),g.bind()),t.navigationStack[p]=f,a===tt.nested&&(f.nestedChangeSet=bo(h.details.dataWorkspace)),f.afterClosed=e.afterClosed),e.beforeShown&&e.beforeShown.call(h,h),!l||!l.created||l.created.call(null,h),ui(c,h),o(s.loadScreenEnd),f}function ui(n,t){n.data!==t&&(n.data=t,n.screen=t)}function fi(n,t){var s=n.activeNavigationUnit,h,i,o=!t.isShowTab,f,r,e,u;if(pr(n,t),o){if(f=t.screen?t.screen.details.getModel():t.screenDefinition,r=f.rootContentItem.propertySources,r)for(i=0;i<r.length;i++)if(r[i].property.name==="ShowAsDialog"&&(u=r[i].value,typeof u=="boolean"&&u)){e=!0;break}e&&(t.popup=!0),t.isShowTab||!n.activeNavigationUnit||!n.activeNavigationUnit.popupDepth||(t.popup=!0),n.activeNavigationUnit||(t.popup=!1),fr.enableModalScrollRegions||(t.popup=!1)}return n._startNavigationOperation(null,function(i){var r=cu(n,n.activeNavigationUnit,t.boundaryOption);hi(n,r,null)._thenEx(function(r){if(r)i.error(r);else{var f=d(n,t);a(i,ot(n,f,!1))}}).then(null,function(n){i.error(n)})})}function ft(n,t,i){var r,u;if(t){if(r=n.findContentItem(t),u=!1,r)switch(r.pageKind){case bi.tab:u=!i;break;case bi.popup:u=i}u||ar(i?"PopupNotFoundError":"TabNotFoundError",f(i?"shell_popupnotfound_2args":"shell_tabnotfound_2args",t,n.details.getModel().name))}else r=n.details.startPage;return r}function wr(n,i,r,u,f){if(!r.isBackward||!u){t(f);return}var o=i.screen,h="constructor",l=o[h],s=l.beforeApplyChanges,e;if(!s){t(f);return}try{e=s.call(null,o)}catch(a){t(f,a)}e===!1?t(f,new c.ErrorFromName(nt)):c.Promise.is(e)?e._thenEx(function(n,i){n?t(f,n):i===!1?t(f,new c.ErrorFromName(nt)):t(f)}):t(f)}function br(n,i,r,u,f){var e,o,s;r.isBackward&&i.boundaryOption===tt.nested?(e=i.nestedChangeSet,e&&(u?r.onlyApplyNestedChanges?e.applyNestedChanges():e.commitNestedChanges():e.cancelNestedChanges(),r.onlyApplyNestedChanges||(i.nestedChangeSet=null)),i.contentItemTree._alwaysShowValidationResults=!1,u||i.contentItemTree._refreshStringValue(),t(f)):(o=r.isForward&&r.crossesSaveBoundary||r.isBackward&&i.boundaryOption===tt.save,o?(s=i.screen.details.dataWorkspace.details,u?kr(n,i,function(n){n||(i.contentItemTree._alwaysShowValidationResults=!1),t(f,n)}):(dr(n,i),i.contentItemTree._alwaysShowValidationResults=!1,i.contentItemTree._refreshStringValue(),t(f))):(u||i.contentItemTree._refreshStringValue(),t(f)))}function w(n,t,r,u){function e(n,t){if(n)try{n.call(t,t,r?se.commit:se.cancel)}catch(i){}}return ct(function(o){var s=t.navigationUnitsCrossedOver.reverse(),h,c;ii(s,function(i,u){wr(n,i,t,r,function(n){u(n)})})._thenEx(function(i){var u=i&&i.error;return u?(u.name===nt&&(u={userCanceled:!0,noErrorDialog:!0}),lt(o,u),!0):ii(s,function(i,u){br(n,i,t,r,function(n){t.isBackward&&(i!==s[s.length-1]?e(i.afterClosed,i.screen):(h=i.afterClosed,c=i.screen)),u(n)})})})._thenEx(function(r,s){if(!s){var l=null;r&&r.error&&(u&&(u=r.errorElement),l=r.error||f("shell_unknown_save")),t.isForward&&i.each(t.navigationUnitsCrossedOver,function(n,t){t.boundaryOption!==tt.nested||t.nestedChangeSet||(t.nestedChangeSet=bo(t.screen.details.dataWorkspace))}),!u||u===n.activeNavigationUnit?lt(o,l):ot(n,u,t.isBrowserMode)._thenEx(function(n){n&&!l&&(l=n),lt(o,l),h&&pt(function(){ct(function(n){e(h,c),n.complete()},!0)})})}})})}function kr(n,r,u){var s=r.screen.details,a=s.dataWorkspace.details,e,h,c,l,o,v;if(!a.hasChanges){t(u);return}if(e=bl(),!e){for(h=a.properties.all(),o=0,v=h.length;o<v;o++)if(c=h[o],c.value.details.hasChanges){if(l){t(u,{title:f("screen_save_failed"),message:f("screen_save_multiple_data_sources")});return}l=c.value}e=l.saveChanges()}e._thenEx(function(n){var c=!n,e=[],o="",h,l;c||(i.each(n,function(n,t){n>0&&(o+="\r\n"),o+=t.message,h=t.validationResult,h&&e.push(h)}),l={title:f("screen_save_failed"),message:o}),s.serverErrors.length===0&&e.length===0||(s.serverErrors=e),c&&(r.contentItemTree._alwaysShowValidationResults=!1),t(u,l)}).then(null,function(n){t(u,n)})}function dr(n,t){for(var e=t.screen.details,o=e.dataWorkspace.details,u=o.properties.all(),r,i=0,f=u.length;i<f;i++)r=u[i].value.details,r.hasChanges&&r.discardChanges()}function ei(n,t,i){var r=n.activeNavigationUnit;oi(n,r,t.code(function(u){u?t.error(u):gr(n,r.screen,t.code(function(n){n?t.error(n):i()}))}))}function et(n){var i=n.activeNavigationUnit.boundaryUnit,t=null;return t=i.index===0?n.beforeFirstPageNavigationUnit:ti(n,i),g(n,n.activeNavigationUnit,t,!1)}function oi(n,i,r){var u=i.contentItemTree,e=f("shell_validation_errors");u.validate(!0),u.hasValidationErrors(!0)?(u._alwaysShowValidationResults=!0,t(r,e)):t(r)}function gr(n,r,u){var e=r.details.validate(),s=r.details.rootContentItem,f,o;e.length>0?(f=[],i.each(e,function(){f.push(this.property.name+": "+this.message)}),o=f.join("\r\n"),t(u,o)):t(u)}function si(n){return b(n).any(function(){return this.details.hasEdits})}function nu(n){var i,t;switch(n.boundaryOption){case tt.save:return i=n.screen.details.dataWorkspace,i.details.hasChanges&&si(i.details.getChanges());case tt.nested:return t=n.nestedChangeSet,!!t&&t.hasNestedChanges&&si(t.getNestedChanges());default:return!1}}function tu(n,t){return t&&n.screen.details.dataWorkspace.details.hasChanges?!0:!1}function iu(n,t){if(t.isForward)return tu(t.sourceNavigationUnit,t.crossesSaveBoundary);for(var i=0;i<t.navigationUnitsCrossedOver.length;i++)if(nu(t.navigationUnitsCrossedOver[i]))return!0;return!1}function hi(n,t,i){var r,u,e;return iu(n,t)?(r=t.crossesSaveBoundary?{message:f("shell_save_message"),title:f("shell_save_title"),buttons:[{text:f("shell_save_btn"),icon:"check",result:p.yes},{text:f("shell_discard_btn"),icon:"delete",result:p.no},{text:f("shell_stay_btn"),icon:"back",result:p.cancel}]}:{message:f("shell_apply_message"),title:f("shell_apply_title"),buttons:[{text:f("shell_apply"),icon:"check",result:p.yes},{text:f("shell_discard_btn"),icon:"delete",result:p.no},{text:f("shell_stay_btn"),icon:"back",result:p.cancel}]},r.defaultResult=p.cancel,e=!1,ct(function(f){kt.show(r).then(function(r){function e(){a(f,w(n,t,u,i))}r===p.yes||r===p.no?(u=r===p.yes?!0:!1,u?ei(n,f,e):e()):r===p.cancel?f.error({message:"User canceled the navigation by clicking Cancel button",userCanceled:!0,noErrorDialog:!0}):r===p.none?f.error({message:"User canceled the navigation without clicking any buttons",userCanceled:!0,noErrorDialog:!0}):f.error({message:"Cancel the navigation due to unexpected result.",userCanceled:!0,noErrorDialog:!0})})})):t.isBackward?w(n,t,!1,i):rt()}function ot(n,t,i){return t===n.beforeFirstPageNavigationUnit&&(t=n.navigationStack[0]),ct(function(r){function u(){n.activeNavigationUnit=t,i||vi(n),n.finishNavigation()._thenEx(function(t){t||st(wl,n)}),r.complete()}n.activeNavigationUnit!==t&&(o(s.pageActivationStart),n.activeNavigationUnit&&n.activeNavigationUnit.contentItemTree._deactivate(),t.contentItemTree._activate(),o(s.pageActivationEnd)),i?(n.shellView.awaitBrowserNavigation(t).then(function(){vi(n)}),u()):n.shellView.navigate(t).then(u,function(n){r.error(n||f("shell_nav_failed"))})})}function ci(n,t){var i=n.activeNavigationUnit.boundaryUnit,r;return t===wi.none?null:(!i||i.boundaryOption!==tt.nested||(r=ti(n,i)),r)}function li(n,t){switch(t){case wi.none:case wi.saveBoundary:case wi.beforeSaveBoundary:return t}return yi}function ai(n,t){var i=n.activeNavigationUnit.boundaryUnit,r;return!i||i.boundaryOption!==tt.save?null:(t===wi.none?r=null:t===wi.saveBoundary?r=i:(r=i,i.index>0&&(r=ut(n,i.index-1))),r)}function ru(){var n=this.activeNavigationUnit;if(n){var t=n.screen.details,i=t.dataWorkspace.details;return!i.hasNestedChangeSets}return!1}function uu(){return this.canSaveChanges}function fu(){var t=this.activeNavigationUnit,n;return t?(n=t.boundaryUnit,n.boundaryOption===tt.nested&&!!n.nestedChangeSet):!1}function eu(){return this.canApplyNestedChanges}function ou(n){var t;return!!(t=n.activeNavigationUnit)&&t.task.home}function su(){return!ou(this)}function vi(n){var u=n.activeNavigationUnit.index,t=[],r;o(s.cleanNavigationStackStart),i.each(n.navigationStack,function(n,i){i.index>u&&t.push(i)}),r=t.sort(function(n,t){return t.index-n.index}),i.each(r,function(t,i){hu(n,i)}),o(s.cleanNavigationStackEnd)}function hu(n,t){delete n.navigationStack[t.index];var i=n.shellView.onNavigationUnitClosed;i&&i.call(n.shellView,t)}function ht(){this.navigationUnitsCrossedOver=[]}function g(n,t,i,r){var s=i===n.beforeFirstPageNavigationUnit,u=new ht,f,e,o;for(u.sourceNavigationUnit=t,u.targetNavigationUnit=i,u.isBackward=!0,u.isBrowserMode=r,f=t;f;){if(f===i)break;u.navigationUnitsCrossedOver.push(f);switch(f.boundaryOption){case tt.nested:u.crossesNestedBoundary=!0;break;case tt.save:u.crossesSaveBoundary=!0}e=f.index-1,o=ut(n,e),f=o}return u.navigationUnitsCrossedOver=u.navigationUnitsCrossedOver.reverse(),u}function cu(n,t,i){var r=new ht,f,u;if(r.sourceNavigationUnit=t,r.isForward=!0,r.crossesSaveBoundary=i===tt.save,r.crossesNestedBoundary=i===tt.nested,r.crossesSaveBoundary)for(f in n.navigationStack)u=n.navigationStack[f],u.screen===t.screen&&r.navigationUnitsCrossedOver.push(u);else r.navigationUnitsCrossedOver.push(t);return r}function lu(n,t,i){var u=new r.TaskViewModel(n,t,i),o,f,h,c;for(u.home=t.details.getModel().id===n._homeScreen.id,u.tabCommands=[],o=t.details.pages.filter(function(n){return n.pageKind===bi.tab}),f=0;f<o.length;f++){var e=o[f],l=e.name,s=cr("showTab",t,bu(null,[{value:e.name}]),e.displayName,l),a=new r.data.DataBinding("displayName",e,"displayName",s);a.bind(),u.tabCommands.push(s)}return h=t,c=new r.data.DataBinding("displayName",h.details,"screenTitle",u,yt.oneWayFromSource),c.bind(),u}function lt(n,t){t?n.error(t):n.complete()}var yi=wi.beforeSaveBoundary,au="AlreadyNavigatingError",nt="Canceled";at.canExecute=function(){return this.canSaveChanges},vt.canExecute=function(){return this.canDiscardChanges},wt.canExecute=function(){return this.canApplyNestedChanges},bt.canExecute=function(){return this.canCancelNestedChanges},gt.canExecute=function(){return this.canNavigateHome},ni.canExecute=function(){var n=this;return n._isFormsAuthEnabled},d.defaults={screenId:null,screenDefinition:null,screen:null,pageName:null,prepend:!1,screenArguments:[]},ht.prototype={isForward:!1,isBackward:!1,isBrowserMode:!1,sourceNavigationUnit:null,targetNavigationUnit:null,navigationUnitsCrossedOver:null,crossesSaveBoundary:!1,crossesNestedBoundary:!1,onlyApplyNestedChanges:!1},e(r,"ShellViewModel",function(){var n=this,t=r.securityDataService;n.navigationStack={},t.getAuthenticationType().then(function(i){n._isFormsAuthEnabled=i===t.AuthenticationType.forms})},null,{activeNavigationUnit:h(),logoPath:h(),canSaveChanges:dt(ru),canDiscardChanges:dt(uu),canApplyNestedChanges:dt(fu),canCancelNestedChanges:dt(eu),canNavigateHome:dt(su),applyChanges:rr,commitChanges:ur,cancelChanges:er,saveChanges:at,discardChanges:vt,applyNestedChanges:wt,cancelNestedChanges:bt,showScreen:di,showTab:tr,showPopup:gi,closePopup:nr,navigateBack:or,navigateHome:gt,logout:ni,_requestNavigateBack:sr,synchronizeAfterBrowserNavigation:hr,validateActivePage:ir,initialize:pi,findNavigationUnits:yr,navigationInProgress:l(function(){return!!this._currentNavigationOperation}),finishNavigation:ki,_startNavigationOperation:vr,anyNavigationUnitHasChanges:lr,_isFormsAuthEnabled:h(),_onDispose:function(){var n=this;y(n.saveCommand),y(n.discardCommand),y(n.okCommand),y(n.cancelCommand),y(n.backCommand),y(n.closeCommand),y(n.logoutCommand)}}),u(r,"shell",new r.ShellViewModel),it=r.shell,v("showProgress",function(n){n&&it.shellView.showProgress(n)})})(),function(){function t(n,t){var i=n.getModel();return i?ru(i.properties,t.name):null}function o(n,t){var i,r=[],u;return!t||!(i=t.source)||(u=es(i),r=u.argumentBindings),bu(n.screen,r)}function s(n){var t=n._invalidatedCallback;t&&t()}function v(n,t,i){t.addChangeListener(null,function(){n._delayingInvalidation||(n._delayingInvalidation=!0,setTimeout(function(){n._delayingInvalidation=!1,i()},250))})}function i(n,t){var i=n._entitySet,r;return i||(r=n._baseQuery,r?i=r._entitySet:(t||(t=n._entry.elementType),i=uf(n._screenDetails.dataWorkspace,t)),n._entitySet=i),i}function h(n){var t=n._entry.elementType,r=i(n,t);return new t(r)}function c(n){var t=n._entry.elementType,r=i(n,t);return r.canInsert}function p(n,t){var i=n._collectionChangeCallback,r;i&&t instanceof n._entry.elementType&&(r=t.details.entityState,r===f.added?i(ft.add,t):r===f.discarded&&i(ft.remove,t))}function w(n,t){var r=n._collectionChangeCallback,i=t.action;!r||i!==ft.add&&i!==ft.remove||r(i,t.items[0])}function a(n){var t=n._collectionProperty,i=n._collectionChangeHandler,u="collectionchange",r;i&&y(i),t=n._collectionProperty=n._entry.getNavigationProperty.apply(n._screenDetails),t&&(r=rl(t),n._collectionChangeHandler=yu(r,u,n,function(t){w(n,t.detail)}))}var n,f=r.EntityState;gl=function(n,i){return o(n,t(n,i))},e(r,"ScreenCollectionPropertyLoader",function(n,i){var r=this,f=t(n,i),e=!!f.disablePaging;sf.call(r,f.pageSize),u(r,"_screenDetails",n),u(r,"_entry",i),u(r,"_arguments",o(n,f)),e&&u(r,"_disablePaging",!0),v(r,r._arguments,function(){s(r)})},sf,{deleteItem:function(n){n.deleteEntity()},_onDispose:function(){y(this._arguments)}}),n=r.ScreenCollectionPropertyLoader,e(r,"ScreenQueryPropertyLoader",function(t,i){var r=this;n.call(r,t,i),yu(r._screenDetails.dataWorkspace.details,"contentchange",r,function(n){p(r,n.detail)})},n,{_baseQuery:l(function(){return this._entry.createQuery.apply(this._screenDetails,this._arguments.getCurrentValues())}),_getAddedEntities:function(){return i(this)._addedEntities},addNewItem:function(){return h(this)}}),fe(r.ScreenQueryPropertyLoader),u(r.ScreenQueryPropertyLoader.prototype.addNewItem,"canExecute",function(){return c(this)}),e(r,"ScreenNavigationPropertyLoader",function(i,r){var u=this,e,o,h,c=[],f,l;n.call(u,i,r),!(e=t(u._screenDetails,u._entry))||!(o=e.query)||!(h=o.source)||(l=es(h),c.push({binding:l.lastObjectBindingPath})),f=bu(i.screen,c),f.addChangeListener(null,function(){a(u),s(u)}),gt(u,f),a(u)},n,{_baseQuery:l(function(){var t=this,i=t._collectionProperty,n=i&&i.query,r=t._entry.appendQuery;return!n||!r||(n=r.apply(n,t._arguments.getCurrentValues())),n}),_getAddedEntities:function(){var n=[],t=this._collectionProperty;return t&&(n=ul(t)),n},addNewItem:function(){var r=this,n=r._collectionProperty,u=h(r),t,i;return!n||(t=n._entry.data,!t||(i=t.toPropertyName,!i||(u[i]=n.owner))),u}}),fe(r.ScreenNavigationPropertyLoader),u(r.ScreenNavigationPropertyLoader.prototype.addNewItem,"canExecute",function(){return c(this)})}(),function(){e(r,"ScreenScalarPropertyLoader",function(n,t,i){var r=this;u(r,"_screenDetails",n),u(r,"_entry",t),u(r,"_arguments",gl(n,t)),r._arguments.addChangeListener(null,i)},null,{load:function(){var n=this,t=n._activePromise,i,r;return t||(t=n._activePromise=ct(function(t){i=n._entry.createQuery.apply(n._screenDetails,n._arguments.getCurrentValues()),i.execute()._thenEx(function(i,u){r=!0,n._activePromise=null,i?t.error(i):t.complete(u.results[0])}),t.interleave()}),r&&(n._activePromise=null)),t}})}(),function(){function u(){return this._entry.get.call(this._details.owner)}function y(n){this._entry.set.call(this._details.owner,n)}function f(n,t,i){var r=t._loadPromise;return r||(t._isLoaded&&(t._isLoaded=!1,n.dispatchChange("isLoaded")),t._loading=!0,n.loadError&&(n.loadError=null),r=t._loadPromise=ct(i,!!ue),t._loading||(t._loadPromise=null)),r}function o(n,t,i){t._loading=!1,t._isLoaded=!0,n.dispatchChange("isLoaded"),i&&(n.loadError=i),t._loadPromise=null}function p(n,t){return t.getNavigationProperty?new r.ScreenNavigationPropertyLoader(n,t):new r.ScreenQueryPropertyLoader(n,t)}var s=r.Screen,n=s.Details,t,c,i,a,v,w;e(n,"Property",function(n,t){rf.call(this,n,t),this.screen=this.owner},rf),t=n.Property,e(n,"LocalProperty",function(n,i){t.call(this,n,i)},t,{value:h(null,u,y)}),c=n.LocalProperty,e(n,"RemoteProperty",function(n,i){t.call(this,n,i)},t,{isLoaded:h(!1,function(){var n=this._details,t=n._propertyData[this.name];return!!t._isLoaded}),loadError:h(null),value:h(null,u)}),i=n.RemoteProperty,e(n,"ReferenceProperty",function(n,t){i.call(this,n,t)},i,{load:function(){var n=this,i=n._details,u=n.name,t=i._propertyData[u],e;return e=f(n,t,function(f){var e=t._loader;e||(e=t._loader=new r.ScreenScalarPropertyLoader(i,n._entry,function(){i.properties[u].load()})),e.load()._thenEx(function(i,r){o(n,t,i),t._value!==r&&(t._value=r,n.dispatchChange("value"),n.screen.dispatchChange(u)),i?f.error(i):f.complete(r)}),f.interleave()})}}),a=n.ReferenceProperty,cs=function(n,t,i){var r=i._value,u;return r||(u=p(n,t),r=i._value=new t.type(n,u),gt(r,u),gt(n,r)),r},e(n,"CollectionProperty",function(n,t){i.call(this,n,t)},i,{isReadOnly:l(function(){return wc(this._details.dataWorkspace,this._entry.elementType)}),load:function(){var n=this,i=n._details,t=i._propertyData[n.name],r;return r=f(n,t,function(r){function f(i){o(n,t,i),i?r.error(i):r.complete(u)}var u=cs(i,n._entry,t);u.canLoadMore?(u.load()._thenEx(f),r.interleave()):f(null)})}}),v=n.CollectionProperty}(),function(){function rt(n){n._loadOperation?n._loadOperation.code(function(){nt(n)})():w(n,!1,n._mergeOption)}function ut(t,r,u){var f=t._data,e=-1;r===ft.add?(f.splice(0,0,u),n(t,"change","count"),n(t,"collectionchange",new fu(r,[u],-1,0))):(i.each(f,function(n,t){return t===u?(f.splice(n,1),e=n,!1):!0}),e>=0&&(t.selectedItem===u&&(t.selectedItem=null),n(t,"change","count"),n(t,"collectionchange",new fu(ft.remove,[u],e,-1))))}function b(n){n._deferEvents=!0}function k(n){var t=n._deferredEvents;n._deferEvents=!1,i.each(t,function(){this.type==="change"?n.dispatchChange(this.e):n.dispatchEvent(this.type,this.e)}),t.length=0}function n(n,t,i){n._deferEvents?n._deferredEvents.push({type:t,e:i}):t==="change"?n.dispatchChange(i):n.dispatchEvent(t,i)}function p(t,i,r,u){t[i]!==r&&(t[i]=r,n(t,"change",u))}function et(){return this._selectedItem}function ot(n){p(this,"_selectedItem",n,"selectedItem")}function d(n,t){p(n,"_isLoaded",t,"isLoaded")}function c(n,t){p(n,"_loadError",t,"loadError")}function w(t,i,r){function s(){e||(e=!0,n(t,"change","state"),n(t,"change","canLoadMore"),c(t,null))}var f=t._loadPromise,e,o;return f?f:(t._loadMorePromise=null,u(t,"_mergeOption",r),f=t._loadPromise=ct(function(n){o=!0,t._loadOperation=n,f=t._loadPromise=n.promise(),s(),nt(t)},i),o&&!t._loadOperation&&(t._loadPromise=null),s(),f)}function st(n){return w(this,n)}function ht(){return w(this,!1,go.unchangedOnly)}function nt(n){var i=n._loader,t=n._loadOperation,r;if(!i){t&&t.complete();return}i.reset(),r=n._activeLoaderPromise=i.loadNext(n._mergeOption),r._thenEx(function(t,i){n._activeLoaderPromise===r&&lt(n,i,t)}),t&&t.interleave()}function lt(t,r,u){o(s.fillCollectionStart);var f=t._data,e=t._loadOperation;t._loadOperation=null,t._loadPromise=null;try{b(t),u?c(t,u):(c(t,null),f.length=0,i.each(r,function(){f.push(this)}),n(t,"change","state"),n(t,"change","count"),n(t,"collectionchange",new fu(ft.refresh)),d(t,!0),n(t,"change","canLoadMore"),t.selectedItem=null),k(t)}finally{u?e.error(u):e.complete(t.count),o(s.fillCollectionEnd)}}function vt(t){function o(){if(!i.canLoadMore){var n;n=i._loadPromise?f("visualCollection_load_pending"):f("visualCollection_already_loaded"),iu(n)}}function s(){u||(u=!0,n(i,"change","state"))}var i=this,r=i._loadMorePromise,u,e;return r?r:(o(),r=i._loadMorePromise=ct(function(n){var u=i._loader,t;if(!u){n.complete();return}o(),e=!0,i._loadMoreOperation=n,r=i._loadMorePromise=n.promise(),s(),t=i._activeLoaderPromise=u.loadNext(i._mergeOption,i._data),t._thenEx(function(n,r){i._activeLoaderPromise===t&&yt(i,r,n)}),n.interleave()},t),e&&!i._loadMoreOperation&&(i._loadMorePromise=null),s(),r)}function yt(t,r,u){o(s.fillCollectionStart);var f=t._data,e=f.length,h=t._loadMoreOperation;t._loadMoreOperation=null,t._loadMorePromise=null;try{b(t),u?c(t,u):(c(t,null),i.each(r,function(){f.push(this)}),n(t,"change","state"),r.length>1&&(n(t,"change","count"),n(t,"collectionchange",new fu(ft.add,r,-1,e))),d(t,!0),t.canLoadMore||n(t,"change","canLoadMore")),k(t)}finally{u?h.error(u):h.complete({items:r,startIndex:e}),o(s.fillCollectionEnd)}}function tt(){var n=this._loader.addNewItem();return this.selectedItem=n,n}function it(){var n=this.selectedItem;n?this._loader.deleteItem(n):iu(f("visualCollection_no_sel"))}var e=r.VisualCollection,a=r.EntityState,t;at(e,{State:{idle:"idle",loading:"loading",loadingMore:"loadingMore"}}),t=e.State,yl=function(n,t,i){var r=n;r.screen=t?t.owner:null,u(r,"_loader",i),u(r,"_data",[]),u(r,"_deferredEvents",[]),i.subscribe(function(n,t){ut(r,n,t)},function(){rt(r)})},tt.canExecute=function(){var n=this,i=n._loader,r=i.addNewItem.canExecute;return n.state===t.idle&&(!r||r.apply(i))},it.canExecute=function(){var t=this.selectedItem,n,i;return!!t&&!!(n=t.details)&&!!(i=n.entitySet)&&n.entityState!==a.deleted&&n.entityState!==a.discarded&&(n.entityState===a.added||!!i.canDelete)},g(e,{_deferEvents:!1,_isLoaded:!1,_loadError:null,_selectedItem:null,canLoadMore:h(null,function(){return!this._loadPromise&&this._loader.canLoadNext}),data:l(function(){return this._data.slice(0)}),count:h(null,function(){return this._data.length}),isLoaded:h(null,function(){return this._isLoaded}),state:h(t.idle,function(){return this._loadPromise?t.loading:this._loadMorePromise?t.loadingMore:t.idle}),loadError:h(null,function(){return this._loadError}),selectedItem:h(null,et,ot),load:st,loadMore:vt,refresh:ht,addNew:tt,deleteSelected:it,_onDispose:function(){var n=this,t=n._loader;t&&(y(t),n._loader=null),n.screen=null,n._data=[]},collectionchange:er()}),vl=function(){return e},v("VisualCollection",e)}();var li="a",cf="ui-page-active",ov="msls-presenter-content",dy="msls-presenter",br="ui-btn-active",vs="msls-list-empty",sv="msls-list-loading",oi="msls-extra-option",ys="msls-list-empty",hv="msls-list-loading",na="msls-overlay",cu="msls-overlay-active",cv="msls-id-dialog-overlay",lv="msls-id-progress-overlay",ta="msls-progress-icon",gy="data-msls-weight",np="msls-hstretch",tp="msls-hauto",ae="msls-vstretch",ve="msls-vauto",lf="msls-vscroll",av="msls-columns-layout",ia="msls-rows-layout",ye="msls-layout-ignore",ra="msls-layout-ignore-children",ip="msls-viewer",af="msls-label",rp="msls-label-host",vv="msls-state-overlay",pe="ui-disabled",wt="msls-collapsed",ua="msls-executing",yv="msls-display-error",pv="msls-display-error-icon",fa="msls-display-error-text",wv="msls-loading",ps="msls-read-only",bv="msls-validation-error",ea="msls-validation-error-text",kv="msls-screen-tab",ws="msls-screen-tab-active",oa="msls-content",dv="."+oa,sa="msls-tab-content",we="msls-tab-content-active",gv="msls-header",ha="msls-footer",ny="msls-footer-content",be="msls-footer-content-active",ca="msls-page-expired",la="#msls-id-app-loading",ty="taskHeaderTemplate",iy="tabsBarTemplate",ry="dialogHeaderTemplate",uy="screenFooterTemplate",fy="dialogFooterTemplate",ey="footerContentTemplate",aa="contentTemplate",va="msls-background-page",ke="msls-control-header",ya="msls-dialog",up="msls-id-animation-timekeeper",pa="msls-logo",oy="msls-enable-modal-scroll-regions",sy="msls-show-background-screen",hy="msls-full-animation",cy="msls-quick-animation",lu="msls-dialog-transition",de="msls-nested-dialog-transition",ly="msls-opening-transition",bs="msls-screen-transition",ay="msls-tab-transition",wa="msls-in",ks="msls-out",ba="msls-reverse",ge="msls-stage1",ka="msls-stage2",da="msls-stage3",vy="msls-sharepoint-chrome",yy="msls-sharepoint-enabled",py="msls-sharepoint-chrome-link",ti="tabindex",ds,vf;(function(){function e(){var n=navigator.userAgent,t=n.match(/Android/);return!!t}function h(){var n=navigator.userAgent.toLowerCase();return n.indexOf("iphone")!==-1||n.indexOf("windows phone")!==-1}function f(){return it.navigateHome()}function a(n,t,i){return it.showScreen(n,t,null,!1,i?i.beforeShown:null,i?i.afterClosed:null)}function y(){return it.applyChanges()}function p(){return it.commitChanges()}function w(){return it.cancelChanges()}function b(){return it.navigateBack()}function k(t){ch(),!n.performance||!n.performance.timing.domContentLoadedEventStart||o(s.applicationDomLoaded,new Date(n.performance.timing.domContentLoadedEventStart)),o(s.applicationRun);var u=i("body");return fr.enableModalScrollRegions&&u.addClass(oy),fr.showContentBehindDialog&&u.addClass(sy),fr.transitionAnimationLevel===vf.full?u.addClass(hy):u.addClass(cy),new c.Promise(function(n,u){function f(n){u("The application could not be loaded.  Please try refreshing the page.\r\n"+n)}i(la+" img").on("error",function(){i(this).hide()});var e=yh();i(function(){e.then(function(){r.services.modelService.load().then(function(){it.initialize(null,t).then(function(){n()},function(n){u(n)})},function(n){var t="Failed to load model: "+n;f(t)}).then(null,function(n){f(n)})},function(n){f(n)})})})}var t,u;at(r,{TransitionAnimationLevel:{full:"Full",simple:"Simple"}}),vf=r.TransitionAnimationLevel,t=e(),u=h(),fr.enableModalScrollRegions=!t&&!u,fr.showContentBehindDialog=!t&&!u,fr.transitionAnimationLevel=t||!!navigator.userAgent.match(/Opera/)?vf.simple:vf.full,f.canExecute=function(){return it.navigateHome.canExecute.call(it)},nu("application",{activeDataWorkspace:l(function(){var n=it.activeNavigationUnit;return n||(n=it.navigationStack[0]),n.screen.details.dataWorkspace}),rootUri:bf,options:fr,navigateHome:f,showScreen:a,applyChanges:y,onsavechanges:l(function(){return this._listeners&&this._listeners.savechanges},function(n){var t=this;t._listeners&&(t._listeners.savechanges=null),c.Utilities.eventMixin.addEventListener.call(t,"savechanges",n)}),commitChanges:p,cancelChanges:w,navigateBack:b}),ds=r.application,bl=function(){var t={promise:null};return c.Utilities.eventMixin.dispatchEvent.call(n.msls.application,"savechanges",t),t.promise},v("_defineShowScreen",function(n){return n.canExecute=function(){var t=arguments[n.length-1];return!!t&&!!t.canExecute?t.canExecute.apply(this,arguments):!0},n}),v("application",d.create(ds)),v("_run",k),v("TransitionAnimationLevel",vf)})(),ii={taskHeaderTemplate:'<div class="msls-header-area"><div class="titles-bar"><div class="msls-logo-back-area"> LOGO-BACK-PLACEHOLDER<\/div><div class="msls-buttons-row msls-screen-buttons"> BUTTONS-PLACEHOLDER LOGOUT-PLACEHOLDER<\/div><div class="msls-title-area"><h1 class="subControl ui-title msls-title" control="Text" data-ls-text="text:{data.task.screenTitle}"><\/h1><\/div><\/div> TAB-BUTTONS-PLACEHOLDER<\/div>',screenLogoTemplate:'<div class="msls-logo"><img src="Content/Images/user-logo.png" /><\/div>',screenBackTemplate:'<div class="msls-back-button-contain"><div class="subControl msls-back-button msls-large-icon" control="ShellButton" tabindex="0" data-icon="msls-back" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.backCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.backCommand.command}"><\/div><\/div>',screenSaveDiscardTemplate:'<div class="subControl msls-save-button msls-large-icon" control="ShellButton" tabindex="-1" data-icon="msls-save" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.saveCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.saveCommand.command}"><\/div><div class="subControl msls-discard-button msls-large-icon" control="ShellButton" tabindex="-1" data-icon="msls-cancel" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.discardCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.discardCommand.command}"><\/div>',screenOkTemplate:'<div class="subControl msls-ok-button msls-large-icon" control="ShellButton" tabindex="-1" data-icon="msls-ok" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.okCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.okCommand.command}"><\/div>',screenOkCancelTemplate:'<div class="subControl msls-ok-button msls-large-icon" control="ShellButton" tabindex="-1" data-icon="msls-ok" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.okCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.okCommand.command}"><\/div><div class="subControl msls-cancel-button msls-large-icon" control="ShellButton" tabindex="-1" data-icon="msls-cancel" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.cancelCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.cancelCommand.command}"><\/div>',screenLogoutTemplate:'<div class="subControl msls-logout-button msls-large-icon" control="ShellButton" tabindex="-1" data-icon="msls-logout" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.logoutCommand.displayName}" data-ls-isvisible="isVisible:{tap.canExecute}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.logoutCommand.command}"><\/div>',dialogHeaderTemplate:'<div class="msls-header-area"><div class="msls-buttons-row msls-dialog-buttons msls-hauto"> BUTTONS-PLACEHOLDER<\/div><h1 class="subControl ui-title msls-title" control="Text" data-ls-text="text:{data.dialogTitle}"><\/h1> TAB-BUTTONS-PLACEHOLDER<\/div>',dialogSaveDiscardTemplate:'<div class="subControl msls-save-button msls-large-icon" control="ShellButton" tabindex="-1" data-icon="msls-save" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.saveCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.saveCommand.command}"><\/div><div class="subControl msls-discard-button msls-large-icon" control="ShellButton" tabindex="-1" data-icon="msls-discard" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.discardCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.discardCommand.command}"><\/div>',dialogOkTemplate:'<div class="subControl msls-ok-button msls-large-icon" control="ShellButton" tabindex="-1" data-icon="msls-ok" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.okCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.okCommand.command}"><\/div>',dialogOkCancelTemplate:'<div class="subControl msls-ok-button msls-large-icon" control="ShellButton" tabindex="-1" data-icon="msls-ok" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.okCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.okCommand.command}"><\/div><div class="subControl msls-cancel-button msls-large-icon" control="ShellButton" tabindex="-1" data-icon="msls-cancel" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.cancelCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.cancelCommand.command}"><\/div>',dialogCloseTemplate:'<div class="subControl msls-close-button msls-large-icon" control="ShellButton" tabindex="-1" data-icon="msls-cancel" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.closeCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.closeCommand.command}"><\/div>',tabsBarTemplate:'<div class="subControl msls-tabs-bar" control="ScreenTabs" data-ls-task="task:{data.task}" data-ls-activetab="activeTab:{data.pageName}" data-ls-hidetabtitles="hideTabTitles:{data.task.screen.properties.hideTabTitles}"><\/div>',screenFooterTemplate:'<div class="msls-footer" data-role="footer" data-position="fixed" data-track-persistent-toolbars="false" data-update-page-padding="false" data-tap-toggle-blacklist="a, button, input, select, textarea, .ui-header-fixed, .ui-footer-fixed, .ui-popup, li"><\/div>',dialogFooterTemplate:'<div class="msls-footer msls-vauto" data-role="footer"><\/div>',footerContentTemplate:'<div class="msls-vauto msls-footer-content msls-buttons-row"><\/div>',contentTemplate:'<div data-role="content" class="msls-content"><\/div>',popupTemplate:'<div data-role="popup" class="msls-popup"><div class="msls-popup-content"><\/div><div class="msls-clear"><\/div><\/div>',modalViewTemplate:'<div class="msls-modalview msls-collapsed"><\/div>'},function(){function n(n,t){var i=this;i.control=n,i.setKeyBindings(t);this.control.getView().on("keydown",function(n){return i.handleKeyDown(n)})}e("ui.controls","KeyboardDispatcher",n,null,{handleKeyDown:function(n){return this.keyBindings[n.which]?this.keyBindings[n.which](this.control,n,this):!0},setKeyBindings:function(n){this.keyBindings=i.extend({},n)}}),ga=r.ui.controls.KeyboardDispatcher}(),function(){function c(n){return i.ajax({url:n,cache:!0,dataType:"script"})}var r=gr("SPHostUrl"),t=gr("SPAppWebUrl"),l,f=gr("SPChromeColors"),a,v,e,h,y,u,p,w;(r=r?decodeURIComponent(r):null,t=t?decodeURIComponent(t):null,r&&t)&&(l=i.mobile.path.parseUrl(r).domain,f=f?decodeURIComponent(f):null,/^[0-9a-fA-F]{16}$/.test(f)&&(a=f.substring(2,8),v=f.substring(10,16)),o(s.loadSharePointStart),e=t+"/_layouts/15/",h=".js",y=c(e+"SP.RequestExecutor"+h).then(function(){return c(e+"SP.Runtime"+h)}).then(function(){return c(e+"SP"+h)}).then(function(){var u,f;if(!(kr=n.SP)||!kr.ProxyWebRequestExecutorFactory||!kr.ClientObject||!kr.ClientContext)return i.Deferred().reject();u=new kr.ClientContext(t),f=new kr.ProxyWebRequestExecutorFactory(t),u.set_webRequestExecutorFactory(f),bt.context=u,bt.hostWeb=new kr.AppContextSite(u,r).get_web(),bt.appWeb=new kr.AppContextSite(u,t).get_web()}).always(function(){o(s.loadSharePointEnd)}),p={doc:!0,ppt:!0,xls:!0,eml:!0,dot:!0,txt:!0,htm:!0,jpg:!0,png:!0,gif:!0,zip:!0,xps:!0},w={docx:!0,pptx:!0,xlsx:!0,one:!0,dotx:!0,pdf:!0},bt={hostUrl:r,appWebUrl:t,serverUrl:l,chromeBackgroundColor:a,chromeLinkFontColor:v,context:null,hostWeb:null,appWeb:null,ready:y.then,processRequest:function(n){var r=this,f=r.context,t=i.Deferred();return u||(u=[],setTimeout(function(){f.executeQueryAsync(function(){var n=u;u=null,n.forEach(function(n){n()})},function(n){var t=u;u=null,t.forEach(function(t){t(n)})})},0)),u.push(function(i){i?t.reject(i):t.resolve(n)}),t.promise()},load:function(){var r=this,t=r.context,n=i.Deferred(),u=Array.prototype.slice.call(arguments,0);return u.forEach(function(n){t.load(n)}),t.executeQueryAsync(function(){n.resolve()},function(t,i){n.reject(i)}),n.promise()},getIconUrl:function(n){var t=this.serverUrl+"/_layouts/15/images/ic";return n==="html"&&(n="htm"),p[n]?t+n+".gif":w[n]?t+n+".png":t+"gen.gif"}})}(),function(){function u(n){var t=i(n);return t.filter(":visible").length>0&&t.parents().addBack().filter(function(){return i(this).css("visibility")==="hidden"}).length<=0}function f(){var n=this,s=parseInt(i.attr(n,ti),10),t=!isNaN(s),r=n.nodeName.toLowerCase(),f,e,o;return t&&s<0?!1:r==="area"?(f=n.parentNode,e=f.name,!n.href||!e||f.nodeName.toLowerCase()!=="map")?!1:(o=i("img[usemap=#"+e+"]")[0],!!o&&u(o)):(/input|select|textarea|button|object/.test(r)?!n.disabled:r==="a"?!!n.href||t:t)&&u(n)}function t(n,t,i){this._element=n,this._trueClassName=t,this._falseClassName=i}var r=Array.prototype.slice,n=/\s+/;lt=function(t,r,u,f){var s,h,l,y,c,e,p,a,o,v;for(r?(s=!u?null:u.split(n),h=!f?null:f.split(n)):(h=!u?null:u.split(n),s=!f?null:f.split(n)),l=0,y=t.length;l<y;l++)if(c=t[l],c.nodeType===1)if(e=c.className,e||!s||s.length!==1){if(a=!1,e=(" "+e+" ").replace(n," "),s)for(o=0,v=s.length;o<v;o++)s[o]&&e.indexOf(" "+s[o]+" ")<0&&(e+=s[o]+" ",a=!0);if(h){for(p=e.length,o=0,v=h.length;o<v;o++)h[o]&&(e=e.replace(" "+h[o]+" "," "));e.length<p&&(a=!0)}a&&(c.className=i.trim(e))}else c.className=s[0]},wy=function(n){n.addClass(r.call(arguments,1).join(" "))},no=function(n){n.removeClass(r.call(arguments,1).join(" "))},gs=function(n){var t=document.createElement("div");return t.innerHTML=n,t.firstChild},to=function(n,t){n.empty(),t&&n[0].appendChild(document.createTextNode(t))},io=function(n){n.keydown(function(n){var t=i.mobile.keyCode,r=n.which;if(r===t.ENTER||r===t.SPACE)return i(n.target).trigger("vclick"),!1})},ro=function(n){var t=n[0];(n.focus(),t._keyDownEventHooked)||(n.keydown(function(r){if(r.keyCode===i.mobile.keyCode.TAB){var u=r.target,e=r.shiftKey,o=i("*",n).filter(f),s=o.first(),h=o.last();return(u===s[0]||u===t)&&e?(h.focus(),!1):(u===h[0]||u===t)&&!e?(s.focus(),!1):void 0}}),t._keyDownEventHooked=!0)},yf=function(n,t){i(t,n).first().attr(ti,"0"),n.keydown(function(r){var e=i.mobile.keyCode,o=r.which;if(o===e.LEFT||o===e.RIGHT){var s=i(t,n),f=i(t+":focus",n),u=s.index(f),h=s.length-1;o===e.LEFT?u-=1:u+=1,u<0?u=h:u>h&&(u=0),f.attr(ti,"-1"),f=i(s[u]),f.attr(ti,"0"),f.focus(),r.stopPropagation(),r.preventDefault()}})},nh=function(n,t,r){var u=i(t,n),e=u.index(r)>=0,f;e?f=u.length===1:r.attr(ti)==="0"&&(r.attr(ti,"-1"),f=!0),f&&u.first().attr(ti,"0")},th=function(n,t){t>0&&t!==n.scrollTop()&&du(wl,function(){n.scrollTop(t)})},e("ui.helpers","ObservableCssClass",t,null,{value:h(null,function(){function n(n,t){return n===null||n===t}var t=i(this._element),r=!!this._trueClassName&&t.hasClass(this._trueClassName),u=!!this._falseClassName&&t.hasClass(this._falseClassName);return n(r,!0)&&n(u,!1)?!0:n(r,!1)&&n(u,!0)?!1:null},function(n){var t=this,r=i(t._element),u=t._trueClassName,f=t._falseClassName,e=t.onvaluechange;u&&lt(r,n,u),f&&lt(r,!n,f),!u&&!f||!e||e(r)})}),e("ui.helpers","ObservableVisibility",function(n){t.call(this,n,null,"msls-collapsed")},t,{})}(),rr="LayoutUpdating",ui="LayoutUpdated",function(){function k(){var n=l,o=u,t=r,f=a,e;g(!0),o?(e=i(w),y(e,!1,f)):!t||y(t,!1,f),!n||y(n,!0,!0)}function d(){function n(){if(h){h=!1,t=ri(n,1);return}k()}if(t!==null){h=!0;return}c>0||(t=ri(n,1))}function g(n){t!==null&&(so(t),t=null),h=!1,n&&(l=null),r=null,u=!1,a=!1}function nt(n){return n.length===1&&(n.hasClass("ui-page")||n.hasClass("msls-tab-content"))}function ht(n){return nt(n)&&n.data("lastWindowWidth")===f&&n.data("lastWindowHeight")===e}function ct(n){if(nt(n)&&(n.data("lastWindowWidth",f),n.data("lastWindowHeight",e),n.hasClass("ui-page"))){var t=n.find(".msls-tab-content.msls-tab-content-active");t.data("lastWindowWidth",f),t.data("lastWindowHeight",e)}}function y(n,t,i){if(!(c>0)&&!v){if(ht(n)){if(!i)return}else ct(n);try{v=!0,o(s.layoutStart),st(rr,n),n=n.filter(":visible"),at(n,t);var u=yt(n,t),r=tt(u);rt(r),t||b===0||rt(r),o(s.layoutEnd),st(ui,n),o(s.layoutEndNotified)}finally{v=!1}}}function tt(n){for(var c=[],e=[],i=[],l=[],u,r,o,s,h,f=n.length,t=0;t<f;t++)n[t].msls_layout_index=t+1,c[t]=-1,e[t]=0;for(t=f-1;t>=0;t--){for(u=n[t].parentNode;u;){if(r=u.msls_layout_index,r){c[t]=--r,e[r]++;break}u=u.parentNode}n[t].msls_layout_index=0}for(h=f,o=0,t=f-1;t>=0;t--)e[t]===0&&(i.push(t),h--);while(h>0){if(s=i.length,s===o)break;for(i.push(-1),t=o;t<s;t++)r=c[i[t]],r>=0&&--e[r]==0&&(i.push(r),h--);o=s+1}for(t=i.length-1;t>=0;t--)l.push(i[t]>=0?n[i[t]]:null);return l.push(null),l}function it(n){for(var t=0;t<n.length;t++)n[t].call()}function at(n,t){var r=n.filter(".msls-vstretch").add(i(".msls-vstretch",n)),f,u;t||(r=r.not(".msls-layout-ignore-children .msls-vstretch, .msls-columns-layout > .msls-vstretch")),r=r.filter(":visible"),i.each(r,function(){i(this.parentNode).data("msls-rows-updated",!1)}),f=tt(r),u=[],f.forEach(function(n){var t,r,o,s,f,e;if(!n){it(u),u=[];return}(t=n.parentNode,r=0,i(t).data("msls-rows-updated"))||(i.each(dt(t),function(){r+=gt(this)}),f=0,o=ni(t),s=o-r,e=i(t).children(".msls-vstretch").filter(":visible"),i.each(e,function(){f+=p(this)}),vt(t,e,s,f,u),i(t).data("msls-rows-updated",!0))})}function vt(t,r,u,f,e){i.each(r,function(){var v=this,g=i(this),y,w,r,d,o,b,s,h,c,l,k,a;y=i(t).hasClass("msls-columns-layout")||t.tagName==="BODY",w=p(this),r=n.getComputedStyle(this),d=parseFloat(r.minHeight),o=u*(y?1:w/f),b=parseFloat(r.marginTop)+parseFloat(r.marginBottom),s=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),h=parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),o-=b,o<0&&(o=0),o<s+h&&(o=s+h),c=et(r),l=c==="content-box",k=c==="padding-box",o-=(k||l?parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth):0)+(l?parseFloat(r.paddingTop)+parseFloat(r.paddingBottom):0),o=Math.floor(o),a=o+"px",v.style.height!==a&&e.push(function(){v.style.height=a})})}function yt(n,t){var r=n.filter(".msls-columns-layout:not(.msls-static-layout)").add(i(".msls-columns-layout:not(.msls-static-layout)",n)),u=[];return t||(r=r.not(".msls-layout-ignore-children .msls-columns-layout")),r=r.filter(":visible"),i.each(r,function(){var n=i(this);(!!n.children(".msls-hstretch").length||n.hasClass("msls-dynamic-padding"))&&u.push(this)}),i(u)}function rt(n){var t=[];n.forEach(function(n){if(!n){it(t),t=[];return}var u=i(n),r=ut(n);pt(n,r,t)})}function pt(t,r,u){var a=0,e,f,v=0,o,s,l=[],c,y,h=!1,w=t.children;w.length!==0&&(i.each(w,function(){var n=i(this);n.hasClass("msls-hauto")?(f=ih(this),a+=f,l.push({element:this,isAuto:!0,requiredWidth:f})):n.hasClass("msls-hstretch")&&(e=p(this),v+=e,l.push({element:this,isAuto:!1,weight:e}),h=!0)}),h&&(o=r-a,o=o>0?o:0,c=[],h=!1,s=i(t).hasClass("msls-overflow-columns"),i.each(l,function(){var r=this.element,y=i(r);if(r.offsetWidth!==0||r.offsetHeight!==0){var u=n.getComputedStyle(r),a=parseFloat(u.marginLeft)+parseFloat(u.marginRight),l=0;this.isAuto?f=this.requiredWidth:(e=this.weight,f=o*(e/v),l=parseFloat(u.minWidth),s&&f<l&&(f=l),h=!0),this.totalWidth=Math.floor(f+a),c.push(this)}}),h&&(s?(y=wt(c,r),i.each(y,function(){bt(this,r,s,u)})):i.each(c,function(){this.isAuto||ft(this.element,this.totalWidth,s,u)}))),i(t).hasClass("msls-dynamic-padding")&&kt(t,u))}function wt(n,t){for(var i=0,o=0,f,e=[],r,u;i<n.length;){f=t,r=[];do if(u=n[i],r.length===0||u.totalWidth<=f)r.push(u),f-=u.totalWidth,i++;else break;while(i<n.length);e.push(r),o++}return e}function bt(n,t,r,u){var o=[],e=0,s=0,h=0,f=0;i.each(n,function(t){var c=t===0,f=t===n.length-1,r=i(this.element.nextSibling);this.isAuto?e+=this.totalWidth:(s+=this.totalWidth,o.push(this),h+=this.weight),r.hasClass("msls-hempty")&&u.push(function(){lt(r,f,"msls-clear")})}),f=t-e-s,i.each(o,function(){var o=(t-e)*(this.weight/h),n=o-this.totalWidth,i=this.totalWidth;n=n>f?f:n,n>0&&(i+=n,f-=n),ft(this.element,i,r,u)})}function kt(n,t){var f=[],e=-1,r=[],u=!1;(i(n).children(":visible").each(function(){var n=i(this);(n.hasClass("msls-hauto")||n.hasClass("msls-hstretch"))&&r.push({element:this,offsetTop:this.offsetTop,rowIndex:0,addClassString:"",removeClassString:""})}),r.length!==0)&&(u=r[0].offsetTop!==r[r.length-1].offsetTop,i.each(r,function(){u?this.addClassString+=" msls-overflow":this.removeClassString+=" msls-overflow"}),t.push(function(){i.each(r,function(){lt(i(this.element),!0,this.addClassString,this.removeClassString)})}))}function dt(n){var t=i(n);return t.hasClass("msls-columns-layout")?[]:t.children(".msls-vauto")}function p(n){var t,r=i(n).attr("data-msls-weight");return t=r?parseFloat(r):1}function gt(t){var r=0,i=0,u=n.getComputedStyle(t),f=parseFloat(u.height);return r=t.offsetHeight+(isNaN(f)?0:f-Math.round(f)),i=parseFloat(u.marginTop)+parseFloat(u.marginBottom),!isNaN(i)&&i>0&&(r+=i),Math.ceil(r)}function ut(t){var i=0,r=n.getComputedStyle(t),u=parseFloat(r.width);return i=t.clientWidth+(isNaN(u)?0:u-Math.round(u)),i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i=isNaN(i)?0:i,Math.floor(i)}function ni(t){var i=0,r=n.getComputedStyle(t),u=parseFloat(r.height);return i=t.clientHeight+(isNaN(u)?0:u-Math.round(u)),i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),i=isNaN(i)?0:i,Math.floor(i)}function ft(t,i,r,u){var f=n.getComputedStyle(t),e=i,c=parseFloat(f.minWidth),s=et(f),h=s==="content-box",l=s==="padding-box",o;e-=parseFloat(f.marginLeft)+parseFloat(f.marginRight)+(l||h?parseFloat(f.borderLeftWidth)+parseFloat(f.borderRightWidth):0)+(h?parseFloat(f.paddingLeft)+parseFloat(f.paddingRight):0),e=Math.floor(e),o=e+"px",t.style.width!==o&&u.push(function(){t.style.width=o}),!r&&c>e&&t.style.minWidth!==o&&u.push(function(){t.style.minWidth=o})}function et(n){return n.boxSizing||n.MozBoxSizing||n.webkitBoxSizing}function ti(n){for(var t=n,f,r,u;!!t&&(!r||!u);)t.tagName==="LI"?r=u=t:(f=(" "+t.className+" ").replace(/\s+/," "),!r&&(f.indexOf(" msls-vstretch ")>=0||f.indexOf(" msls-fixed-height ")>=0)&&(r=t,u=u&&t),!u&&(f.indexOf(" msls-hstretch ")>=0||f.indexOf(" msls-fixed-width ")>=0)&&(u=t,r=r&&t)),t=t.parentNode;return(t=u||r,!t)?null:i(t)}function ii(){var t=i("body"),n=i('<div style="height: 100px; width: 100px; visibility: hidden" class="msls-vscroll msls-hscroll"><\/div>').appendTo(t),r=i('<div style="height: 200px; width: 200px;"><\/div>').appendTo(n);rh=b=n[0].offsetHeight-n[0].clientHeight,ot=n[0].offsetWidth-n[0].clientWidth,n.remove()}var fi=[],ei=0,t=null,c=0,l=null,r=null,u=!1,a=!1,v=!1,w="body > div:not(.msls-layout-ignore):not(.ui-loader)",f=-1,e=-1,b=0,ot=0,h;lr=function(n){c++,n?t!==null&&(so(t),t=null):g()},ki=function(n){n=typeof n=="boolean"?n:!0,c--,n&&d()},nv=function(n,t){r=n?n:i(w),a=!t,k()},h=!1,ir=function(n,t){v||(n?n.first().closest(".msls-layout-ignore-children").length?(l=l?l.add(n):n,o(s.layoutPartialRequest)):u||(r?n.filter(r).length!==n.length&&(u=!0,a=!0,o(s.layoutFullRequest)):(r=n,o(s.layoutPartialRequest))):u||c!==0||(u=!0,o(s.layoutFullRequest)),t||(a=!0),h=!1,d())},ih=function(t){var r=0,i=0,u=n.getComputedStyle(t),f=parseFloat(u.width);return r=t.offsetWidth+(isNaN(f)?0:f-Math.round(f)),i=parseFloat(u.marginLeft)+parseFloat(u.marginRight),!isNaN(i)&&i>0&&(r+=i),Math.ceil(r)},tv=ut,i(function(){var t=i(n);f=t.width(),e=t.height(),n.addEventListener("resize",function(){var n=t.width(),i=t.height();(n!==f||i!==e)&&(f=n,e=i,ir())},!1)}),i(document).ready(function(){ii();i("body").on("updatelayout",function(n){if(!n.target||n.target.tagName!=="UL"){var t=ti(n.target);t&&ir(t)}})})}(),function(){function c(n,i){var o=n.constructor,r=this,e={},f,s=r.onChanged,h=r.needPropertyEvents,c=r.contentItemProperty;h&&(tu(o),e[i+"_"+gu]=er(!0)),f="__"+i,r.initialValue!==t&&(e[f]={enumerable:!di,value:r.initialValue}),e[i]=l(function(){return this[f]},function(n){if(this[f]!==n&&(u(this,f,n),s&&s.call(this,n),h)){var t=this;t.dispatchChange(i)}}),g(o,e)}function v(n){var t=this;t.children=[],n&&n.length||(t._view=i("<div />")),t._view=n}function p(){var n=this,t=n._tapElement;n._isViewCreated&&!!n.tap&&(t||(t=n.getView()),uo(t,n,"tap","ButtonClickPromise"),t.addClass("msls-tap"),io(t))}function b(){var n=this,f=n.children,u,t,e,r=n.data;for(!!r&&i.isFunction(r._customViewDisposeHandler)&&(r._customViewDisposeHandler(),r._customViewDisposeHandler=null),n.children=null,t=0,e=f.length;t<e;t++)u=f[t],u._parent=null,y(u);n.parent=null,n.__tap=null,n.__data=null}function k(){return this._view}function d(n){this._isViewCreated||(this._isViewCreated=!0,this._attachViewCore(n),this.isRendered=!0)}function tt(){if(!this._isViewCreated){var i=this.constructor,n={},t=i._fillTemplate;t&&t(this.getView(),this.data,n),this.attachView(n)}}function it(){}function ut(){this._registerTapAction()}var ft=0,f="clickActionExecuted",n;w=function(n,t,i){return{onChanged:n,initialValue:t,needPropertyEvents:i,defineOn:c}},e("ui","Control",v,null,{controlName:"Undefined",data:w(function(n){this._onDataChanged&&this._onDataChanged(n)},null),isRendered:h(!1),tap:w(function(){this._isViewCreated&&this._registerTapAction()}),parent:l(function(){return this._parent},function(n){var t;this._parent!==n&&(!this._parent||!this._parent.children||(t=this._parent.children.indexOf(this),t>=0&&this._parent.children.splice(t,1)),this._parent=n,!n||this._parent.children.push(this))}),_onDispose:b,getView:k,attachView:d,render:tt,_attachViewCore:ut,_registerTapAction:p},{_fillTemplate:it,_skipEnhance:!1}),a=r.ui.Control,a.prototype._propertyMappings={},a.prototype._editableProperties={},nt=function(n,t){for(var r=n[0],i=t[0],u=[],e=[],f;i!==r&&!!i;)u.push(i),i=i.parentNode;if(!!i)while(u.length>0){for(i=u.pop(),r=r.firstChild,f=0;r!==i;)r=r.nextSibling,f++;e.push(f)}return e},rt=function(n,r,u){if(!r||!r.length)return r===t&&!!u?fi(n,u):n;for(var s=r.length,o,f=n[0],e=0;e<s&&!!f;e++)for(o=r[e],f=f.firstChild;o>0&&!!f;)f=f.nextSibling,o--;return i(f)},fi=function(n,t){return n.is(t)?n:n.find(t)},n={a:null,input:null,textarea:null},uo=function(t,i,r,u,e){t.off("touchend").on("touchend",function(){});t.off("vclick").on("vclick",function(t){var c,h,l,a,v,y,p;o(s.userTap),c=[],h=i;do c.push(h),h=h.parent;while(h);do if(h=c.pop(),h._onBeforeTap&&h._onBeforeTap(t)===!1)return;while(c.length);l=i[r],!!l&&l.canExecute&&(a=t.target,v=a.tagName.toLowerCase(),e&&!e(t)||v in n&&(v!=="a"||a.href)||(y=i.data,p=y.isEnabled===!1,p||(o(s.executeActionStart),i.getView().addClass(ua),st(u,l.execute({originalEvent:t})._thenEx(function(n,t){st(f,{control:i,result:t,error:n}),!n||os(n),i.getView().removeClass(ua),o(s.executeActionEnd)})))),!t.originalEvent||t.originalEvent.type==="click"||t.preventDefault(),t.stopPropagation())})},at("ui",{Orientation:{horizontal:"horizontal",vertical:"vertical"}})}(),function(){var u=r.ui.Control.prototype._attachViewCore,o=ut("Icon","RootCommand"),s=r.ui.Orientation,t;(function(){function n(n){var t=this;a.call(t,n)}function t(n){this._isViewCreated&&(to(this._textElement,this.text),n&&this._textElement.trigger("updatelayout"))}function f(n,t,r){i('<div class="msls-text"><span class="id-element"><\/span><\/div>').appendTo(n),r.idElement=nt(n,fi(n,".id-element"))}function o(n){u.call(this,n),this._textElement=rt(this.getView(),n.idElement,".id-element"),this._refreshView()}e("ui.controls","Text",n,a,{controlName:"Text",text:w(function(){this._refreshView(!0)},null,!0),_attachViewCore:o,_refreshView:t},{_fillTemplate:f,_skipEnhance:!0}),r.ui.controls.Text.prototype._propertyMappings={stringValue:"text",properties:{tap:"tap"}}})(),function(){function t(n){var t=this;a.call(t,n),t._updatingText=!1}function r(n,t,r){var u=i('<input type="text" class="id-element" data-mini="true"><\/input>').appendTo(n);t.maxLength&&fo(u,t.maxLength),r.idElement=nt(n,u)}function f(n){function r(){t._updatingText=!0,t.text=t._textElement.val(),t._updatingText=!1}var t=this;t._textElement=rt(t.getView(),n.idElement,".id-element"),t.placeholderText&&t._textElement.attr("placeholder",t.placeholderText),u.call(t,n),t._textElement.keydown(function(n){n.keyCode===i.mobile.keyCode.ENTER&&r()}),t._textElement.change(r),t._refreshView()}function o(){this._isViewCreated&&(this._updatingText&&this._textElement.val()===this.text||this._textElement.val(this.text))}function s(){this._refreshView()}function h(n){if(n.state===k.disabled){var t=this._textElement;this._isViewCreated&&!!t&&(t.data("mobile-textinput")?t.textinput(n.activate?"disable":"enable"):n.activate?t.attr("disabled","disabled"):t.attr("disabled","")),n.custom=!0}}fo=function(n,t){t?n.attr("maxlength",t.toString()):n.attr("maxlength")&&n.removeAttr("maxlength")};var n=e("ui.controls","TextBox",t,a,{controlName:"TextBox",text:w(function(){this._onTextChanged()},null,!0),placeholderText:w(),_attachViewCore:f,_refreshView:o,_customVisualStateHandler:h,_onTextChanged:s},{_fillTemplate:r,_isFormElement:!0});n.prototype._propertyMappings={stringValue:"text",properties:{placeholderText:"placeholderText"}},n.prototype._editableProperties={text:"stringValue"}}(),function(){function u(t){n.call(this,t)}function f(n,t,r){i('<textarea class="id-element" data-mini="true"><\/textarea>').appendTo(n),r.idElement=nt(n,fi(n,".id-element"))}function o(n){t.call(this,n);var i=this._textElement;ah(rr,this,function(){i.keyup()})}var n=r.ui.controls.TextBox,t=n.prototype._attachViewCore;e("ui.controls","TextArea",u,n,{controlName:"TextArea",_attachViewCore:o,_onDispose:function(){this._textElement.remove()}},{_fillTemplate:f,_isFormElement:!0}),r.ui.controls.TextArea.prototype._propertyMappings={stringValue:"text",properties:{placeholderText:"placeholderText"}}}(),function(){function n(n){a.call(this,n)}function t(n,t,r){var u=i('<a tabIndex="0" class="id-element" data-role="button" data-mini="true" data-theme="'+li+'"/>').appendTo(n);r.idElement=nt(n,u)}function f(n){var t=this.getView();this._element=rt(t,n.idElement,".id-element"),u.call(this,n),this._refreshView()}function o(){var n=this;n._isViewCreated&&(n._element.text(n.content),n._element.data("mobile-button")&&n._element.trigger("refresh"),n._initialized=!0)}function s(){var t=this._element;t&&t.hasClass(pe)&&t.removeClass("ui-btn-hover-a")}e("ui.controls","Button",n,a,{controlName:"Button",content:w(function(){this._refreshView()}),_attachViewCore:f,_refreshView:o,_customVisualStateHandler:s},{_fillTemplate:t}),r.ui.controls.Button.prototype._propertyMappings={displayName:"content",properties:{tap:"tap",hiddenIfDisabled:"hiddenIfDisabled"}}}(),t=r.ui.controls.Button,function(){function n(n){t.call(this,n)}function r(n,t,r){var u=i('<a tabIndex="-1" class="id-element" data-role="button" data-mini="true" data-theme="'+li+'"/>').appendTo(n);r.idElement=nt(n,u)}e("ui.controls","NegativeTabIndexButton",n,t,{controlName:"NegativeTabIndexButton"},{_fillTemplate:r})}(),function(){function n(n){t.call(this,n)}function r(n,t,r){var u=i('<div class="id-element msls-large-icon" tabIndex="-1" data-iconpos="top" data-role="button" data-theme="'+li+'" data-corners="false" data-mini="true"><\/div>'),f=t.properties[o];u.attr("data-icon",f||"msls-star"),u.appendTo(n),r.idElement=nt(n,u)}e("ui.controls","CommandBarButton",n,t,{controlName:"CommandBarButton"},{_fillTemplate:r}).prototype._propertyMappings={displayName:"content",properties:{icon:"icon",tap:"tap",hiddenIfDisabled:"hiddenIfDisabled"}}}(),function(){function n(n){t.call(this,n)}function r(n,t,r){var u=i('<a class="id-element" data-role="button" data-mini="true" data-theme="'+li+'"/>').appendTo(n);r.idElement=nt(n,u)}function u(){if(t.prototype._refreshView.call(this),this._isViewCreated){var n=this._element.closest(".subControl");lt(n,!this.isEnabled,pe),lt(n,!this.isVisible,wt)}}e("ui.controls","ShellButton",n,t,{controlName:"ShellButton",_refreshView:u,isEnabled:w(function(){this._refreshView()},!1),isVisible:w(function(){this._refreshView()},!0),tap:h()},{_fillTemplate:r}).prototype._propertyMappings={displayName:"content"}}(),function(){function f(n){var t=this;a.call(t,n),t._updatingDropdown=!1}function o(){!this._updatingDropdown&&this._isViewCreated&&(n(this),t(this))}function n(n){var r=n._dropdownElement,t;!n._updatingDropdown&&n._isViewCreated&&n.choiceList&&(r.empty(),i.each(n.choiceList,function(){t=i("<option><\/option>"),t.attr("value",this.stringValue),t.text(this.stringValue),r.append(t)}))}function t(n){var f=n._dropdownElement,r,t,u=!0;if(!n._updatingDropdown&&n._isViewCreated){t=n.selectedValue,t===null&&(t=""),i.each(n.choiceList,function(){return this.stringValue===t&&(u=!1),u}),u&&(r=i('<option disabled="disabled"><\/option>'),r.attr("value",t),r.text(t),f.append(r));try{n._updatingDropdown=!0,n._dropdownElement.val(t),n._dropdownElement.change()}finally{n._updatingDropdown=!1}}}function s(n,t,r){var u=i('<select class="id-element" data-mini="true"/>').appendTo(n);r.idElement=nt(n,u)}function h(n){var t=this,i;t._dropdownElement=rt(t.getView(),n.idElement,".id-element"),u.call(t),t._dropdownElement.change(function(){if(!t._updatingDropdown){i=t._dropdownElement.val(),i===""&&(i=null);try{t._updatingDropdown=!0,t.selectedValue=i}finally{t._updatingDropdown=!1}}}),t._refreshView()}function c(n){if(n.state===k.disabled||n.state===k.readOnly){var t=this._dropdownElement;this._isViewCreated&&!!t&&(t.data("mobile-selectmenu")?t.selectmenu(n.activate?"disable":"enable"):n.activate?this._dropdownElement.attr("disabled","disabled"):this._dropdownElement.attr("disabled","")),n.custom=!0}}var r=e("ui.controls","Dropdown",f,a,{controlName:"Dropdown",selectedValue:w(function(){t(this)},null,!0),choiceList:w(function(){n(this)}),_attachViewCore:h,_refreshView:o,_customVisualStateHandler:c},{_fillTemplate:s,_isFormElement:!0});r.prototype._propertyMappings={stringValue:"selectedValue",choiceList:"choiceList"},r.prototype._editableProperties={selectedValue:"stringValue"}}(),function(){function s(n){var t=this;u.call(t,n)}function c(n,t,r){i('<div class="msls-text '+(t.heightSizingMode!==tr.fitToContent?"msls-vstretch ":"")+'"><p class="id-element"><\/p><\/div>').appendTo(n),r.idElement=nt(n,fi(n,".id-element"))}function l(n){var i=this,r=i.data;u.prototype._refreshView.call(i,n),this._isViewCreated&&r._isUnderList&&!this._needLayoutText&&r.heightSizingMode!==tr.fitToContent&&(this._needLayoutText=!0,t.length===0&&vt(ui,f),t.push(this))}function a(){if(this._needLayoutText){var n=t.indexOf(this);n>=0&&(t.length===1?(t=[],si(ui,f)):t.splice(n,1))}}function v(t){var s=t.text,h=t._textElement,y=h[0],i,r,c,l,p=0,k,w,b,e,u,a,v=0,o,f,d;return s?(i=h.parent(),r=i[0].clientHeight,c=i[0].clientWidth,r===0||c===0)?null:i.data("msls-last-height")===r&&i.data("msls-last-width")===c?null:(i.data("msls-last-height",r),i.data("msls-last-width",c),w=n.getComputedStyle(i[0]),e=parseFloat(w.paddingTop)+parseFloat(w.paddingBottom),e=isNaN(e)?0:e,r=Math.floor(r-e),b=n.getComputedStyle(y),u=parseFloat(b.marginTop)+parseFloat(b.marginBottom),u=isNaN(u)?0:u,a=Math.ceil(y.offsetHeight+u),k=s.length,o=k-1,l=r-a,l<0)?{applyChange:function(){v<o?(f=v+o>>1,to(h,s.substr(0,f+1)+"...")):f!==p&&(d=s.substr(0,p+1),to(h,d+"..."))},needContinue:function(){return v<o?(a=Math.ceil(y.offsetHeight+u),l=r-a,l<0?o=f-1:(v=f+1,p=f),!0):!1}}:null:null}var u=r.ui.controls.Text,t=[],f,o;f=function(){for(var i,r=[],f,n=0,u=t.length;n<u;n++)i=v(t[n]),i&&r.push(i);while((u=r.length)>0){for(n=0;n<u;n++)r[n].applyChange();for(f=[],n=0;n<u;n++)i=r[n],i.needContinue()&&f.push(i);r=f}},o=e("ui.controls","Paragraph",s,u,{controlName:"Paragraph",lines:h(),_refreshView:l,_onDispose:a},{_fillTemplate:c,_skipEnhance:!0}),o.prototype._propertyMappings={stringValue:"text",properties:{tap:"tap"}}}(),function(){function n(n){a.call(this,n)}function t(){var t;if(u.call(this),t=this.data,t){var e=t.screen.constructor,r=e[t.name+"_render"],o=this.getView();if(!!r&&i.isFunction(r))try{r.call(null,o[0],t)}catch(s){t.displayError=f("customControl_renderError_2args",t.name,s)}else t.displayError=f("customControl_noRender_1args",t.name)}}function r(n){var t="Custom",r=this.data,i=r.properties,u=n.state===k.disabled&&i.disabledRendering===t||n.state===k.readOnly&&i.readOnlyRendering===t||n.state===k.hasValidationError&&i.validationRendering===t;u&&(n.custom=!0)}e("ui.controls","CustomControl",n,a,{controlName:"CustomControl",_customVisualStateHandler:r,_attachViewCore:t}).prototype._propertyMappings={stringValue:"displayName",properties:{tap:"tap"}}}()}(),function(){function l(n){var t=this;t._subControls={},t._resources={},t.dataTemplate="<div/>",a.call(t,n)}function v(){this._refreshView()}function y(n){c.call(this,n),this._refreshView(),this._dataTemplateLoaded=!0}function p(){var n=this,t,r=[];n._isViewCreated&&(t=i(n.dataTemplate).appendTo(n.getView()),w(n,t,n._subControls,r,n._resources))}function w(n,t,e,s,h){function ft(n,t){t.bind(),s.push(t)}for(var y,c,rt,ut,k,nt,tt,it,p,et,a,d,ot,w,v,g=t.children(".resource"),l=0;l<g.length;l++)y=g[l],c=i(y),rt=c.attr("type"),ut=c.attr("name"),k=u(rt),!!k&&i.isFunction(k)&&(nt=new k,f(h,y,s,nt,!1)),h[ut]=nt;for(i.each(s,function(){this.bind()}),g.remove(),tt=t.find(".subControl"),l=0;l<tt.length;l++)y=tt[l],c=i(y),it=c.attr("control"),p=r.ui.controls[it],p||(p=u(it)),!!p&&i.isFunction(p)&&(a=new p(c),a.parent=n,d=c.attr("name"),d||(d=l.toString()),w=[],f(h,y,w,a,!1),v=b(w).first(function(n){return n.targetProperty==="data"&&n.bindingTarget===a}),v||(v=o(h,a,"data:{data, bindingMode=[msls.data.DataBindingMode.oneWayFromSource]}")),v&&(v.bindingSource=n,v.bind(),w.push(v)),e[d]=a,c.removeAttr("control"),c.attr("name")&&c.removeAttr("name"),i.each(w,ft),a.render())}function f(n,t,i,r,u){for(var e,s,c,l,h=[],f=0;f<t.attributes.length;f++)e=t.attributes[f],e.name.indexOf("data-ls-")===0&&(s=o(n,r,e.value),s&&i.push(s),u&&h.push(e.name));for(f=0;f<h.length;f++)t.removeAttribute(h[f])}function o(n,t,i){var u,o,p=/^([a-zA-Z_0-9]+):(\S+)$/,w=/^\{(\S*)\}$/,h,f,c,l=[],a,v,e,y;if(e=i.replace(/\s/,""),f=p.exec(e),f&&(v=f[1],e=f[2]),f=w.exec(e),f)for(o=f[1].split(","),h=o[0],u=1;u<o.length;u++)a=o[u].split("="),l.push({option:a[0],value:a[1]});if(h){for(c=new r.data.DataBinding(h,t,v,t),u=0;u<l.length;u++)y=l[u],c[y.option]=s(n,y.value);return c}return t[v]=s(n,e),null}function s(n,r){var f,o=/^\[(\S*)\]$/,e=o.exec(r);return e?(r=e[1],r.indexOf(t)===0?(f=r.substr(t.length),n[f]):r.indexOf("#")===0?i(r):u(r)):r}function u(t){if(!t)return null;for(var f,e=t.split("."),i=n,u=0;u<e.length;u++)if(f=e[u],i=u===0&&f==="msls"?r:i[f],!i)break;return i}var c=a.prototype._attachViewCore,t;e("ui.controls","ContentControl",l,a,{controlName:"ContentControl",dataTemplate:h(),_dataTemplateLoaded:h(!1),_attachViewCore:y,_refreshView:p,_onDataChanged:v},{_fillTemplate:a._fillTemplate}),t="resource:"}();var eo,uh=ut("Width"),ur,dr,iv={},pf={},wf;(function(){function gt(n){var t=this;t._currentVisualState=k.normal,a.call(t,n)}function ti(n){var t=this,i=t.data,u,f,r;t._container=t.getView(),t._contentContainer=rt(t._container,n.contentPath),t.isVisible=i.isVisible,n.labelPath&&n.control.idElement&&(r=i.screen.details._pageId+"-"+i.name,u=rt(t._contentContainer,n.control.idElement,".id-element"),u.attr("id",r),f=rt(t._container,n.labelPath),f.attr("for",r)),oi(t,n.control),a.prototype._attachViewCore.call(t,n),ot(this)}function ii(){var n=this.data;!n||(n._view=null)}function ri(n){var t=this,i=n;t._contentItemEventHandler&&(y(t._contentItemEventHandler),t._contentItemEventHandler=null),!i||(i._view=t,i.addEventListener&&(t._contentItemEventHandler=yu(i,"change",t,function(n){var f=n.detail,r,e,o,u,s=["_visualState","_alwaysShowValidationResults","validationResults","displayError"];s.indexOf(f)>=0&&ot(t),r=t.underlyingControl,!r||(e=r._propertyMappings,!e||(o=r._editableProperties||{},u=r._propertyMappings[f],!u||typeof u!="string"||u in o||(r[u]=i[f])))}))),ui(t)}function ui(n){n._isViewCreated&&n._container&&n.data&&(n._isViewCreated=!1,n.getView().empty(),n.render())}function fi(n){var r=dr(n),t;return!!r&&(t=pf[r],i.isFunction(t))?t._isFormElement:!1}function oi(n,t){var f=n.data,e=dr(f),u,r;!e||(u=iv[e],i.isFunction(u)&&(r=u(n._contentContainer,f,t),!!r&&i.isFunction(r.render)&&(r.parent=n,n.underlyingControl=r)))}function si(n,t,r){var p=[],e=eo(t),f=e===ei.none,c=e===ei.topAligned,a=e===ei.leftAligned,v=e===ei.rightAligned,o=e===ei.hidden,u,s,y=dr(t),h=!t._isUnderList&&!!y&&fi(t),l;return f&&!h?n:(u="<div class='"+af+(c?" msls-label-align-top msls-clear msls-vauto":"")+(a?" msls-label-align-left":"")+(v?" msls-label-align-right":"")+(o?" msls-label-align-hidden":"")+(f?" msls-label-align-none":"")+"' >",h?((o||f)&&(u+='<div style="height:1px;'+(f?"width:0px;":"")+'">'),u+="<label>"+t.displayName+"<\/label>",(o||f)&&(u+="<\/div>")):u+=o?'<div style="height:1px;"><\/div>':"<label>"+t.displayName+"<\/label>",u+="<\/div>",u+='<div class="'+(c?" msls-clear":"")+'" />',n[0].innerHTML=u,s=i(n[0].lastChild),r.contentPath=nt(n,s),h&&(l=o||f?n[0].firstChild.firstChild.firstChild:n[0].firstChild.firstChild,r.labelPath=nt(n,i(l))),s)}function hi(n,t,i){var f=t.properties,s=f[st],h=f[ht],e=f[ct],c=f[at],a=!t._isVStretch&&t.heightSizingMode===tr.fixedSize,v=!t._isHStretch&&t.widthSizingMode===ci.fixedSize,y=f[vt],p=f[uh],l=f[yt],w=t._isHStretch,b=t._isVStretch,u=[],r=[],o;r.push(ov),l&&r.push("msls-font-style-"+l.toLowerCase()),u.push("msls-ctl-"+bh(dr(t))),a?(i.height(y),r.push("msls-fixed-height")):(s&&i.css("min-height",s+"px"),h&&i.css("max-height",h+"px")),v?(i.width(p),r.push("msls-fixed-width")):(e&&(i.css("min-width",e+"px"),n.css("min-width",e+"px")),c&&i.css("max-width",c+"px")),r.push(t._isVStretch?"msls-vstretch":"msls-vauto"),u.push(t._isVStretch?"msls-vstretch":"msls-vauto"),u.push(t._isHStretch?"msls-hstretch":"msls-hauto"),t.properties[kt]&&u.push("msls-compact-padding"),ft(t)||u.push("msls-leaf"),o=t.properties[bt],o==="Right"?r.push("msls-text-align-right"):o==="Center"&&r.push("msls-text-align-center"),b&&r.push("msls-vscroll"),t.kind===et.value&&u.push("msls-redraw"),w&&r.push("msls-hscroll"),u.length>0&&n.addClass(u.join(" ")),r.length>0&&i.addClass(r.join(" "))}function tt(n,t){var r=0;return i.each(n.children,function(){var u,f=i(this),n=i(this.firstChild);n.length===1&&n.hasClass(af)&&!f.hasClass("msls-collapsed")&&(n.hasClass("msls-label-align-left")||n.hasClass("msls-label-align-right")||n.hasClass("msls-label-align-hidden"))&&(u=n[0].offsetWidth+1,u>r&&(r=u),t.push(n[0]))}),r}function li(n,t){if(!n)throw f("render_invalid_arg_element");if(!t)throw f("render_invalid_arg_contentItem");var u=new r.ui.controls.ContentItemPresenter(i(n));u.data=t,u.render()}function ai(n){return" "+n+" "}function it(n,t){var f=n.getView(),u=n._contentContainer,r=u.children().filter("."+vv);return r.length>0?t?r:(r.remove(),null):t?r=i("<div class='msls-state-overlay'><\/div>").appendTo(u):null}function vi(n,t){function u(n){var e;i=t(n),i&&r.push(i);for(var f=0,o=n.childNodes,s=o.length;f<s;f++)e=o[f],ai(e.className).match(/ msls-presenter /)||u(e)}var r=[],i;return n.length&&u(n[0]),r}function c(n,t){return vi(n,function(n){var i=n.tagName;return i&&t.indexOf(i.toLowerCase())>=0?n:null})}function yi(n,t,r){function f(n){var u=i.attr(n,t);i.data(n,w+t,u),i.attr(n,t,r)}if(n.length===1)f(n[0]);else for(var u=0,e=n.length;u<e;u++)f(n[u])}function pi(n,r){function f(n){var u=w+r,f=i.data(n,u);f===t?n.removeAttribute(r):n.setAttribute(r,f),i.removeData(n,u)}if(n.length===1)f(n[0]);else for(var u=0,e=n.length;u<e;u++)f(n[u])}function u(n,t,i,r){t?yi(n,i,r):pi(n,i)}function l(n){function t(n){if(n.id===":RootCustomControl")return!0;var i=n.baseControl;return i&&t(i)}var i=n.data;return i?t(i.controlModel):!1}function ft(n){var t=n.controlModel;return t?te(t):!1}function wi(n,t){var r=c(n,["a","area","button","input","object","select","textarea"]);u(i(r),t,dt,"-1")}function p(n,t){var i=it(n,t);return wi(n.getView(),t),i}function bi(n,t){var f=n.getView(),e=n.data,i,r,u;lt(f,t.activate,wt),e._isUnderList&&(u=f.parent(),u.hasClass("ui-li")&&lt(u,t.activate,wt)),t.activate||(r=eo(e),(r===ei.leftAligned||r===ei.rightAligned||r===ei.hidden)&&(i=n.parent||n,i=i.parent||i,wf(i.getView()))),t.needsLayoutUpdate=!0}function ki(n,t){var r,i,u;t.custom||(r=n.data,r.kind!==et.command)&&(i=t.activate,u=it(n,i),lt(n._contentContainer,i,wv))}function di(n,t){function c(n){var t=Array.prototype.slice.call(n||[],0),i=t.map(function(n){return n.message});return i.join("<br/>")}var u=n.data,o,r,h,s,f,e;t.custom||ce(u)||(o=u._alwaysShowValidationResults&&t.activate,lt(n._contentContainer,o,bv),r=n._container.children("."+ea),o?(h=c(u.validationResults),r.length||(s="",f=n._container.children("."+af),!f||!f.length||(e=eo(u),(e===ei.leftAligned||e===ei.rightAligned||e===ei.hidden)&&(s=" style='margin-left:"+ih(f[0]).toString()+"px'")),r=i("<div class='"+ea+" "+ve+"'"+s+"><\/div>").appendTo(n._container)),r.append(h),t.needsLayoutUpdate=!0):r.length&&(r.remove(),t.needsLayoutUpdate=!0))}function gi(n,t){var o=n.data,f=n.getView(),r=t.activate,e;if(t.custom){lt(f,r,pe);return}u(f,r,d,g),l(n)?p(n,r):(o.kind===et.command&&u(f.find("a, button"),r,d,g),e=c(f,["button","fieldset","input","optgroup","option","select","textarea"]),u(i(e),r,h,h)),lt(f,r,pe)}function nr(n,t){var a=n.getView(),f=n.data,e=f.kind,r=t.activate,o,s;if(!t.custom){switch(e){case et.group:case et.details:case et.value:break;default:return}if(l(n))p(n,r);else{if(ce(f)||ft(f))return;(e===et.value||e===et.details)&&(o=i(c(a,["input","textarea"])),s=i(c(a,["select","option"])),u(o,r,b,b),u(s,r,h,h),lt(o,r,ps),lt(s,r,ps))}lt(n._contentContainer,r,ps)}}function ir(n,t){var u=t.activate,s=p(n,u),f=n._contentContainer,r,e,o;lt(f,u,yv),r=n._contentContainer.children().filter("."+fa),u?(e=n.data,o=e.displayError,r.length||(r=i("<div class='"+fa+"'><\/div>").appendTo(f),s.append("<div class='"+pv+"'><\/div>")),r.text(o),t.needsLayoutUpdate=!0):r.length&&(r.remove(),t.needsLayoutUpdate=!0)}function ot(t){function v(n){switch(n){case k.loading:case k.hasDisplayError:case k.hasValidationError:return!0}return l(t)&&n===k.readOnly}var r=t.data,e,o;if(r){var u=t.underlyingControl,s=t._currentVisualState,i=r._visualState,h,c,f=u&&u._customVisualStateHandler,a;if(!r._isUnderList||!v(i)){if(s===i)switch(i){case k.normal:case k.disabled:case k.hidden:case k.loading:case k.readOnly:return}h=n[s],e={state:s,activate:!1,custom:!1,needsLayoutUpdate:!1},f&&f.call(u,e),h&&h(t,e),t._currentVisualState=i,c=n[i],o={state:i,activate:!0,custom:!1,needsLayoutUpdate:!1},f&&f.call(u,o),c&&c(t,o),a=e.needsLayoutUpdate||o.needsLayoutUpdate,a&&r._isActivated&&t.getView().trigger("updatelayout")}}}var w="msls-previous-",st=ut("MinHeight"),ht=ut("MaxHeight"),ct=ut("MinWidth"),at=ut("MaxWidth"),vt=ut("Height"),yt=ut("FontStyle"),pt=ut("AttachedLabelPosition"),bt=ut("TextAlignment"),kt=ut("CompactMargins","RootGroup"),dt="tabIndex",h="disabled",b="readonly",d="aria-disabled",g="true",n;ur=function(n,t,r){var u,f,e,o;n.addClass("msls-presenter"),u=si(n,t,r),hi(n,t,u),f=dr(t),!f||(e=pf[f],i.isFunction(e)&&(o=e._fillTemplate,!o||o(u,t,r.control={})))},dr=function(n){var t=n.controlModel;return!t?"NoControl":ni(t.id.replace(/\S*:/,""))},eo=function(n){var i=n.controlModel,t=n.properties[pt];return(!i||i.attachedLabelSupport!=="DisplayedByControl")&&t||(t=ei.none),t},wf=function(n){o(s.updateAttachedLabelsStart);for(var l="div.msls-label-host",u=n.find(l).filter(":visible").add(n.filter(l)),e,h,c,a,v,f,r,y=[],p=[],t=0;t<u.length;t++){if(e=u[t],h=e.parentNode,v=i(h).hasClass(av),f=[],r=tt(e,f),v)while(t<u.length-1)if(c=u[t+1],a=c.parentNode,a===h)r=Math.max(r,tt(c,f)),t++;else break;r>0&&(y.push(f),p.push(r))}i.each(y,function(n){var t=p[n]+"px";i.each(this,function(){var n=this.style;n.width!==t&&(n.width=t),n.minWidth!==t&&(n.minWidth=t)})}),o(s.updateAttachedLabelsEnd)},v("render",li),n={},n[k.disabled]=gi,n[k.hidden]=bi,n[k.hasValidationError]=di,n[k.hasDisplayError]=ir,n[k.loading]=ki,n[k.readOnly]=nr,e("ui.controls","ContentItemPresenter",gt,a,{controlName:"ContentItemPresenter",suppressLabel:!1,_attachViewCore:ti,_onDataChanged:ri,_onDispose:ii},{_fillTemplate:ur})})(),function(){function lt(n){var t=this;a.call(t,n)}function y(n,t,i,r,u,f,e){if(n>=100||n<0)return new Date(n,t,i,r,u,f,e);var o=new Date(0,0,0,0,0,0,0);return o.setFullYear(n),o.setMonth(t),o.setDate(i),o.setHours(r),o.setMinutes(u),o.setSeconds(f),o.setMilliseconds(e),o}function v(n,t){return y(n,t+1,0,0,0,0,0).getDate()}function at(n,t){return y(n,t,1,0,0,0,0).getDay()}function g(n,t){while(t>n.length)n="0"+n;return n}function p(n,t){return ot.format(y(t,0,1,0,0,0,0),"yyyy",n.culture)}function vt(n,t){return n.culture.calendars.standard.months.namesAbbr[t]}function tt(n,t){return n.culture.calendars.standard[t][0]}function yt(n,t){var i;switch(n.clock){case"TwelveHour":i=t%12,i===0&&(i=12);break;case"TwentyFourHour":i=t;break;default:i=t}return i.toString()}function it(n,t){return g(t.toString(),2)}function c(n,t){var i=document.createElement("option");return i.value=t,i.text=n,i}function u(n,t){var i=c(t,"");return n.insertBefore(i,n.firstChild),i}function o(n,t){if(n.selectedIndex>=0&&n[n.selectedIndex].value===t)return!1;for(var r=0,i=n.firstChild;i!==null;){if(i.tagName==="OPTION"){if(i.value===t)return n.selectedIndex=r,!0;r++}i=i.nextSibling}return!1}function pt(n){var r=n._yearDropdownElement[0],d=n.date,e=n._format,a=!n.date?null:d.getFullYear(),g=n.originalDate,nt=!n.originalDate?null:g.getFullYear(),y=[a,nt].sort(),w,h,t,s,l,b,k,v;for(r.selectedIndex>=0&&(b=r[r.selectedIndex].value),i(r).find("option."+oi).remove(),l=r.firstChild,e._isNullable&&(l=l.nextSibling),h=0;h<y.length;h++)t=y[h],t!==null&&t!==w&&(t<e.minimumYear?(s=c(p(e,t),t.toString()),s.className=oi,r.insertBefore(s,l)):t>e.maximumYear&&(s=c(p(e,t),t.toString()),s.className=oi,r.appendChild(s))),w=t;n.date||e._isNullable||(k=u(r,f("dateTimePicker_emptyYear")),k.className=oi),v=a!==null?a.toString():"",(o(r,v)||b!==v)&&n._yearDropdownElement.change()}function wt(n){var t=n._monthDropdownElement[0],l=n._format,s,h,r,c,e;t.selectedIndex>=0&&(s=t[t.selectedIndex].value),i(t).find("option."+oi).remove(),h=n.date,r=n.date?h.getMonth():null,n.date||l._isNullable||(c=u(t,f("dateTimePicker_emptyMonth")),c.className=oi),e=r!==null?r.toString():"",(o(t,e)||s!==e)&&n._monthDropdownElement.change()}function bt(n,t,i){var u,s=n._format,h=s.culture.calendars.standard,l=h.days,o=l.namesAbbr,r,e=d[t];if(!e)for(d[t]=e=document.createDocumentFragment(),r=1;r<=31;r++){var a=g(r.toString(),2),v=(t+r-1)%o.length,y=r.toString(),p=f("dateTimePicker_dayNumberAndDayPattern",a,o[v]);e.appendChild(c(p,y))}for(u=e.cloneNode(!0),r=31;r>i;r--)u.removeChild(u.lastChild);return u}function kt(n){var t=n._dayDropdownElement[0],c;i(t).empty();var r=n.date||new Date,l=n._format,e=r.getMonth(),s=r.getFullYear(),a=v(s,e),y=at(s,e),p=bt(n,y,a),h=n.date?n.date.getDate():null;t.appendChild(p),(!n.date||l._isNullable)&&u(t,f("dateTimePicker_emptyDay")),c=h!==null?h.toString():"",o(t,c),n._dayDropdownElement.change()}function dt(n){var h,e,c,r;if(n._hourPeriodDropdownElement){var t=n._hourPeriodDropdownElement[0],l=n._format,s,a=!t.firstChild;t.selectedIndex>=0&&(s=t[t.selectedIndex].value),i(t).find("option."+oi).remove(),h=n.date,e=n.date?h.getHours():null,n.date||l._isNullable||(c=u(t,f("dateTimePicker_emptyPeriod")),c.className=oi),r=e===null?"":e<12?"0":"12",(o(t,r)||s!==r)&&n._hourPeriodDropdownElement.change()}}function gt(n){var t=n._hourNumberDropdownElement[0],e=n._format,s,h,r,c;t.selectedIndex>=0&&(s=t[t.selectedIndex].value),i(t).find("option."+oi).remove(),h=n.date,r=n.date?(h.getHours()%e.totalHourNumbers).toString():"",n.date||e._isNullable||(c=u(t,f("dateTimePicker_emptyHour")),c.className=oi),(o(t,r)||s!==r)&&n._hourNumberDropdownElement.change()}function ni(n){var t=n._minuteDropdownElement[0],s=n._format,p=n.date,l=!p?null:p.getMinutes(),w=n.originalDate,g=!w?null:w.getMinutes(),b=[l,g].sort().reverse(),tt,rt,r,e,a,ut,k,v,d,nt=s._isNullable?1:0,h,y;for(t.selectedIndex>=0&&(d=t[t.selectedIndex].value),i(t).find("option."+oi).remove(),v=t.childNodes,h=0;h<b.length;h++)r=b[h],r!==null&&r!==k&&r%s.minuteIncrement>0&&(a=Math.floor(r/s.minuteIncrement)+1+nt,e=c(it(s,r),r.toString()),e.className=oi,a<v.length?t.insertBefore(e,v[a]):t.appendChild(e)),k=r;n.date||s._isNullable||(e=u(t,f("dateTimePicker_emptyMinute")),e.className=oi),y=l!==null?l.toString():"",(o(t,y)||y!==d)&&n._minuteDropdownElement.change()}function l(n){var t;return n.date?(t=new Date(n.date),t.setMilliseconds(n.date.getMilliseconds())):(t=new Date,n.timePickerEnabled?t.setSeconds(0,0):t.setHours(0,0,0,0)),t}function ti(n,t){if(t===null){n.date=null;return}var i=l(n),r=v(t,i.getMonth());r<i.getDate()&&i.setDate(r),i.setFullYear(t),n.date=i}function ii(n,t){if(t===null){n.date=null;return}var i=l(n),r=v(i.getFullYear(),i.getMonth());i.setDate(t),n.date=i}function ri(n,t){if(t===null){n.date=null;return}var i=l(n),r=v(i.getFullYear(),t);r<i.getDate()&&i.setDate(r),i.setMonth(t),n.date=i}function ut(n,t,i){t?i||(i=0):t=0;var r=l(n);r.setHours(t+i),n.date=r}function ui(n,t,i){if(i===null){n.date=null;return}ut(n,t,i)}function fi(n,t,i){if(t===null){n.date=null;return}ut(n,t,i)}function ei(n,t){if(t===null){n.date=null;return}var i=l(n);i.setMinutes(t,0,0),n.date=i}function t(n){if(!n)return null;var t=n[0],i=t.options[t.selectedIndex].value;return i===""?null:parseInt(i,10)}function s(n,t){var i='<select tabindex="-1" class="msls-text id-element" name="'+n+'" data-icon="false" data-mini="true" style="min-width: 100%; max-width: none;">';return!t||(i+=t.join("")),i+="<\/select>"}function n(n,t){return'<option value="'+t+'">'+n+"<\/option>"}function si(t){var r=[],i;for(t._isNullable&&r.push(n(f("dateTimePicker_emptyYear"),"")),i=t.minimumYear;i<=t.maximumYear;i++)r.push(n(p(t,i),i.toString()));return s("year",r)}function hi(t){var r=[],i;for(t._isNullable&&r.push(n(f("dateTimePicker_emptyMonth"),"")),i=0;i<12;i++)r.push(n(vt(t,i),i.toString()));return s("month",r)}function ft(t){var r=[],o=t.totalHourNumbers,u,e,i;for(t._isNullable&&r.push(n(f("dateTimePicker_emptyHour"),"")),i=0;i<o;i++)u=i.toString(),e=yt(t,i),r.push(n(e,u));return s("hour",r)}function ci(t){var i=[],r=tt(t,"AM"),u=tt(t,"PM");return t._isNullable&&i.push(n(f("dateTimePicker_emptyPeriod"),"")),i.push(n(r,"0")),i.push(n(u,"12")),s("period",i)}function et(t){var r=[],i,o=t.minuteIncrement,u,e;for(t._isNullable&&r.push(n(f("dateTimePicker_emptyMinute"),"")),i=0;i<60;i+=o)u=i.toString(),e=it(t,i),r.push(n(e,u));return s("minute",r)}function st(n,t){var r,i;return r='<fieldset data-role="controlgroup" data-type="horizontal" data-mini="true" data-inline="true">'+n.join("")+"<\/fieldset>",i=gs(r),t.appendChild(i),i}function li(n){var t={},r,u,f,e=n.properties,i,o,s;t.culture=ot.culture(),t.minimumYear=e.minimumYear,t.maximumYear=e.maximumYear,t.clock=t.culture.calendars.standard.AM?"TwelveHour":"TwentyFourHour",t.minuteIncrement=e.minuteIncrement,(!t.minuteIncrement||t.minuteIncrement<=0)&&(t.minuteIncrement=1),r=n.valueModel,!r||(t._isNullable=!ht(r,":@Required"),u=r.propertyType,!u||(f=yr(u).primitiveType.id),i=ht(r,":@Range"),!i||(i.minimum?(t._minimumDate=f===":DateTimeOffset"?ef(i.minimum):new Date(i.minimum),o=t._minimumDate.getFullYear(),t.minimumYear<o&&(t.minimumYear=o)):t._minimumDate=null,i.maximum?(t._maximumDate=f===":DateTimeOffset"?ef(i.maximum):new Date(i.maximum),s=t._maximumDate.getFullYear(),t.maximumYear>s&&(t.maximumYear=s)):t._maximumDate=null));switch(t.clock){case"TwelveHour":t.totalHourNumbers=12;break;case"TwentyFourHour":t.totalHourNumbers=24;break;default:t.totalHourNumbers=24}return t}function ai(n,r){n._updatingDropdownElements=!1,n._format=r.format;var u=n.getView(),f=rt(u,r.containerItem);n.datePickerEnabled&&(n._yearDropdownElement=rt(u,r.yearElement),n._monthDropdownElement=rt(u,r.monthElement),n._dayDropdownElement=rt(u,r.dayElement),n._yearDropdownElement.change(function(){n._updatingDropdownElements||ti(n,t(n._yearDropdownElement))}),n._monthDropdownElement.change(function(){n._updatingDropdownElements||ri(n,t(n._monthDropdownElement))}),n._dayDropdownElement.change(function(){n._updatingDropdownElements||ii(n,t(n._dayDropdownElement))})),n.timePickerEnabled&&(n._hourNumberDropdownElement=rt(u,r.hourNumberElement),n._minuteDropdownElement=rt(u,r.minuteElement),r.hourPeriodElement&&(n._hourPeriodDropdownElement=rt(u,r.hourPeriodElement),n._hourPeriodDropdownElement.change(function(){n._updatingDropdownElements||ui(n,t(n._hourNumberDropdownElement),t(n._hourPeriodDropdownElement))})),n._hourNumberDropdownElement.change(function(){n._updatingDropdownElements||fi(n,t(n._hourNumberDropdownElement),t(n._hourPeriodDropdownElement))}),n._minuteDropdownElement.change(function(){n._updatingDropdownElements||ei(n,t(n._minuteDropdownElement))})),yf(u,"select"),du(rr,function(){i(n.getView()).find("select").each(function(){i(this).closest("div.ui-btn").addClass("msls-dateTimePicker-"+this.name)})})}function b(n,t,i){var r,u,f,e,o;try{n._updatingDropdownElements=!0,n.datePickerEnabled&&(!t||!i||(r=t.getFullYear()===i.getFullYear(),u=t.getMonth()===i.getMonth(),r&&u&&(f=t.getDate()===i.getDate())),r||pt(n),u||wt(n),f||kt(n)),n.timePickerEnabled&&(!t||!i||(e=t.getHours()===i.getHours(),o=t.getMinutes()===i.getMinutes()),e||(gt(n),n._format.clock==="TwelveHour"&&dt(n)),o||ni(n))}finally{n._updatingDropdownElements=!1}}function h(n,t){n&&(n.data("mobile-selectmenu")&&n.selectmenu(t?"enable":"disable"),t?n.attr("disabled")==="disabled"&&n.removeAttr("disabled"):n.attr("disabled","disabled"))}function vi(n,t){n.datePickerEnabled&&(h(n._yearDropdownElement,t),h(n._monthDropdownElement,t),h(n._dayDropdownElement,t)),n.timePickerEnabled&&(h(n._hourNumberDropdownElement,t),h(n._hourPeriodDropdownElement,t),h(n._minuteDropdownElement,t))}function yi(n){if(n.state===k.disabled||n.state===k.readOnly){var t=n.activate;vi(this,!t),n.custom=!0}}function pi(){this._isViewCreated&&b(this)}function wi(n){var t=this;r.ui.Control.prototype._attachViewCore.call(t),ai(t,n),t._refreshView()}function bi(n,t,r){var v=gs('<div class="msls-dateTimePicker-container">'),p=t.properties,h=[],c=[],l,e,u=[],o,k,it,d,f,y,a,b;if(r.format=f=li(t),y=f.culture.calendars.standard,n[0].appendChild(v),p.datePickerEnabled||r.isDatePicker){var g=y.patterns.d,tt=y["/"],w=g.split(tt,3);for(a=0;a<w.length;a++){b=w[a].split(" ",1)[0];switch(b){case"M":case"MM":h.push(hi(f)),u.push("monthElement");break;case"d":case"dd":h.push(s("day")),u.push("dayElement");break;case"yyyy":case"yy":h.push(si(f)),u.push("yearElement")}}for(l=st(h,v),e=l.firstChild,o=0;o<u.length;o++)r[u[o]]=nt(n,i(e)),e=e.nextSibling}if(p.timePickerEnabled)for(u=[],k=ft(f),d=et(f),c.push(ft(f)),u.push("hourNumberElement"),c.push(et(f)),u.push("minuteElement"),f.clock==="TwelveHour"&&(c.push(ci(f)),u.push("hourPeriodElement")),l=st(c,v),e=l.firstChild,o=0;o<u.length;o++)r[u[o]]=nt(n,i(e)),e=e.nextSibling}var d=[],ct=e("ui.controls","DateTimePicker",lt,a,{controlName:"DateTimePicker",datePickerEnabled:w(),timePickerEnabled:w(),date:w(function(n){this._isViewCreated&&b(this,n,this._oldDate),this._oldDate=n},null,!0),originalDate:w(function(n){this._isViewCreated&&b(this,n,this._oldOriginalDate),this._oldOriginalDate=n}),_attachViewCore:wi,_refreshView:pi,_customVisualStateHandler:yi},{_fillTemplate:bi});ct.prototype._propertyMappings={value:"date",properties:{datePickerEnabled:"datePickerEnabled",timePickerEnabled:"timePickerEnabled"},details:{originalValue:"originalDate"}},ct.prototype._editableProperties={date:"value"}}(),function(){function n(n){var t=this;t.timePickerEnabled=!1,t.datePickerEnabled=!0,r.ui.controls.DateTimePicker.call(t,n)}e("ui.controls","DatePicker",n,r.ui.controls.DateTimePicker,{controlName:"DatePicker"},{_fillTemplate:function(n,t,i){i.isDatePicker=!0,r.ui.controls.DateTimePicker._fillTemplate(n,t,i)}}),r.ui.controls.DatePicker.prototype._propertyMappings={value:"date",details:{originalValue:"originalDate"}}}(),function(){function t(n){r.ui.Control.call(this,n)}function u(n,t,r){var u="<div><\/div>",f=i(u).appendTo(n);r.idElement=nt(n,f)}function f(t){n.call(this,t),this._docElement=rt(this.getView(),t.idElement,"[data-role='sharepointdoceditor']"),this._refreshView()}function o(){}var n=r.ui.Control.prototype._attachViewCore;e("ui.controls","DocumentEditor",t,r.ui.Control,{controlName:"DocumentEditor",_refreshView:o,_attachViewCore:f,docId:w(function(){this._refreshView()},null,!0)},{_fillTemplate:u}),r.ui.controls.DocumentEditor.prototype._propertyMappings={stringValue:"docId",properties:{documentLibrary:"documentLibrary",folderPath:"subPath"}}}(),function(){function t(n){r.ui.Control.call(this,n)}function i(){var n=this;!this._isViewCreated||!bt||(n.docId&&n._documentLibrary&&n._folderPath?bt.ready(function(){return n._refreshInternal()}):n._refreshUI())}function u(n,t,i){n.html("<img style='display:none'><\/img><a class ='ui-link' href='' target='_blank'> <\/a><div class ='msls-error' style='display: none'><\/div>"),n.addClass("msls-spdoc-link"),i.imgElement=nt(n,n.find("img")),i.linkElement=nt(n,n.find("a")),i.errorElement=nt(n,n.find("div"))}function f(){var n=this;if(!n.docId||!n._documentLibrary||!n._folderPath){n._refreshUI();return}var i=bt.hostWeb.get_lists().getByTitle(n._documentLibrary),r=parseInt(n.docId,10),u=i.getItemById(r),t=u.get_file(),f=t.get_modifiedBy(),e=t.get_author();bt.load(i,u,t,f,e).then(function(){n._docInfo={name:t.get_name(),id:r,relativeUrl:t.get_serverRelativeUrl(),url:bt.serverUrl+t.get_serverRelativeUrl()+"?Web=1",author:e.get_title(),lastModifiedBy:f.get_title(),title:t.get_title()},n._refreshUI()},function(t){n._error=t,n._refreshUI()})}function o(){var n=this,t=n._docInfo,u;if(!t||!t.url||!t.name)n._linkElement.css("display","none"),n._imgElement.css("display","none"),n._error&&(u=n._error,n._errorElement.css("display",""),n._errorElement.text(u.get_message()));else{var i=t.name,r=i.lastIndexOf("."),f=r>0&&r<i.length-1?i.substr(r+1):"generic";n._linkElement.attr("href",t.url),n._linkElement.text(t.name),n._imgElement.attr("src",bt.getIconUrl(f)),n._linkElement.css("display",""),n._imgElement.css("display",""),n._errorElement.css("display","none")}}function s(t){n.call(this,t),this._imgElement=rt(this.getView(),t.imgElement,"img"),this._linkElement=rt(this.getView(),t.linkElement,"a"),this._errorElement=rt(this.getView(),t.errorElement,"div");var u=this.data,r=u.valueModel,i=r&&r["Microsoft.LightSwitch.SharePoint:@DocumentStorage"];this._documentLibrary=i&&i.documentLibrary,this._folderPath=i&&i.subPath,this._refreshView()}var n=r.ui.Control.prototype._attachViewCore;e("ui.controls","DocumentViewer",t,r.ui.Control,{controlName:"DocumentViewer",_refreshView:i,_attachViewCore:s,_refreshInternal:f,_refreshUI:o,docId:w(function(){this._refreshView()},null,!0)},{_fillTemplate:u}),r.ui.controls.DocumentViewer.prototype._propertyMappings={stringValue:"docId"}}(),function(){function n(n){r.ui.controls.TextBox.call(this,n)}function t(n,t,r){var f='<input type="email" class="id-element" data-mini="true" />',u=i(f).appendTo(n);t.maxLength&&fo(u,t.maxLength),r.idElement=nt(n,u)}e("ui.controls","EmailAddressEditor",n,r.ui.controls.TextBox,{controlName:"EmailAddressEditor"},{_fillTemplate:t,_isFormElement:!0}),r.ui.controls.EmailAddressEditor.prototype._propertyMappings={stringValue:"text",properties:{placeholderText:"placeholderText"}}}(),function(){function n(n){r.ui.controls.Text.call(this,n)}function t(){this._isViewCreated&&(this._textElement.text(this.text),this._textElement.attr("href","mailto:"+this.text))}function u(n,t,r){i('<div class="msls-text"><a class="id-element ui-link" target="_blank"><\/a><\/div>').appendTo(n),r.idElement=nt(n,fi(n,".id-element"))}e("ui.controls","EmailAddressViewer",n,r.ui.controls.Text,{controlName:"EmailAddressViewer",_refreshView:t},{_fillTemplate:u})}(),function(){function n(n){var t=this;a.call(t,n),t._updateSelection=!1}function t(n,t,r){var o=0,c=t.properties,l=c.options,u="",e="",s,h;l==="OnOffOption"?(u=f("flipSwitchControl_offLabel"),e=f("flipSwitchControl_onLabel")):(u=f("flipSwitchControl_noLabel"),e=f("flipSwitchControl_yesLabel")),o=u.length>e.length?u.length:e.length,s="<select data-role='slider' data-mini='true'><option value='false'>"+u+"<\/option><option value='true'>"+e+"<\/option><\/select>",h=i(s).appendTo(n),r.idElement=nt(n,h),r.labelWidth=o}function u(n){var t=this,i;t._selectElement=rt(t.getView(),n.idElement),r.ui.Control.prototype._attachViewCore.call(t,n),t._selectElement.change(function(){if(!t._updateSelection)try{t._updateSelection=!0,t.sliderValue=t._selectElement.val()==="false"?!1:!0}finally{t._updateSelection=!1}}),i=function(){si(rr,i);var r=t._selectElement.siblings();r.length===1&&r.css("min-width",n.labelWidth+"em")},vt(rr,i),t._refreshView()}function o(){if(this._isViewCreated){var n=this.sliderValue?"true":"false";if(!this._updateSelection||this._selectElement.val()!==n)try{this._updateSelection=!0,this._selectElement.val(n),this._selectElement.change()}finally{this._updateSelection=!1}}}function s(n){if(n.state===k.disabled||n.state===k.readOnly){var t=this._selectElement;this._isViewCreated&&!!t&&(t.data("mobile-slider")?t.slider(n.activate?"disable":"enable"):n.activate?t.attr("disabled","disabled"):t.attr("disabled","")),n.custom=!0}}e("ui.controls","FlipSwitchControl",n,a,{controlName:"FlipSwitchControl",sliderValue:w(function(){this._refreshView()},!1,!0),_customVisualStateHandler:s,_attachViewCore:u,_refreshView:o},{_fillTemplate:t,_isFormElement:!0}),r.ui.controls.FlipSwitchControl.prototype._propertyMappings={value:"sliderValue"},r.ui.controls.FlipSwitchControl.prototype._editableProperties={sliderValue:"value"}}(),function(){function c(n){var t=this;a.call(t,n)}function l(n,t,r){i('<div class="msls-image-container"><div class="msls-image-border ui-btn-down-a ui-disabled"><img alt="Image" class="msls-image-inner"/><\/div><\/div>').appendTo(n);var u=fi(n,".msls-image-container"),f=u.children("div"),e=f.children("img");r.imageContainer=nt(n,u),r.borderElement=nt(n,f),r.imageElement=nt(n,e)}function v(i){var u=this,f=u.getView();u._element=rt(f,i.imageContainer,".msls-image-container"),u._border=rt(f,i.borderElement),u._image=rt(f,i.imageElement),(u.isHStretch||u.isVStretch)&&(n.length===0&&vt(ui,t),n.push(u)),h(this,!0),r.ui.Control.prototype._attachViewCore.call(this,i)}function y(){if(this.isHStretch||this.isVStretch){var i=n.indexOf(this);i>=0&&(n.length===1?(n=[],si(ui,t)):n.splice(i,1))}}function p(n,t,i){var r=n.isHStretch?n._element.width():t,u=n.isVStretch?n._element.height():i,h=n.width,c=n.height,f=n.minWidth,o=n.minHeight,e=n.maxWidth,s=n.maxHeight;return n.widthSizingMode===ci.fixedSize?typeof h=="number"&&h>=0&&(r=h):(typeof f=="number"&&f>=0&&r<f&&(r=f),typeof e=="number"&&e>=0&&r>e&&(r=e)),n.heightSizingMode===tr.fitToContent&&t>0&&(u=i*r/t),n.heightSizingMode===tr.fixedSize?typeof c=="number"&&c>=0&&(u=c):(typeof o=="number"&&o>=0&&u<o&&(u=o),typeof s=="number"&&s>=0&&u>s&&(u=s)),n.widthSizingMode===ci.fitToContent&&i>0&&(r=t*u/i,typeof f=="number"&&f>=0&&r<f&&(r=f),typeof e=="number"&&e>=0&&r>e&&(r=e)),{width:r,height:u}}function u(n,t){var l=n._image,f=l.prop("naturalWidth")||80,e=l.prop("naturalHeight")||80,a=p(n,f,e),r=Math.floor(a.width),u=Math.floor(a.height),o=r,s=u,h=0,c=0,i=null;return(t||n._controlWidth!==r||n._controlHeight!==u)&&(n._controlHeight=u,n._controlWidth=r,n.scale==="Fit"?r*e>f*u?(o=u*f/e,h=(r-o)/2):(s=r*e/f,c=(u-s)/2):n.scale==="Fill"&&e>0&&f>0&&(r*e<f*u?(o=u*f/e,h=(r-o)/2):(s=r*e/f,c=(u-s)/2)),n.widthSizingMode===ci.fitToContent&&n.heightSizingMode===tr.fitToContent?(i={border:{},image:{}},n.minHeight>0&&(i.border["min-height"]=i.image["min-height"]=n.minHeight+"px"),n.minWidth>0&&(i.border["min-width"]=i.image["min-width"]=n.minWidth+"px"),n.maxHeight>0&&(i.border["max-height"]=i.image["max-height"]=n.maxHeight+"px"),n.maxWidth>0&&(i.border["max-width"]=i.image["max-width"]=n.maxWidth+"px")):i={border:{width:r.toString()+"px",height:u.toString()+"px"},image:{width:o.toString()+"px",height:s.toString()+"px","margin-left":h.toString()+"px","margin-top":c.toString()+"px"}}),i}function o(n,t){n._border.css(t.border),n._image.css(t.image),(n.widthSizingMode===ci.fitToContent||n.heightSizingMode===tr.fitToContent)&&n.getView().trigger("updatelayout")}function s(n,t){var i=u(n,!0);o(n,i),t||n._border.removeClass("ui-btn-down-a ui-disabled")}function h(n,t){var o,h,i;if(n._isViewCreated&&!!n._element){var r=n.src,e=n.data,c=n._border,u=n._image;!e.valueModel||(h=e.valueModel,i=h.propertyType,uu(i)&&(o=i,i=o.underlyingType),!i||i.id!==":Binary"&&i.id!==yi+":Image"||(r="data:image;base64,"+n.src)),t||c.addClass("ui-btn-down-a ui-disabled"),u.off("load").on("load",function(){u.attr("alt","Image"),s(n)}).off("error").on("error",function(){u.attr("alt",f(r===n.src?"image_invalid_url":"image_invalid_data")),s(n,!n.src)}).attr("src",r||null)}}function b(){h(this,!1)}var n=[],t=function(){for(var i,r,f=[],t=0,e=n.length;t<e;t++)i=n[t],i._element.is(":visible")?f.push(u(i,!1)):f.push(null);for(t=0;t<e;t++)r=f[t],r&&o(n[t],r)};e("ui.controls","Image",c,a,{controlName:"Image",src:w(b),scale:w(),isHStretch:w(),isVStretch:w(),width:w(),height:w(),minWidth:w(),minHeight:w(),maxWidth:w(),maxHeight:w(),widthSizingMode:w(),heightSizingMode:w(),_attachViewCore:v,_onDispose:y},{_fillTemplate:l,_skipEnhance:!0}),r.ui.controls.Image.prototype._propertyMappings={value:"src",properties:{scale:"scale",tap:"tap",width:"width",height:"height",minWidth:"minWidth",minHeight:"minHeight",maxWidth:"maxWidth",maxHeight:"maxHeight",widthSizingMode:"widthSizingMode",heightSizingMode:"heightSizingMode"},_isHStretch:"isHStretch",_isVStretch:"isVStretch"}}(),function(){function n(n){for(var o=n.getView(),f,r,i,e,u,t=o[0];t.parentNode;)t=t.parentNode;for(f=t!==document,r=n.children,i=0,e=r.length;i<e;i++)u=r[i].getView(),f?u.detach():u.remove()}var u=ut("WeightedRowHeight","RowsLayout"),t=ut("WeightedColumnWidth","ColumnsLayout");(function(){function t(n){var t=this;a.call(t,n)}function f(n,t,r){var f,e,l,o,s;if(t&&(o=t.children,o&&i.isArray(o))){for(n.addClass("msls-label-host msls-rows-layout "),f=[],e=0,l=o.length;e<l;e++){var h=o[e],y=e===0,a=e===l-1,c=h.properties[u],v="";!!c&&c!==1&&c>0&&(v=' data-msls-weight="'+c+'"'),f.push('<div class="msls-clear'),y?a||f.push(" msls-first-row "):a?f.push(" msls-last-row "):f.push(" msls-row "),h.horizontalAlignment===ls.right&&(h.widthSizingMode===ci.fitToContent||h.widthSizingMode===ci.fixedSize)?(f.push(h._isVStretch?" msls-vstretch":" msls-vauto"),f.push(' "'+v+'><div class="msls-halign-right '),f.push('"><\/div><div class="msls-clear"><\/div><\/div>')):f.push('"'+v+"><\/div>"),a&&f.push('<div class="msls-clear"><\/div>')}n[0].innerHTML=f.join(""),s=n[0].firstChild,i.each(o,function(n){var t,u=r[n]={};s.firstChild?(t=i(s.firstChild),u.containerPath=[0]):t=i(s),ur(t,this,u),s=s.nextSibling})}}function o(n){var t=this,e,o,u,f;(a.prototype._attachViewCore.call(t,n),t._tapElement=t._container=t.getView(),e=t.data,e)&&(u=e.children,u&&i.isArray(u))&&(o=t._container[0],f=o.firstChild,i.each(u,function(u){var o,e,s=n[u];o=rt(i(f),s.containerPath),f=f.nextSibling,e=new r.ui.controls.ContentItemPresenter(o),e.parent=t,e.data=this,e.attachView(s)}))}e("ui.controls","RowsLayout",t,a,{controlName:"RowsLayout",_onDispose:function(){n(this)},_attachViewCore:o},{_fillTemplate:f}),r.ui.controls.RowsLayout.prototype._propertyMappings={properties:{tap:"tap"}}})(),function(){function u(n){var t=this;a.call(t,n)}function f(n,r,u){var o,e,f,s,c,p,a,h,w,l,k,v,b=0,y=0;if(r&&(o=r.children,o&&i.isArray(o))){for(f=0,s=o.length;f<s;f++)c=o[f],b+=c.properties[t],y+=c._isHStretch?1:0;for(v=y===s,n.addClass("msls-columns-layout msls-overflow-columns "+(y===0||r._isUnderList&&v?"msls-static-layout":"")),e=[],f=0,s=o.length;f<s;f++)c=o[f],p=f===0,a=f===s-1,h=c.properties[t],e.push('<div class="'),p?a||e.push(" msls-first-column "):a?e.push(" msls-last-column "):e.push(" msls-column "),e.push('"'),v&&r._isUnderList&&(w=100*h/b,e.push('style="width:'+w+'%;"')),!!h&&h!==1&&h>0&&e.push(' data-msls-weight="',h+'"'),e.push('><\/div><div class="'+(a?"msls-clear":"msls-hempty")+'"><\/div>');for(n[0].innerHTML=e.join(""),f=0,l=n[0].firstChild;l;)f%2==0&&ur(i(l),o[f/2],u[f/2]={}),f++,l=l.nextSibling}}function o(n){var t=this,s,e,h,u,f,o;if((a.prototype._attachViewCore.call(t,n),h=t._container=t.getView(),s=t.data,s)&&(e=s.children,e&&i.isArray(e)))for(f=0,u=h[0].firstChild;u;)f%2==0&&(o=new r.ui.controls.ContentItemPresenter(i(u)),o.parent=t,o.data=e[f/2],o.attachView(n[f/2])),f++,u=u.nextSibling}e("ui.controls","ColumnsLayout",u,a,{controlName:"ColumnsLayout",_onDispose:function(){n(this)},_attachViewCore:o},{_fillTemplate:f}),r.ui.controls.ColumnsLayout.prototype._propertyMappings={properties:{tap:"tap"}}}(),function(){function t(n){var t=this;a.call(t,n)}function u(n,t,r){var f,o,u,s,h,c,l,a,v,e;if(t&&(f=t.children,f&&i.isArray(f))){for(n.addClass("msls-table-row"),o=[],u=0,s=f.length;u<s;u++)o.push("<td class='msls-column' role='gridcell'"),o.push("><\/td>");for(n[0].innerHTML=o.join(""),u=0,e=n[0].firstChild;e;)ur(i(e),f[u],r[u]={}),u++,e=e.nextSibling}}function f(n){var t=this,s,f,h,u,e,o;if((a.prototype._attachViewCore.call(t,n),h=t._container=t.getView(),s=t.data,s)&&(f=s.children,f&&i.isArray(f)))for(e=0,u=h[0].firstChild;u;)o=new r.ui.controls.ContentItemPresenter(i(u)),o.parent=t,o.data=f[e],o.attachView(n[e]),e++,u=u.nextSibling}e("ui.controls","TableRowLayout",t,a,{controlName:"TableRowLayout",_onDispose:function(){n(this)},_attachViewCore:f},{_fillTemplate:u}),r.ui.controls.TableRowLayout.prototype._propertyMappings={properties:{tap:"tap"}}}()}(),function(){function d(){return i("<div/>")}function h(n){return a.text(n),n=a.html(),n.replace(/\n|\r\n/g,"<br>")}function g(c,a,y,p,w,g,nt,tt){function lt(){var n,t;p&&Array.isArray(p)&&(t=i("body").jqmData("theme")||li,p.forEach(function(r){!r||!r.text||(n||(n=i("<div class='msls-leaf'><\/div>").appendTo(rt)),io(i("<a href='#'>"+h(r.text)+"<\/a>").appendTo(n).buttonMarkup({theme:t,icon:r.icon,mini:!0,iconpos:"left"}).on("vclick",function(n){o(s.modalViewCloseStart),et=r.result,rt.popup(f),n.preventDefault()})))}))}function at(){a&&i("<div><\/div>").addClass("msls-control-header msls-leaf").html(h(a)).appendTo(rt),g?g(rt):y&&d().addClass("msls-leaf").html(h(y)).appendTo(rt),lt(),rt.trigger("create")}function vt(){u(rt,e,!0),ro(rt.parent()),o(s.modalViewShowEnd),st(b)}function ot(){ct.focus(),tt(et),n=null,o(s.modalViewCloseEnd),st(l)}function yt(){u(rt,e,!1),rt.off(r).off(t),rt.remove(),rt=null,nt&&nt(),ri(function(){if(ut){ut.one(r,ot);var n=ut.attr("data-msls-name");n?it.showPopup(n):ut.popup(v)}else ot()})}function ht(){var n=i("body").jqmData("theme")||li;rt.removeClass(wt).popup({overlayTheme:n,positionTo:"window",theme:n}).on(r,vt).on(t,yt).popup(v)}var ft=i.mobile.popup.active,ut=ft&&ft.element,ct=i(document.activeElement),rt,et=w;lr(!0);try{n=rt=i(ii[k]).appendTo(c),at()}finally{ki(!1),ir(rt)}if(ut){ut.one(t,function(){ri(ht,1)});ut.popup(f)}else ht()}function y(){return!!n&&!!n[e]}function w(){y()&&(o(s.modalViewCloseStart),n.popup(f))}var b="modalViewShown",l="modalViewClosed",a=i("<pre/>"),k="modalViewTemplate",t="popupafterclose",r="popupafteropen",f="close",v="open",e="__canClose",n;au={show:function(t){function h(){g(f,t.title,t.message,t.buttons,e,t.buildContentCallback,t.disposeContentCallback,r)}o(s.modalViewShowStart);var r,u=new c.Promise(function(n){r=n}),f=i.mobile.activePage,e=t.defaultResult||p.none;return f.length!==1?(r(e),u):(n?(du(l,h),w()):h(),u)},close:w,isOpen:y},kt._modalView=au}(),function(){function h(t){n.call(this,t),this._valueChangingText=!1,this._symbol=null}function c(){var e=this.text,v=ot.culture().numberFormat,h=v.currency,y,n=this.data,p,i,r,c,w=!0,l;e?(r=this._symbol,c=u(n),!c||c.currencySymbol===t?r||(this._isoSymbol=a(n),l=s[this._isoSymbol],r=this._symbol=l?l:o):(w=!1,r=c.currencySymbol||""),y=h.symbol,h.symbol=r,i=ot.parseFloat(e),w&&isNaN(i)&&(h.symbol=this._isoSymbol,i=ot.parseFloat(e)),h.symbol=y,isNaN(i)||e.indexOf(v.percent.symbol)!==-1?(p=new hi(n.details,f("validation_invalidValue_money")),le(n,p)):(hf(n),this.numericValue=i)):this.numericValue=null}function l(){this._valueChangingText||this._setValueFromText(),n.prototype._onTextChanged.call(this)}function u(n){var i=n.details.getModel(),r,t,u=yi+":@MoneyProperties";return t=ht(i,u),t||(r=ne(i.propertyType),t=ht(r,u)),t}function a(n){var r="USD",i;return n.details&&(i=u(n),i&&(r=i.isoCurrencySymbol!==t?i.isoCurrencySymbol:r)),r.toUpperCase()}var n=r.ui.controls.TextBox,i={none:0,symbol:1,isoSymbol:2},o="¤",s={AED:"د.إ.‏",ALL:"Lek",AMD:"դր.",ARS:"$",AUD:"$",AZN:"ман.",BGL:"¤",BHD:"د.ب.‏",BND:"$",BOB:"$b",BRL:"R$",BYB:"¤",BZD:"BZ$",CAD:"$",CHF:"Fr.",CLP:"$",CNY:"¥",COP:"$",CRC:"₡",CZK:"Kč",DKK:"kr.",DOP:"RD$",DZD:"د.ج.‏",EEK:"kr",EGP:"ج.م.‏",EUR:"€",GBP:"£",GEL:"Lari",GTQ:"Q",HKD:"HK$",HNL:"L.",HRK:"kn",HUF:"Ft",IDR:"Rp",ILS:"₪",INR:"रु",IQD:"د.ع.‏",IRR:"ريال",ISK:"kr.",JMD:"J$",JOD:"د.ا.‏",JPY:"¥",KES:"S",KGS:"сом",KRW:"₩",KWD:"د.ك.‏",KZT:"Т",LBP:"ل.ل.‏",LTL:"Lt",LVL:"Ls",LYD:"د.ل.‏",MAD:"د.م.‏",MKD:"ден.",MNT:"₮",MOP:"MOP",MVR:"ރ.",MXN:"$",MYR:"RM",NIO:"C$",NOK:"kr",NZD:"$",OMR:"ر.ع.‏",PAB:"B/.",PEN:"S/.",PHP:"Php",PKR:"Rs",PLN:"zł",PYG:"Gs",QAR:"ر.ق.‏",ROL:"lei",RSD:"Дин.",RUR:"р.",SAR:"ر.س.‏",SEK:"kr",SGD:"$",SIT:"€",SKK:"€",SYP:"ل.س.‏",THB:"฿",TND:"د.ت.‏",TTD:"TT$",TWD:"NT$",UAH:"₴",USD:"$",UYU:"$U",UZS:"сўм",VEB:"Bs. F.",VND:"₫",YER:"ر.ي.‏",YTL:"ر.ي.‏",ZAR:"R",ZWD:"Z$"};fh=function(n,r){var a="",h=2,v=ot.culture().numberFormat.currency,p,c=i.symbol,e="USD",l=!0,f,w=!0,y;return(r=re(r),r===null||r===t)?"":(!n.details||(f=u(n),f&&(h=f.decimalDigits!==t?f.decimalDigits:h,f.currencySymbol!==t?(w=!1,e=f.currencySymbol||""):e=f.isoCurrencySymbol!==t?f.isoCurrencySymbol:e,c=f.symbolMode!==t?f.symbolMode:c,l=f.isFormatted!==t?f.isFormatted:l),w&&l&&(c===i.isoSymbol?e=e.toUpperCase():c===i.symbol?(y=s[e.toUpperCase()],e=y?y:o):c===i.none&&(e=""))),(h===t||h===null)&&(h=ie(r)),l?(p=v.symbol,v.symbol=e,a=ot.format(r,"c"+h.toString()),v.symbol=p):a=ot.format(r,"n"+h.toString()),a)},e("ui.controls","MoneyEditor",h,n,{controlName:"MoneyEditor",numericValue:w(function(n){try{this._valueChangingText=!0,this.text=fh(this.data,n)}finally{this._valueChangingText=!1}},null,!0),_onTextChanged:l,_setValueFromText:c},{_fillTemplate:n._fillTemplate,_isFormElement:!0}),r.ui.controls.MoneyEditor.prototype._propertyMappings={value:"numericValue",properties:{placeholderText:"placeholderText"}},r.ui.controls.MoneyEditor.prototype._editableProperties={numericValue:"value"}}(),function(){function n(n){r.ui.controls.Text.call(this,n)}e("ui.controls","MoneyViewer",n,r.ui.controls.Text,{controlName:"MoneyViewer",numericValue:w(function(n){this.text=fh(this.data,n)})},{_fillTemplate:r.ui.controls.Text._fillTemplate}),r.ui.controls.MoneyViewer.prototype._propertyMappings={value:"numericValue",properties:{tap:"tap"}}}(),function(){function n(n){r.ui.Control.call(this,n)}e("ui.controls","NoControl",n,r.ui.Control,{controlName:"NoControl"}),r.ui.controls.NoControl.prototype._propertyMappings={}}(),function(){function i(t){n.call(this,t),this._valueChangingText=!1}function u(){var t=this.text,u=ot.culture().numberFormat,s=u.percent.symbol,i=this.data,e,n,r,o=2,h=null;t?(n=ot.parseFloat(t),isNaN(n)||t.indexOf(u.currency.symbol)!==-1?(e=new hi(i.details,f("validation_invalidValue_percent")),le(i,e)):(hf(i),r=n.toString().split("."),!r[1]||(o+=r[1].length),this.numericValue=(n*.01).toFixed(o))):this.numericValue=null}function o(){this._valueChangingText||this._setValueFromText(),n.prototype._onTextChanged.call(this)}var n=r.ui.controls.TextBox;eh=function(n,i){var r,f,o,u,e;return(i=re(i),i===null||i===t)?"":(!n.details||(f=n.details.getModel(),e=yi+":@FormatParameter",u=ht(f,e),u||(o=ne(f.propertyType),u=ht(o,e)),u&&(r=u.decimalDigits)),(r===t||r===null)&&(r=ie(i)-2,r<0&&(r=0)),ot.format(i,"p"+r.toString()))},e("ui.controls","PercentEditor",i,n,{controlName:"PercentEditor",numericValue:w(function(n){try{this._valueChangingText=!0,this.text=eh(this.data,n)}finally{this._valueChangingText=!1}},null,!0),_onTextChanged:o,_setValueFromText:u},{_fillTemplate:n._fillTemplate,_isFormElement:!0}),r.ui.controls.PercentEditor.prototype._propertyMappings={value:"numericValue",properties:{placeholderText:"placeholderText"}},r.ui.controls.PercentEditor.prototype._editableProperties={numericValue:"value"}}(),function(){function n(n){r.ui.controls.Text.call(this,n)}e("ui.controls","PercentViewer",n,r.ui.controls.Text,{controlName:"PercentViewer",numericValue:w(function(n){this.text=eh(this.data,n)})},{_fillTemplate:r.ui.controls.Text._fillTemplate}),r.ui.controls.PercentViewer.prototype._propertyMappings={value:"numericValue",properties:{tap:"tap"}}}(),function(){function n(n){r.ui.controls.TextBox.call(this,n)}function t(n,t,r){var f='<input type="tel" class="id-element" data-mini="true" />',u=i(f).appendTo(n);t.maxLength&&fo(u,t.maxLength),r.idElement=nt(n,u)}e("ui.controls","PhoneNumberEditor",n,r.ui.controls.TextBox,{controlName:"PhoneNumberEditor"},{_fillTemplate:t,_isFormElement:!0}),r.ui.controls.PhoneNumberEditor.prototype._propertyMappings={stringValue:"text",properties:{placeholderText:"placeholderText"}}}(),function(){function n(n){r.ui.controls.Text.call(this,n)}function t(n,t,r){i('<div class="msls-text"><a class="id-element"><\/a><\/div>').appendTo(n),r.idElement=nt(n,fi(n,".id-element"))}function u(){var t=this,i=t.data,n=t.text;t._isViewCreated&&(!i.details||n===""||(n=t._getFormattedText(n)),this._textElement.text(n),this._textElement.attr("href","tel:"+n))}function f(n){var a=this,f=a.data,i=f.details.getModel(),u=i.propertyType,h,t,c=yi+":@PhoneNumberValidation",r,l,e,s;if(i=f.details.getModel(),uu(u)&&(h=u,u=h.underlyingType),i[c]||(i=u),t=ht(i,c),!!t&&!!t.formats)for(t.__regexparray||fs(t),r=0,l=t.__regexparray.length;r<l;r++)if(e=t.__regexparray[r].exec(f.value),e){s=o(t,e,r),s!==""&&(n=s);break}return n}function o(n,t,i){for(var k,s="",h="",c="",d="",u="",l=0,a=0,b=0,v=0,y=0,p=0,e=n.__formatarray[i].replace(/[^ACN]/gi," ").replace(/\s{2,}/g," ").replace(/^\s*/,"").replace(/\s*$/,""),o,f,g,r=0,w=e.length;r<w;r++)k!==e[r]&&(e[r]==="C"?l++:e[r]==="A"?a++:e[r]==="N"&&b++,k=e[r]);for(r=0;r<l;r++)s+=t[1+r];for(r=0;r<a;r++)h+=t[1+l+r];for(r=0;r<b;r++)c+=t[1+l+a+r];for(r=l+a+b+1,t[r]&&(d+=" "+t[r]+" "+t[r+1]),r=0,w=n.__formatarray.length;r<w;r++){for(o=!0,f=0,g=n.__formatarray[r].length;f<g;f++)if(n.__formatarray[r][f]==="C"){if(v===s.length){o=!1;break}u+=s[v++]}else if(n.__formatarray[r][f]==="A"){if(y===h.length){o=!1;break}u+=h[y++]}else if(n.__formatarray[r][f]==="N"){if(p===c.length){o=!1;break}u+=c[p++]}else u+=n.__formatarray[r][f];if((!s.length||v===s.length)&&(!h.length||y===h.length)&&(!c.length||p===c.length)||(o=!1),o){u+=d;break}else v=0,y=0,p=0,u=""}return u}e("ui.controls","PhoneNumberViewer",n,r.ui.controls.Text,{controlName:"PhoneNumberViewer",_refreshView:u,_getFormattedText:f},{_fillTemplate:t})}(),function(){function u(t,i,r){if(r.call(this,t,i),t==="change")switch(i){case"task":this.refreshView();break;case"activeTab":n(this);break;case"areButtonsVisible":ir()}}function f(n){i('<ul class="msls-tabs-container" data-role="controlgroup" data-type="horizontal" />').appendTo(n)}function o(n){var t=this;a.prototype._attachViewCore.call(t,n),this.refreshView()}function s(){function c(n){nh(u,s,n)}var t=this,o=t.task,u,f,e,s=".subControl:not('.msls-collapsed') a",h;t._isViewCreated&&o&&(u=fi(t.getView(),".msls-tabs-container"),u.empty(),u.off("keydown"),t._buttons=[],t._contentItems=[],h=o.screen.details.pages,i.each(o.tabCommands,function(n,o){var l=i('<div class="subControl" control="Button"/>'),a=i("<li class='"+kv+"'><\/li>").append(l),s=new r.ui.controls.NegativeTabIndexButton(l),v=b(h).first(function(n){return n.name===o.name});s.render(),t._buttons.push(s),t._contentItems.push(v),s.data=o,a.data("msls-tabName",o.name),new r.data.DataBinding("data.displayName",s,"content",s,yt.oneWayFromSource).bind(),new r.data.DataBinding("data.command",s,"tap",s,yt.oneWayFromSource).bind(),new r.data.DataBinding("tap.canExecute",s,"isEnabled",s).bind(),f=new r.ui.helpers.ObservableVisibility(s.getView()),e=new r.data.DataBinding("isVisible",v,"value",f,yt.oneWayFromSource),e.bind(),f.onvaluechange=c,gt(s,f),s.parent=t,u.append(a)}),yf(u,s),f=new r.ui.helpers.ObservableVisibility(t.getView()),e=new r.data.DataBinding("areButtonsVisible",t,"value",f,yt.oneWayFromSource),e.bind(),gt(t,f),t._ul=u,n(t))}function n(n){var e=n.data,t,r,u,f;if(e)for(n._ul&&i("."+ws,n._ul).removeClass(ws),t=0;t<n._buttons.length;t++)r=n._buttons[t],u=r.data,!u||u.name!==n.activeTab||(f=r.getView().parent(),f.addClass(ws))}function c(){for(var u=!this.task.screen.details.rootContentItem.properties[t],i=0,r,n=0;n<this._contentItems.length;n++)r=this._contentItems[n],r.isVisible&&i++;return u&&i>1}var t=ut("HideTabTitles","Screen");e("ui.controls","ScreenTabs",function(n){this._buttons=[],this._contentItems=[],a.call(this,n)},r.ui.Control,{controlName:"ScreenTabs",_attachViewCore:o,refreshView:s,dispatchEvent:co(u),activeTab:h(),hideTabTitles:h(),task:h(),areButtonsVisible:dt(c)},{_fillTemplate:f})}(),function(){function t(t,r){var e=this,o=t.closest(".msls-vscroll");u(e,"_onScroll",function(){f(e)}),o.length?or(r,"_isActivated",e,function(){r._isActivated?th(o,e._savedScrollTop):e._saveScrollTop=o.scrollTop()}):o=i(n),u(e,"_scrollElement",o);o.on("scroll",e._onScroll)}function f(n){n.dispatchEvent("scroll")}e("ui.controls","ScrollHelper",t,null,{viewHeight:l(function(){return this._scrollElement.height()}),viewTop:l(function(){return this._scrollElement.scrollTop()}),scroll:er(),_onDispose:function(){var n=this;n._scrollElement.off("scroll",n._onScroll),n._onScroll=null,n._scrollElement=null}}),by=r.ui.controls.ScrollHelper}(),function(){function h(t,r){var o,s,h,f,c,e,l,u;t.data._isVStretch||(o=i.mobile.activePage,f=i(n),c=f.scrollTop(),l=r.offset().top-c,s=i("div[data-role='header']",o).outerHeight(),s&&(u=l-s,e=u<0),e||(h=i("div[data-role='footer']",o).outerHeight(),h&&(u=r.outerHeight()-(f.height()-l-h),e=u>0)),e&&f.scrollTop(c+u))}function f(n){var t=n.focusableItem.prev(n._itemHtmlSelector);return t.length||(t=n.getItems().last()),n.focusableItem=t,n.focusCurrentItem(),!1}function o(n){var t=n.focusableItem.next(n._itemHtmlSelector);return t.length||(t=n.getItems().first()),n.focusableItem=t,n.focusCurrentItem(),!1}function t(n){return n.focusableItem.trigger("vclick"),!1}function s(n){var r=n.focusableItem,f=r.data(u),i=n._collection;return i.selectedItem===f?i.selectedItem=null:t(n),!1}function c(n){var u=i.mobile.keyCode,r={};return r[u.UP]=f,r[u.DOWN]=o,r[u.ENTER]=t,r[u.SPACE]=s,new ga(n,r)}var u="__entity";e("ui.controls","CollectionControl",function(n){a.call(this,n),this._$focusable=i()},a,{getItems:function(){},focusableItem:l(function(){return this._$focusable},function(n){var t=this.focusableItem;t!==n&&(t.off("focus").attr(ti,"-1"),n.on("focus",function(){i(this).addClass("ui-focus").on("blur",function(){i(this).removeClass("ui-focus").off("blur")})}).attr(ti,"0"),this._$focusable=n,n.length&&h(this,n))}),focusCurrentItem:function(){this.focusableItem.focus()}},{itemDataKey:u,focusPreviousItem:f,focusNextItem:o,selectFocusedItem:t,toggleFocusedItem:s,keyBindListNavigation:c}),oo=r.ui.controls.CollectionControl}(),function(){function ht(n){var t,i,f,r=0,u=n.children.length,e=n.controlModel;if(n._isHStretch){if(e.id===":ColumnsLayout"){for(t=0;t<u;t++)i=n.children[t],f=i.properties[he],i._isHStretch&&r++;if(r>0&&r<u)return!0}for(t=0;t<u;t++)if(i=n.children[t],ht(i))return!0}return!1}function pi(t){var l=t.data,a=l.children[0],o=a.properties[uh],e,f,s,h,r,c=t._ulElement.children(u);c.length&&((f=tv(t._ulElement[0]),f<=0||t._lastWidth===f)||(t._lastWidth=f,e=n.getComputedStyle(c[0]),r=parseFloat(e.marginLeft)+parseFloat(e.marginRight),r=isNaN(r)?0:r,o+=r,s=Math.max(Math.floor(f/(o+r)),1),h=Math.floor(f/s)-Math.ceil(r),t._globalStyle||(t._globalStyle=i('<style id="msls-global-list-style-'+t._uniqueName+'"><\/style>').appendTo(i("head"))),t._globalStyle.text("ul.msls-tile-list[data-msls-list-name='"+t._uniqueName+"'] li { width: "+h+"px; }")))}function wi(n,t){var r=n._collection,i;n._selectingElement=t,i=t.data(v),r.selectedItem=i,n._selectingElement=null,o(s.listSelectedItemChanged)}function bi(n){var t=n._ulElement,r=t[0];uo(t,n,"itemTap","ItemTapPromise",function(n){return i(n.target).closest(u).length})}function ct(n){nt(n),et(n,!1)}function at(n){var t=n._collection,i=n.data.children.length-1,r=t.data;i<r.length?(et(n,!0),tt(n,r.slice(i,i+t._loader._pageSize))):t.canLoadMore?(o(s.listViewLoadLoadMore),t.loadMore(!0)):ct(n)}function p(n){var i=n._collection,t,r;i&&i.state===c.idle&&(t=n._scrollHelper,r=n.data._isActivated&&n._ulElement.height()-t.viewTop<2*t.viewHeight,r?at(n):ct(n))}function nt(n){var t=n._ulElement,i=t.next("."+vs);n.data.children.length===1?(g||(g="<div class='"+vs+"'>"+f("listView_no_items")+"<\/div>"),i.length||t.after(g)):i.remove()}function bt(n){var t,r;return te(n.controlModel)?b(n.children).any(bt):(t=dr(n),t&&(r=pf[t],i.isFunction(r)))?!r._skipEnhance:!0}function tt(t,r,f,e){function yt(){si(ui,yt),pt(function(){p(t)})}var c,b=r.length-1,y=t._ulElement,ut=t.data,k=ut.children[0],wt=f===0&&y.find(u).length!==0,d,w,ft,g=t._rowTemplate,et=t._rowTemplateData,l,tt,ct=i(".msls-empty",y),a=[],lt=[],it,ot=y[0],ht,rt,at;if(k){if(b>=0){for(g||(et=t._rowTemplateData={},g=t._rowTemplate=n.document.createElement(h),l=i(g),d=i("<div><\/div>").appendTo(l),i('<div class="msls-clear"><\/div>').appendTo(l),l.attr(ti,"-1"),l.attr("data-icon","false"),ft=i.mobile.getInheritedTheme(y,li),l.addClass("msls-li msls-style ui-shadow ui-li ui-btn ui-btn-up-"+ft),l.attr("data-theme",ft),ur(d,k,et),t._itemHasAttachedLabel=!!l.find("."+af).length,t._shouldEnhance=bt(k)),it=document.createDocumentFragment(),c=0;c<=b;c++)lt.push(ai.cloneContentItemTree(k,ut,r[c])),w=g.cloneNode(!0),a.push(w),it.appendChild(w);for(ht=wt?ot.firstChild:ct.length>0?ct[0]:null,ht?ot.insertBefore(it,ht):ot.appendChild(it),c=0;c<=b;c++)l=i(w=a[c]),l.data(v,r[c]),d=i(w.firstChild),tt=new vi(d),tt.parent=t,tt.data=lt[c],tt.attachView(et);rt=i(a),o(s.listViewLoadEnhanceView),t._shouldEnhance&&rt.trigger("create"),y.listview("refresh"),t._focusableItem||!a.length||(at=t._focusableItem=i(a[0]),at.attr(ti,"0")),st(ci,t)}o(s.listViewLoadApplyEnd),e||(b>=0?vt(ui,yt):pt(function(){p(t)})),nt(t),a.length>0&&(t._itemHasAttachedLabel&&wf(rt),ir(rt,!0),rh&&!ut._isVStretch&&(ir(),st("LayoutUpdateIgnoreNotification")))}}function rt(n,t){n._focusableItem.attr(ti,"-1"),n._focusableItem=t,t.attr(ti,"0")}function ki(n,t){if(t&&t.length!==0){for(var c=t.slice(0),o=n.data.children,r,l=[],a,s,f,e,i=1,v=o.length;i<v;i++)if(r=c.indexOf(o[i].data),r>-1&&(l.push(i),c.splice(r,1)),c.length===0)break;for(i=l.length-1;i>=0;i--)r=l[i],a=o[r],o.splice(r,1),s=a._view,f=s.getView().parents(u),f.attr(ti)==="0"&&(e=f.next(h),e.length||(e=f.prev(h)),e.length?rt(n,e):n._focusableItem=null),f.remove(),s.parent=null,y(s),y(a);nt(n)}}function di(n,t){if(!n._collectionPromise){var r=t.action,i=t.items;r===ft.add?tt(n,i,t.newStartingIndex,!0):t.action===ft.remove&&ki(n,i)}}function et(n,t){st(hi,{listView:n,isLoading:t})}function kt(n,t,i){n._collection&&(n._collectionPromise=null,o(s.listViewLoadDataLoaded),tt(n,t,i))}function dt(n){var t=n._collection,r=t.state,u=n._ulElement,i;u.next("."+vs).remove(),et(n,!0),r===c.loading?(i=n._collectionPromise=t.load(!0)).then(function(){n._collectionPromise===i&&kt(n,t.data)},function(){}):(i=n._collectionPromise=t.loadMore(!0)).then(function(t){n._collectionPromise===i&&kt(n,t.items,t.startIndex)},function(){})}function gt(n){for(var i=n.data.children,r,t=i.length-1;t>=1;t--)r=i[t],y(r._view),y(r);i.length=1}function gi(n){var t=n._collection.state;t!==c.idle&&(t===c.loading&&(n._ulElement.children(u).remove(),gt(n),n._focusableItem=null),dt(n))}function nr(n){var f=n._ulElement,e=n._collection.selectedItem,t,r;n._collectionPromise||(e&&(t=n._selectingElement,n._selectingElement=null,t||f.children(u).each(function(){return(r=i(this),r.data(v)===e)?(t=r,!1):!0})),t&&t.hasClass(br)||(f.find(u+"."+br).removeClass(br),t&&t.addClass(br)),t&&rt(n,t))}function ot(n){var t=n._collection,r=t.state===c.idle;!t.loadError&&(!r||t.canLoadMore)?n._loadingIndicator||(n._loadingIndicator=i("<div class='"+sv+"'><\/div>").insertAfter(n._ulElement)):n._loadingIndicator&&(n._loadingIndicator.remove(),n._loadingIndicator=null)}function d(n){return n._ulElement.children(h)}function tr(n,r,u){var s=d(n),o=s.length,f=s.index(r),e=Math.floor(n._ulElement.width()/r.outerWidth(!0));return u===t.nextRow?f+=e:f-=e,f<0?(f+=o+e-o%e,f>o-1&&(f-=e)):f>=o&&(f=f%e),i(s[f])}function fr(t,r){var o,s,h,f,c,e,l,u;t.data._isVStretch||(o=i.mobile.activePage,f=i(n),c=f.scrollTop(),l=r.offset().top-c,s=i("div[data-role='header']",o).outerHeight(),s&&(u=l-s,e=u<0),e||(h=i("div[data-role='footer']",o).outerHeight(),h&&(u=r.outerHeight()-(f.height()-l-h),e=u>0)),e&&f.scrollTop(c+u))}function l(n,i){var u=n._focusableItem,r;if(u&&u.length)switch(i){case t.previousItem:r=u.prev(h),r.length||(r=d(n).last());break;case t.nextItem:r=u.next(h),r.length||(r=d(n).first());break;case t.nextRow:case t.previousRow:r=tr(n,u,i)}else r=d(n).first();!r||!r.length||(rt(n,r),r.focus(),fr(n,r))}function ni(n){var t=n._focusableItem;t&&t.trigger("vclick")}function er(n){var i=n._focusableItem,r,t;i&&(r=i.data(v),t=n._collection,t.selectedItem===r?t.selectedItem=null:ni(n))}function sr(n,r){var u=i.mobile.keyCode,e=r.which,f=n._isTileList;switch(e){case u.UP:f?l(n,t.previousRow):l(n,t.previousItem);break;case u.DOWN:f?l(n,t.nextRow):l(n,t.nextItem);break;case u.LEFT:if(f)l(n,t.previousItem);else return;break;case u.RIGHT:if(f)l(n,t.nextItem);else return;break;case u.SPACE:er(n);break;case u.ENTER:ni(n);break;default:return}r.stopPropagation(),r.preventDefault()}function hr(t){var u=t._collection,f=t._ulElement,e,h;if(u){yu(u,"collectionchange",t,function(n){di(t,n.detail)}),ot(t),or(u,"state",t,function(){gi(t),ot(t)}),or(u,"loadError",t,function(){ot(t)}),or(u,"selectedItem",t,function(){nr(t)}),o(s.listViewLoadStart),e=t._scrollHelper=new r.ui.controls.ScrollHelper(f,t.data),e.addEventListener("scroll",function(){it._currentNavigationOperation||p(t)});f.on("keydown",function(n){sr(t,n)});u.state!==c.idle?dt(t):ri(function(){at(t)},1),t._onWindowResize=function(){p(t)};i(n).on("resize",t._onWindowResize)}}var ii=ut("ShowHeader","RootCollectionControl"),h="li",u="li.msls-li",v="__entity",ei='<div class="msls-vauto '+ke+'"/><div{0}><ul class="msls-listview" data-role="listview" data-inset="true" /><\/div>',g,oi="listViewInitialized",hi="listViewLoading",ci="listViewItemsAdded",ai=r.services.contentItemService,vi=r.ui.controls.ContentItemPresenter,c=r.VisualCollection.State,yi=0,t={nextItem:0,previousItem:1,nextRow:2,previousRow:3};e("ui.controls","ListView",function(n){a.call(this,n)},a,{controlName:"ListView",itemTap:w(),_attachViewCore:function(n){function c(){si(ui,c),pt(function(){hr(t)})}var t=this,f=t._ulElement=fi(t.getView(),"ul"),u=t.data,l=u.children[0],v=t._collection=u.value,e,o,y=u.controlModel,s,h;(e=u.screen.details.getModel(),this._uniqueName=e.name+"-"+u.name+"-"+ ++yi,t._isTileList=y.id===":TileList",o=l.properties[as],t._isTileList&&(f.addClass("msls-tile-list"),f.attr("data-msls-list-name",t._uniqueName)),f.append('<div class="msls-clear msls-empty" />'),t._headerLabel||(t._headerLabel=new r.ui.controls.Text(i("."+ke,t.getView())),s=u.properties[ii],lt(t._headerLabel.getView(),!s,wt),h=new r.data.DataBinding("data.displayName",t,"text",t._headerLabel,yt.oneWayFromSource),h.bind()),t._headerLabel.render(),v)&&(bi(t),vt(ui,c),t._isTileList&&o&&(t._layoutUpdatingCallback=function(n){var u=n.detail,e=u.first().closest("div.ui-page"),r=f.closest("div.ui-page");e.is(r)&&i.mobile.activePage.is(r)&&pi(t)},vt(rr,t._layoutUpdatingCallback)),st(oi,t),a.prototype._attachViewCore.call(t,n))},_customVisualStateHandler:function(n){n.state===k.loading&&(n.custom=!0)},_onBeforeTap:function(n){o(s.listItemClicked);var f=this._ulElement,u=f[0],t=n.target,r=t.parentNode;if(t!==u){while(r!==u)t=r,r=t.parentNode;i(t).hasClass("msls-li")&&wi(this,i(t))}},_onDispose:function(){var t=this,r=t._headerLabel,u=t._globalStyle,f=t._layoutUpdatingCallback;r&&(y(r),t._headerLabel=null),u&&(u.remove(),t._globalStyle=null),f&&(si(rr,f),t._layoutUpdatingCallback=null),y(t._scrollHelper),t.itemTap=null,t._ulElement=null,t._collection=null,t._scrollHelper=null,i(n).off("resize",t._onWindowResize),t._onWindowResize=null,gt(t)}},{_fillTemplate:function(n,t){var u="",f=t.children[0];u=t._isVStretch?' class="msls-vstretch msls-vscroll':' class="msls-vauto',ht(f)||(u+=" "+ra),u+='"',i(pu(ei,u)).appendTo(n),n.addClass(ia)}}),r.ui.controls.ListView.prototype._propertyMappings={properties:{itemTap:"itemTap"}}}(),function(){function c(n){var t=n.data;return!t||!t.isEnabled||t.isReadOnly}function tt(n,t,r){var u=i('<a class="id-element" tabIndex="0" data-role="button" data-icon="arrow-d" data-mini="true" data-iconpos="right" />').appendTo(n),f=i("<div><\/div>").appendTo(u),e=t.children[0];r.idElement=nt(n,u),r.itemViewElement=nt(n,f),!e||ur(f,e,r.itemViewData={})}function it(n){var t=this,u=t._element=rt(t.getView(),n.idElement,".id-element"),f=t.data.children[0],i,e=rt(t.getView(),n.itemViewElement);a.prototype._attachViewCore.call(t,n);u.on("vclick",function(n){u.focus(),ot(t),n.preventDefault()});(io(u),f)&&(i=new r.ui.controls.ContentItemPresenter(e),i.parent=t,i.data=f,i.attachView(n.itemViewData))}function ft(n){n.state===k.loading&&(n.custom=!0)}function et(){var n=this,t=n._visualCollection;!t||n.data.choicesSource||y(t)}function ot(u){if(!c(u)){var e=u.data,ct=e.model,tt=e.children[0],w=u.detailsProperty,it,h=u._visualCollection,rt,ut,ft,nt,et,k,a,ot,ht=!!w.value&&(!w.entity||gc(w)==="ZeroOrOne");h||(h=e.choicesSource,h||(rt=w.getModel(),ut=rt.propertyType,ft=e.screen.details,b(ft.dataWorkspace.details.properties.all()).each(function(n){return b(n.value.details.properties.all()).each(function(n){return n.getModel().entityType===ut&&(nt=n.value),!nt}),!nt}),it=new t(nt),h=new r.VisualCollection(e.screen.details,it),h.load()),u._visualCollection=h),n||(et=vo(function(n){return n.id===":List"}),n={kind:"Collection",view:et[0]}),n.name=ct.name+"AutoGeneratedListView",n.displayName=tt.displayName,n.childContentItems=[tt.model],a=g.createContentItemTree(e.screen,n,e),e.children.pop(),a.__value=h,a.__details=ot=new s(h),a._dictionary.setValue(v,!1),ht&&!o&&(o=f("modalPicker_clear")),au.show({buildContentCallback:function(n){n.addClass("msls-modalpicker"),ds.options.enableModalScrollRegions&&n.addClass(lf);var f=i('<div class="msls-vauto"/>').appendTo(n),s,c=i("<div>").appendTo(n),t;ht&&(s=i('<a href="#"/>').on("touchend",function(){}).on("vclick",function(n){n.preventDefault(),w.value=null,au.close()}).appendTo(i('<div class="msls-modal-picker-clear-container msls-leaf"/>').appendTo(f)).text(o)),f.append(i('<div class="msls-control-header msls-leaf"/>').append(i('<div class="msls-text"/>').append(i('<span class="id-element"/>').text(e.displayName)))),k=new l(c),k.data=a,k.render(),c.removeClass("msls-compact-padding"),t=k.children[0],t.itemTap=new r.BoundCommand("_onItemTap",u,bu(h,[{binding:"selectedItem"}])),gt(t,t.itemTap),st(p,{modalPicker:u,listView:t,clearLink:s})},disposeContentCallback:function(){a.parent=null,y(k),y(a),y(ot)}}).then(function(){st(d,{modalPicker:u})})}}function ht(n){c(this)||(this.detailsProperty.value=n,au.close())}var t,s,l=r.ui.controls.ContentItemPresenter,v=ut("ShowHeader","RootCollectionControl"),p="modalPickerPopupOpened",d="modalPickerPopupClosed",g=r.services.contentItemService,n,o;e(r,"ModalPickerQueryObjectLoader",function(n){sf.call(this),u(this,"_baseQuery",n)},sf,{_getAddedEntities:function(){return this._baseQuery._addedEntities}}),t=r.ModalPickerQueryObjectLoader,fe(t),e(r,"ModalPickerListViewContentItemDetails",function(n){var t=this;u(t,"_visualCollection",n),or(n,"loadError",t,function(){t.dispatchChange("loadError")})},null,{loadError:h(null,function(){return this._visualCollection.loadError}),_onDispose:function(){u(this,"_visualCollection",null)}}),s=r.ModalPickerListViewContentItemDetails,e("ui.controls","ModalPicker",function(n){var t=this;a.call(t,n)},a,{controlName:"ModalPicker",item:w(null,null,!0),_attachViewCore:it,_customVisualStateHandler:ft,_onItemTap:ht,_onDispose:et},{_fillTemplate:tt}),r.ui.controls.ModalPicker.prototype._propertyMappings={value:"item",details:"detailsProperty"},r.ui.controls.ModalPicker.prototype._editableProperties={item:"value"}}(),function(){function gt(){n.location.replace(n.location.href.replace(/#.*/,""));return}function tu(){var r=this;t=i("body"),t.attr("data-theme")||t.attr("data-theme",li),i.each(wi,function(n,t){i.mobile.transitionHandlers[t]=df});i(n).on("pagebeforechange",function(n,t){ou(r,n,t)}).on("pagechange",function(n,t){su(r,n,t)}).on("beforeunload",function(){if(yi&&it.anyNavigationUnitHasChanges())return f("shell_unsaved_message")});i(n).on("updatelayout",function(){if(i.mobile.popup.active){var r=i.mobile.activePage.find(".ui-popup-container.ui-popup-active > .ui-popup"),f,u;r.length&&(f=r[0],u=f._mslsCustomPosition,u?r.popup("reposition",u):r.popup("reposition",{x:n.innerWidth/2,y:n.innerHeight/2}))}});vt(rr,function(){if(it.activeNavigationUnit){var n=it.activeNavigationUnit;n.popup&&pr(r,w(r,n))}}),vt(ss,function(){oi(r)}),vt(oe,function(){si(r)}),vt(kl,function(n){n.detail.name==="saveChanges"&&(yt.addClass(ci),oi(r,50))}),vt(dl,function(n){n.detail.name==="saveChanges"&&(si(r),yt.removeClass(ci))}),vt("modalViewShown",function(){dt++}),vt("modalViewClosed",function(){dt--,k(r)}),vt(rr,function(){var n=i(".ui-page.ui-page-active"),f=gi(r,n[0].id);if(!f.popup){var e=i("div[data-role='header']",n),o=i("div[data-role='footer']",n),t=e.outerHeight().toString()+"px",u=o.outerHeight().toString()+"px";n[0].style.paddingTop!==t&&(n[0].style.paddingTop=t),n[0].style.paddingBottom!==u&&(n[0].style.paddingBottom=u)}}),iu()}function iu(){ot=i("<div id='"+cv+"' class='"+at(na,ye,wt)+"'><\/div>").appendTo(t),h=i("<div id='"+lv+"' class='"+at(na,ye,wt)+"'><div class='msls-progress'><div class='"+ta+"'><\/div><\/div><\/div>").appendTo(t),yt=i("."+ta,h)}function ru(n){var t=this;return new c.Promise(function(i,r){wr().then(function(){uu(t,n,i,r)})})}function uu(t,r,u,f){function l(n){var u,f;return o(s.createPageStart),r.popup&&(u=t._pageIdMapping[i.mobile.activePage[0].id],n.backgroundPageId=u.backgroundPageId?u.backgroundPageId:i.mobile.activePage[0].id),f=ku(t,n),o(s.createPageEnd),ni(n),f}var e,h,a,c,v,y;if(t._initializeMobileOnce&&t.initialize(),r===it.activeNavigationUnit){hf(t,r,u);return}if(h=w(t,r),h){i("#"+h,i.mobile.pageContainer).length===0&&fi(t,h,r),vu(t,i.mobile.activePage[0].id,h,!1,function(){var n=t._pageIdMapping[h];ni(n),u(),o(s.navigationBackEnd)});return}a="",e=cr(t,a),r.screen.details._pageId||(r.screen.details._pageId=e),t._firstPageId?i.mobile.activePage.data(vi,{activeElement:document.activeElement,scrollTop:i(n).scrollTop()}):t._firstPageId=e,c={pageId:e,unit:r},t._pageIdMapping[e]=c,t._pageIdToIndexMapping[e]=r.index,t._initializeMobileOnce?(t._initializeMobileOnce=!1,v=l(c),v.css("opacity",0),g(t,e).then(function(){ie(t,i.mobile.activePage,function(){i(".ui-page-active .ui-header").fixedtoolbar("updatePagePadding"),i.mobile.resetActivePageHeight(),u()})},function(n){f(n)}),i.mobile.initializePage()):(y=r.popupDepth>1?de:r.popup?lu:bs,hu(t,function(){return l(c)},c,y,function(){yu(t,nu),u()},f))}function fu(n){var t=this,i=w(t,n);return new c.Promise(function(n){g(t,i).then(function(){n(),o(s.navigationBackEnd)})})}function bi(n){n._isShellIntroducedNavigation=!0}function di(n){return new c.Promise(function(t){n._completeOnHashChange=t})}function eu(n,t){var r=i.mobile.path.parseUrl(t).hash;return r&&(r=r.replace(/^[^#]*#/,"")),r||(r=n._firstPageId),{id:r,unit:gi(n,r)}}function gi(n,t){var i=n._pageIdMapping[t];return i?i.unit:null}function ou(n,t,r){if(i.mobile.activePage&&(au.isOpen()&&au.close(),typeof r.toPage=="string")){var f=eu(n,r.toPage),u=f.id,e=f.unit;i("#"+u,i.mobile.pageContainer).length===0&&(e?fi(n,u,e):nf(n,u))}}function su(t,r,u){var f=i.mobile.activePage,e,o=u.options.fromPage,s;!!o&&o.is("."+ca)&&o.remove(),!!f&&f.hasClass(ya)&&ro(f),e=f.data(vi),e&&(i(e.activeElement).focus(),th(i(n),e.scrollTop)),t._completeOnHashChange&&(s=t._completeOnHashChange,t._completeOnHashChange=null,pt(function(){s()})),wi.indexOf(u.options.transition)<0&&st("BrowserNavigationPromise",new c.Promise(function(n){n()}))}function nr(n,t){if(n._isShellIntroducedNavigation)return n._isShellIntroducedNavigation=!1,null;if(a){du(oe,function(){a||os(f("shell_conflicting_operations")).then(function(){gt()})});return}var r=t[0].id,i=n._pageIdMapping[r],u,e=null;return i&&(ni(i),u=i.unit,it.navigationInProgress||(e=it.synchronizeAfterBrowserNavigation(u))),st("BrowserNavigationPromise",g(n,r)),e}function hu(n,r,u,f,e,h){lr(),k(n);var l=i.mobile.activePage;c.Promise.join([]).then(function(){return(o(s.transitionPrepare),l.addClass(ks),t.addClass(f+" "+ge),f===lu)?(lt(ot,!0,cu,wt),ut(1)):ut(167)}).then(function(){return f===lu?ut(1):null}).then(function(){var a=r(),u=[];l.removeClass(cf),t.removeClass(ge),u.push(g(n,a[0].id)),u.push(di(n)),c.Promise.join(u).then(function(){e()},function(n){h(n)}),ki(),o(s.changePageStart),bi(n),i.mobile.changePage(a,{transition:f,reverse:!1}),o(s.changePageEnd)}).then(null,function(n){h(n)})}function g(t,r){return new c.Promise(function(t,u){i(n).one("pageshow",function(){var n=i.mobile.activePage;!n||n.length!==1||n[0].id!==r?u(f("shell_nav_failed")):(t(),o(s.navigationEnd))})})}function w(n,t){var r;return i.each(n._pageIdMapping,function(n,i){i.unit===t&&(r=n)}),r}function vu(t,i,r,u,e){var l=t._pageIdToIndexMapping[i],a=t._pageIdToIndexMapping[r],h;if(typeof l=="undefined"||typeof a=="undefined"){gt();return}a!==l?(h=[],h.push(di(t)),u?t._stopHashChangePropagationOnce=!0:h.push(g(t,r)),c.Promise.join(h).then(function(){var i=n.location.hash.replace(/^#/,"")||t._firstPageId;i===r?pt(function(){e()}):e(f("shell_nav_failed"))},function(n){e(n)}),o(s.goUrlStart),bi(t),n.history.go(a-l),o(s.goUrlEnd)):e()}function yu(n,t){var r=-1,f,u,e;t=t||1,it.activeNavigationUnit.popupDepth||!i.mobile.activePage||(f=n._pageIdToIndexMapping[i.mobile.activePage[0].id],r=f-t),r>0&&(u=it.navigationStack[r],e=w(n,u),i("#"+e,i.mobile.pageContainer).remove(),u.cleanPageUiControls())}function pu(n){var t=w(this,n),o=this._pageIdMapping[t],u,r,f,e;t&&(delete this._pageIdMapping[t],u=i("#"+t,i.mobile.pageContainer),u.remove()),r=o.unit.task,f=lo(this._pageIdMapping).filter(function(n){return n.unit.task===r}),y(n),f.length||(e=r.screen,y(r),y(e.details))}function ni(n){i(".ui-page").removeClass(va);var t=n.backgroundPageId;t&&i("#"+t).addClass(va),n.unit.popup||lt(ot,!1,cu,wt)}function wu(n){return n.which===i.mobile.keyCode.ESCAPE?n.target.nodeName.toLowerCase()!=="select":!1}function bu(n){var t=n.which;return t===83&&n.ctrlKey}function tr(n,t){var r=t._buttonsNeeded,u;r&&(u=r.showSaveDiscard||r.showOkCancel,u||r.showOk)&&n.keydown(function(n){if(!it._currentNavigationOperation&&!i.mobile.popup.active)return u&&wu(n)?(it.cancelChanges(),!1):bu(n)?(it.commitChanges(),!1):void 0})}function ku(n,t){var r=t.pageId,i=t.unit,f=t.unit.contentItemTree.kind===et.tab;return i.popup?sf(n,r,i):fi(n,r,i)}function ti(){var n=i("<div data-role='page'><\/div>");return n.attr("data-theme",t.jqmData("theme")||li),n}function ui(n,t){n.attr("id",t),n.attr("data-url",t)}function fr(n,t,u){var f=new r.ui.controls.ContentControl(t),o=".msls-large-icon:not('.msls-collapsed')",e,s;u=tf(u),f.dataTemplate=u,f.data=n,f.render(),n.registerPageUiControl(f),e=i(".msls-buttons-row",t),s=i(o,e),s.length>0&&yf(e,o)}function gu(n,t){var u=i("<div class='msls-header' data-role='header' data-position='fixed' data-update-page-padding='false' data-tap-toggle-blacklist='"+kr+"'><\/div>"),f=ii[ty],r=yr(t),e,o,s;e=r.showSaveDiscard?"screenSaveDiscardTemplate":r.showOk?"screenOkTemplate":r.showOkCancel?"screenOkCancelTemplate":null,o=r.showLogo?"screenLogoTemplate":r.showBackClose?"screenBackTemplate":null,s=r.showLogOut?"screenLogoutTemplate":null,f=f.replace("BUTTONS-PLACEHOLDER",ii[e]||"").replace("LOGO-BACK-PLACEHOLDER",ii[o]||"").replace("LOGOUT-PLACEHOLDER",ii[s]||""),fr(t,u,f);i("."+pa+" img",u).on("error",function(){i("."+pa).addClass(wt)});return u}function fi(n,r,u){var f=ti();ui(f,r);var s=gu(n,u).appendTo(f),o=i(ii[aa]).appendTo(f),e=i(ii[uy]).appendTo(f),h=s.add(e);o.focusin(function(n){h.each(function(){var t=i(this).data("mobile-fixedtoolbar");!!t&&i(n.target).is(t.options.hideDuringFocus)&&i(this).fixedtoolbar("hide")})});e.on("updatelayout",function(){var t=f[0].style,i=e.outerHeight().toString()+"px";t.paddingBottom!==i&&(t.paddingBottom=i)});return f.appendTo(t),er(n,f,o,u),ei(f,u),tr(f,u),f}function nf(n,r){var u=ti().addClass(ca);return ui(u,r),i("<h2 class='msls-page-expired-message'>"+f("shell_page_expired_message")+"<\/h2>").appendTo(u),u.appendTo(t)}function ei(n,t){var r=t.popup||t.contentItemTree._isVStretch,u=i(".msls-content",n);t.popup||lt(n,r,ae,ve),lt(u,r,ae+" "+lf,ve),r||(n[0].style.height="",u[0].style.height="")}function tf(n){return n.replace("TAB-BUTTONS-PLACEHOLDER",ii[iy])}function er(n,t,i,r){sr(n,t,r,!1).addClass(we),hr(n,t,r,!1).addClass(be),r.popup||!bt||kf(t,r)}function or(n,t,i,u){o(s.createPageControlsStart);var f=new r.ui.controls.ContentItemPresenter(i);return f.data=t,f.attachView(u),o(s.createPageControlsEnd),f}function sr(n,t,r,u){var c=r.pageName,l=i("."+oa,t),a=r.contentItemTree,v=a.model,o=r.contentItemTree,e,f,s,h;return e=hi(v,"__tabCache",function(n){var t=i("<div class=''><\/div>").addClass(sa).attr(ft,c);return ur(t,o,n),t}),f=e.$element,s=e.templateData,f.appendTo(l),h=or(n,o,f,s),r.registerPageUiControl(h),u&&f.trigger("create"),f}function hr(n,t,u,f){function y(n){var t=i(n.target);nh(e,l,t)}for(var a=u.pageName,v=i("."+ha,t),w=u.contentItemTree,b,k,c=u.contentItemTree.commandItems||[],l=".msls-ctl-command-bar-button:not('.msls-collapsed')",e=i(ii[ey]).appendTo(v).attr(ft,a),o=0;o<c.length;o++){var p=c[o],s=i('<div tabindex="-1"><\/div>'),h=new r.ui.controls.ContentItemPresenter(s);h.data=p,h.render(),e.append(s),u.registerPageUiControl(h);s.on("updatelayout",y)}return f&&e.trigger("create"),yf(e,l),e}function rf(n){var r=ti().addClass(ya),f=i("<div class='msls-dialog-frame'><\/div>").appendTo(r),e=t.jqmData("theme")||li,u=i("<div class='msls-dialog-inner-frame ui-body-"+e+" msls-rows-layout msls-fixed-height'><\/div>").appendTo(f),o=i("<div class='msls-header msls-vauto msls-hauto' data-role='header'><\/div>").appendTo(u),s=i(ii[aa]).appendTo(u),h;return h=i(ii[fy]).appendTo(u),n.headerElement=nt(r,o),n.pageContentContainerElement=nt(r,s),r}function uf(n,r){var e=t.jqmData("theme")||li,u=i(ii[dr]).attr("data-theme",e),f=i(".msls-popup-content",u);return ur(f,n,r),r.contentContainerElement=nt(u,f),u}function ff(n){return rf(n)}function ef(n,t,i){var e=rt(n,i.headerElement),r=yr(t),u,f;f=r.showSaveDiscard?"dialogSaveDiscardTemplate":r.showOk?"dialogOkTemplate":r.showOkCancel?"dialogOkCancelTemplate":r.showBackClose?"dialogCloseTemplate":null,u=ii[ry].replace("BUTTONS-PLACEHOLDER",ii[f]||""),fr(t,e,u)}function of(n,t,r,u){var l=u.model,e,f,o,s,h,c;return e=hi(l,"__popupCache",function(n){return uf(u,n)}),f=e.$element,o=e.templateData,s=i(dv,r),f.appendTo(s).attr("id",t).attr(ai,u.name),h=rt(f,o.contentContainerElement),c=or(n,u,h,o),it.activeNavigationUnit.registerPageUiControl(c),f}function sf(n,i,r){var f,u,e,o;return f=hi(n,"_blankScreenDialogFrameCache",function(n){return ff(n)}),u=f.$element,e=f.templateData,ef(u,r,e),ui(u,i),u.appendTo(t),o=rt(u,e.pageContentContainerElement),er(n,u,o,r),ei(u,r),tr(u,r),u}function cr(n,t){for(var i,u=4294967296,r;!i||i in n._pageIdToIndexMapping;)r=Math.floor(Math.random()*6+10).toString(16),i=t+r+Math.floor(Math.random()*u).toString(16);return i}function hf(n,t,r){var s=t.pageName,l=n._pageIdMapping[w(n,t)],u=i("#"+l.pageId),h=b(i("."+sa,u).toArray()).where(function(n){return i(n).attr(ft)===s}).first(),c=b(i("."+ny,u).toArray()).where(function(n){return i(n).attr(ft)===s}).first(),f=!1,e,o;if(h)e=i(h);else{lr();try{e=sr(n,u,t,!0),f=!0}finally{ki(!1)}}if(c)o=i(c);else{lr();try{o=hr(n,u,t,!0),f=!0}finally{ki(!1)}}var a=i("."+we,u),v=e,y=i("."+be,u),p=o,k=i("."+ha+", ."+gv,u);ei(u,t),ne(n,a,v,y,p,k,f,r)}function af(){function t(){n.location.href=bf+"/LogOut.aspx"}it.anyNavigationUnitHasChanges()?kt.show({message:f("shell_unsaved_message"),title:f("shell_save_title"),buttons:[{text:f("shell_logout_btn"),icon:"check",result:p.yes},{text:f("shell_stay_btn"),icon:"back",result:p.no}],defaultResult:p.no}).then(function(n){n===p.yes&&(yi=!1,t())}):t()}function oi(n,t){a++,ar(n,t)}function si(n){a--,a<=0&&(d=!1,l=null,vr(n))}function k(n){l=0,ar(n)}function ar(n,t){if(a>0){var i=t?t:gr,r=Date.now()+i;(!l||r<l)&&(l=r,ri(function(){vf(n)},i+1))}}function vf(n){!!l&&Date.now()>=l&&!dt&&a>0&&(d=!0,vr(n))}function vr(){d?(h.hasClass(wt)&&(o(s.progressShow),h.removeClass(at(wt,cu))),ri(function(){d&&h.addClass(cu)},1)):h.hasClass(wt)||(o(s.progressHide),h.removeClass(cu),ri(function(){d||h.addClass(wt).removeClass(cu)},200))}function pf(n){var t=this;oi(t,50),n._thenEx(function(){si(t)})}function yr(n){var r=n.task,i=n.index===0,t={};return n.isBrowseMode()?t.showOk=n.boundaryOption===tt.nested:(t.showOkCancel=n.boundaryOption===tt.nested,t.showSaveDiscard=!t.showOkCancel),n.boundaryOption===tt.none&&(t.showOk=t.showOkCancel=t.showSaveDiscard=!1),t.showBackClose=!t.showSaveDiscard&&!t.showOk&&!t.showOkCancel&&!i,i&&(t.showLogo=!0),t.showLogOut=i,n._buttonsNeeded=t,t}function kf(u,e){var c,o,s,l,h,a;pi||!bt.chromeBackgroundColor||!bt.chromeLinkFontColor||(pi=!0,c="<style> .msls-sharepoint-chrome { background-color: #"+bt.chromeBackgroundColor+"; }\r\n .msls-sharepoint-chrome a.msls-sharepoint-chrome-link, .msls-sharepoint-chrome a.msls-sharepoint-chrome-link:visited, .msls-sharepoint-chrome a.msls-sharepoint-chrome-link:hover, .msls-sharepoint-chrome a.msls-sharepoint-chrome-link:active  { color: #"+bt.chromeLinkFontColor+"; } <\/style>",t.prepend(c)),o=i("<div class='"+at(vy,ve)+"'><\/div>"),s="createSharePointChrome",n[s]&&typeof n[s]=="function"?n[s](o,bt.hostUrl):(l=i("<a href='"+bt.hostUrl+"' class='"+py+"' target='_top'>"+f("shell_back_to_sharePoint_home_site")+"<\/a>"),l.appendTo(o)),h=new r.ui.controls.ContentControl(o),a=i("div[data-role='header']",u),h.render(),o.prependTo(a),e.registerPageUiControl(h),t.addClass(yy)}function pr(t,r){function s(n,t){var i=parseFloat(n[t]);return i>0?i:0}var nt=document.getElementById(r),h=nt.getElementsByClassName("msls-dialog-frame")[0],a,v,d,y,p,g,o,w;if(h){var f=n.getComputedStyle(h),b=h.style,c=i(n).height(),l=i(n).width(),k,u={},e,tt=s(f,"paddingTop")===0;tt?(u.height="100%",u.marginTop=0):(a=s(f,"maxHeight"),v=a>0?Math.min(a,c):c,u.height=v,k=v,d=Math.max(0,c-k)/2,u.marginTop=d),y=s(f,"maxWidth"),p=y>0?Math.min(y,l):l,u.width=p,f.marginLeft!=="auto"&&(g=Math.max(0,l-p)/2,u.marginLeft=g);for(e in u)o=u[e],w=typeof o=="string"?o:o.toString()+"px",w!==b[e]&&(b[e]=w)}}function df(n,t,u,f){function s(){e.resolve()}var o=r.shellView,e=new i.Deferred;switch(n){case bs:gf(o,n,t,u,f,s);break;case lu:case de:te(o,n,t,u,f,s);break;default:e.reject("Unexpected transition name: "+n)}return e.promise()}function gf(t,i,r,u,f,e){var o=!r;lr(),ct(t,{transitionName:i,stage1Delay:o?0:167,stage3Delay:167,reverse:r,$ins:u,$outs:f,onStage2:function(){return n.scrollTo(0,0),u.addClass(cf),o&&(ki(!1),v(u,u,!0,!0)),!0},onCleanup:function(){return f.removeClass(cf),r&&(ki(!1),v(u,null,!1,!1)),nr(t,u)},onComplete:e})}function ne(n,t,r,u,f,e,o,s){var l=ay,h=t.parent(),a=o?0:u.outerHeight(),c=h.hasClass(lf);c&&h.removeClass(lf),ct(n,{transitionName:l,reverse:!1,stage1Delay:167,stage3Delay:167,$ins:i().add(r).add(f),$outs:i().add(t).add(u),onStage2:function(){return o=o||t.hasClass(ae)!==r.hasClass(ae)||a!==f.outerHeight(),v(r,o?null:r,!0,o),e.each(function(){i(this).data("mobile-fixedtoolbar")&&i(this).fixedtoolbar("show")}),!0},onStage3:function(){r.addClass(we),f.addClass(be)},onCleanup:function(){t.removeClass(we),u.removeClass(be),c&&h.addClass(lf)},onComplete:s})}function te(n,t,i,r,u,f){var e,o=!i;t===lu?e=!0:t===de&&(e=!1,t=lu),lr(),ct(n,{transitionName:t,reverse:i,stage1Delay:0,stage3Delay:o?167:267,$ins:r,$outs:u,onStage1:function(){r.addClass(cf)},onStage2:function(){return o&&(pr(n,r[0].id),ki(!1),v(r,r,!0,!0)),!0},onStage3:function(){i&&e&&ot.removeClass(cu)},onCleanup:function(){return u.removeClass(cf),i&&(ki(!1),v(r,null,!1,!1)),nr(n,r)},onComplete:f})}function ie(n,t,r){lr();var u=t;ct(n,{transitionName:ly,stage1Delay:0,stage3Delay:167,reverse:!1,$ins:u,$outs:br,onStage1:function(){u.css("opacity","")},onStage2:function(){ki(!1),v(u,u,!0,!0),i(la).remove()},onCleanup:function(){},onComplete:r})}function ht(n){return c.Promise.join([n?n():null])}function ut(n){if(n===0)return null;var t=n;return o("StartDelay_"+t.toString()),new c.Promise(function(n){ri(function(){o("EndDelay_"+t.toString()),n()},t)})}function ct(n,i){o(s.transitionStart),k(n);var f=i.transitionName,r=i.$ins,u=i.$outs,h=i.onStage1,l=i.onStage2,a=i.onStage3,v=i.onCleanup,e=i.onComplete,y=i.stage1Delay,p=i.stage3Delay;c.Promise.join([]).then(function(){return o(s.transition_Stage1Start),ht(h)}).then(function(){return u.addClass(ks),r.addClass(wa),lt(t,i.reverse,ba),t.addClass(f+" "+ge),ut(y)}).then(function(){return o(s.transition_Stage2Start),k(n),t.removeClass(ge).addClass(ka),u.addClass(ye),r.removeClass(ye),ht(l)}).then(function(){return o(s.transition_Stage3Start),k(n),ht(a)}).then(function(){return t.removeClass(ka).addClass(da),ut(p)}).then(function(){return o(s.transition_CleanupStart),k(n),ht(v)}).then(function(){no(t,f,da,ba),no(u,ks),no(r,wa)}).then(function(){o(s.transitionEnd),e&&e()})}function v(n,t,i,r){!!n&&n.length>0&&!n[0].msls_attachedLabelUpdated&&(n[0].msls_attachedLabelUpdated=!0,wf(n)),i?nv(t,!r):ir(t,!r)}function re(t,r,u){var e=this;return i.mobile.popup.active?c.Promise.wrapError(f("shell_existingPopup")):new c.Promise(function(f){function p(n){return n.target.id!==a?!0:!1}var w=i.mobile.activePage,b=i(document.activeElement),k=i(".msls-popup",w),a,c,y,l;i.each(k,function(n,r){return i(r).attr(ai)===t.name?(c=i(r),a=r.id,!1):!0}),c?c.removeClass(wt):(o(s.createPopupStart),a=cr(e,"popup-"),c=of(e,a,w,t),o(s.createPopupEnhance),c.trigger("create"),o(s.createPopupEnd)),o(s.openPopupStart),lr();i(n).one("popupbeforeposition",function(n){p(n)||(ki(!1),v(c,null,!0,!0))});i(n).one("popupafteropen",function(n){p(n)||(f(),ro(c.parent()),o(s.openPopupEnd))});c.one("popupafterclose",function(n){p(n)||(c.addClass(wt),e.commitActiveElement(),b.focus(),r(),o(s.closePopupEnd))});c.popup(),y={},u&&u.originalEvent?(l=u.originalEvent,y.x=l.pageX,y.y=l.pageY,c[0]._mslsCustomPosition={x:l.pageX,y:l.pageY}):c[0]._mslsCustomPosition=null,c.popup("open",y)})}function wr(){var t=i.mobile.popup.active;return t?new c.Promise(function(r){i(n).one("popupafterclose",function(){pt(r)});t.close()}):c.Promise.as()}function ue(){var n=document.activeElement,t;n&&(t=i(n),(n.tagName!=="INPUT"||!t.closest(".msls-ctl-text-box").length)&&(n.tagName!=="TEXTAREA"||!t.closest(".msls-ctl-text-area").length)||i(n).trigger("change"))}function at(){return Array.prototype.join.call(arguments," ")}function hi(n,t,r){var h=document.createElement("div"),f,e,u=n[t];return u?(f=u.templateData,h.innerHTML=u.html,e=i(h.firstChild)):(f={},u={templateData:f},n[t]=u,o(s.createTemplateStart),e=r(f),o(s.createTemplateEnd),e.appendTo(i(h)),u.html=h.innerHTML),e.detach(),{$element:e,templateData:f}}var fe="msls-screen",ee="msls-dismiss-dialog",ft="msls-tab-name",t,br=i([]),ot,h,yt,ci="msls-progress-icon msls-progress-save-icon",kr="a, button, input, select, textarea, .ui-header-fixed, .ui-footer-fixed, .ui-popup, li",ai="data-msls-name",dr="popupTemplate",vi="msls-previous-uiState",gr=2e3,l=null,dt=0,d=!1,yi=!0,a=0,pi=!1,nu=5,wi=[lu,de,bs];n.location.hash&&gt(),i.mobile&&(i.mobile.autoInitializePage=!1,i.mobile.pushStateEnabled=!1),e(r,"ShellView",function(){this._pageIdMapping={},u(this,"_pageIdToIndexMapping",{})},null,{_nextPageId:1,_firstPageId:null,_initializeMobileOnce:!0,initialize:tu,navigate:ru,awaitBrowserNavigation:fu,onNavigationUnitClosed:pu,logout:af,showProgress:pf,showPopup:re,closePopup:wr,commitActiveElement:ue}),oh=new r.ShellView,u(r,"shellView",oh),u(r.shell,"shellView",oh)}(),function(){function u(t){var i=this;n.call(i,t)}function f(){if(!t){var n=this.entity,r=null;!n||!this.valuePropertyName||(r=n[this.valuePropertyName]),i(this,r)}}function i(n,i){t=!0;try{var r,u=n._textElement;n._isViewCreated&&!!u&&(r=s(n,i),u.text(n.text=r))}finally{t=!1}}function o(n){var u=n.entity,f,r,t=null,e;!u||n.valueProperty||(f=u.details.getModel(),r=ht(f,":@SummaryProperty"),!r||(t=r.property),t&&(n.valueProperty=t,n.valuePropertyName=ni(t.name),e=n.data,e.dataBind("value."+n.valuePropertyName,function(t){i(n,t)})))}function s(n,t){var r,i,u="";return n.valueProperty&&(r=nf(n.valueProperty,":@SupportedValue"),!r||(i=b(r).first(function(n){return n.value===t}),!i||(u=vr(i.displayName))),i||(u=is(t,n.valueProperty))),u}var n=r.ui.controls.Text,t;e("ui.controls","Summary",u,n,{controlName:"Summary",entity:w(function(){o(this)}),valueProperty:null,valuePropertyName:null,_refreshView:f},{_fillTemplate:n._fillTemplate,_skipEnhance:!0}),r.ui.controls.Summary.prototype._propertyMappings={value:"entity",properties:{tap:"tap"}}}(),function(){function ai(n){var t,i,f,r=0,u=n.children.length,e=n.controlModel;if(n._isHStretch){for(t=0;t<u;t++)i=n.children[t],f=i.properties[he],i._isHStretch&&r++;if(r>0&&r<u)return!0}return!1}function vi(n,t){var r=n._collection,i;n._selectingElement=t,i=t.data(c),r.selectedItem=i,n._selectingElement=null,o(s.tableSelectedItemChanged)}function yi(n){var r=n._tbodyElement,u=r[0];uo(r,n,"itemTap","ItemTapPromise",function(n){return i(n.target).closest(t).length}),r.keypress(function(n){n.keyCode===i.mobile.keyCode.ENTER&&i(n.target).trigger("vclick")})}function ot(n){o(s.tableLoadEnd),v(n),d(n,!1)}function ht(n){var t=n._collection,i=n.data.children.length-1,r=t.data;i<r.length?(d(n,!0),p(n,r.slice(i,i+t._loader._pageSize))):t.canLoadMore?(o(s.tableLoadLoadMore),t.loadMore(!0)):ot(n)}function h(n){var i=n._collection,t,r;i&&i.state===u.idle&&(t=n._scrollHelper,r=n.data._isActivated&&n._tableElement.height()-t.viewTop<2*t.viewHeight,r?ht(n):ot(n))}function v(n){var t=n._tableElement,r=t.next("."+ys);n.data.children.length===1?(l||(l="<div class='"+ys+"'>"+f("listView_no_items")+"<\/div>"),r.length||t.after(l),n.focusableItem=i()):(r.remove(),n.focusableItem.length===0&&(n.focusableItem=n.getItems().first()))}function ct(n){var t,r;return te(n.controlModel)?b(n.children).any(ct):(t=dr(n),t&&(r=pf[t],i.isFunction(r)))?!r._skipEnhance:!0}function pi(n){for(var f=[],t=0,r=0,e=n.find("thead th"),u,s,t=0;t<e.length;t++)f.push(i("<b class='ui-table-cell-label'>"+e[t].innerHTML+"<\/b>"));var o=n.find("tbody > tr"),h=o.length,c=f.length;for(t=0;t<h;t++)if(u=i(o[t].children),s=u.length,u.first().children("b.ui-table-cell-label").length===0)for(r=0;r<s&&r<c;r++)u.eq(r).prepend(f[r].clone())}function p(r,u,f,e){function lt(){si(ui,lt),pt(function(){h(r)})}var l,w=u.length-1,y=r._tableElement,rt=r.data,b=rt.children[0],at=f===0&&y.find(t).length!==0,k,p,yt,d=r._rowTemplate,ut=r._rowTemplateData,a,g,ot=i(".msls-empty",y),nt=[],ht=[],tt,ft=y.find("tbody")[0],et,it;if(b){if(w>=0){for(d||(ut=r._rowTemplateData={},d=r._rowTemplate=n.document.createElement("tr"),a=i(d),k=a,a.attr("tabIndex","-1"),a.attr("data-icon","false"),yt=i.mobile.getInheritedTheme(y,li),a.addClass("msls-tr msls-style ui-shadow ui-tr"),ur(k,b,ut),r._itemHasAttachedLabel=!!a.find("."+af).length,r._shouldEnhance=ct(b)),tt=document.createDocumentFragment(),l=0;l<=w;l++)ht.push(oi.cloneContentItemTree(b,rt,u[l])),p=d.cloneNode(!0),nt.push(p),tt.appendChild(p);for(et=at?ft.firstChild:ot.length>0?ot[0]:null,et?ft.insertBefore(tt,et):ft.appendChild(tt),l=0;l<=w;l++)a=i(p=nt[l]),a.data(c,u[l]),k=i(p),g=new hi(k),g.parent=r,g.data=ht[l],g.attachView(ut);it=i(nt),o(s.tableLoadEnhanceView),r._shouldEnhance&&it.trigger("create"),pi(y),st(ei,r)}o(s.tableLoadApplyEnd),e||(w>=0?vt(ui,lt):pt(function(){h(r)})),v(r),nt.length>0&&(r._itemHasAttachedLabel&&wf(it),ir(it,!0),rh&&!rt._isVStretch&&(ir(),st("LayoutUpdateIgnoreNotification")))}}function wi(n,i){var f,s;if(i&&i.length!==0){for(var h=i.slice(0),e=n.data.children,u,c=[],l,o,r=1,a=e.length;r<a;r++)if(u=h.indexOf(e[r].data),u>-1&&(c.push(r),h.splice(u,1)),h.length===0)break;for(r=c.length-1;r>=0;r--)u=c[r],l=e[u],e.splice(u,1),o=l._view,f=o.getView(),f.attr(ti)==="0"&&(s=f.next(t),s.length||(s=f.prev(t)),n.focusableItem=s),f.remove(),o.parent=null,y(o),y(l);v(n)}}function bi(n,t){if(!n._collectionPromise){var r=t.action,i=t.items;r===ft.add?p(n,i,t.newStartingIndex,!0):t.action===ft.remove&&wi(n,i)}}function d(n,t){st(ii,{table:n,isLoading:t})}function at(n,t,i){n._collection&&(n._collectionPromise=null,o(s.tableLoadDataLoaded),p(n,t,i))}function bt(n){var t=n._collection,i=t.state,r=n._tableElement;r.next("."+ys).remove(),d(n,!0),i===u.loading?(n._collectionPromise=t.load(!0)).then(function(){at(n,t.data)},function(){}):(n._collectionPromise=t.loadMore(!0)).then(function(t){at(n,t.items,t.startIndex)},function(){})}function kt(n){for(var i=n.data.children,r,t=i.length-1;t>=1;t--)r=i[t],y(r._view),y(r);i.length=1}function ki(n){var i=n._collection.state;i!==u.idle&&(i===u.loading&&(n._tbodyElement.children(t).remove(),kt(n)),bt(n))}function di(n){var f=n._tbodyElement,e=n._collection.selectedItem,r,u;n._collectionPromise||(e&&(r=n._selectingElement,n._selectingElement=null,r||f.children(t).each(function(){return(u=i(this),u.data(c)===e)?(r=u,!1):!0})),r&&r.hasClass(br)||(f.find(t+"."+br).removeClass(br),r&&(r.addClass(br),n.focusableItem=r,n.focusCurrentItem())))}function g(n){var t=n._collection,r=t.state===u.idle;!t.loadError&&(!r||t.canLoadMore)?n._loadingIndicator||(n._loadingIndicator=i("<div class='"+hv+"'><\/div>").insertAfter(n._tableElement)):n._loadingIndicator&&(n._loadingIndicator.remove(),n._loadingIndicator=null)}function gi(t){var f=t._collection,e,c;if(f){yu(f,"collectionchange",t,function(n){bi(t,n.detail)}),g(t),or(f,"state",t,function(){ki(t),g(t)}),or(f,"loadError",t,function(){g(t)}),or(f,"selectedItem",t,function(){di(t)}),o(s.tableLoadStart),e=t._scrollHelper=new r.ui.controls.ScrollHelper(t._tableElement,t.data),e.addEventListener("scroll",function(){it._currentNavigationOperation||h(t)}),t.keyboardDispatcher=oo.keyBindListNavigation(t),f.state!==u.idle?bt(t):ri(function(){ht(t)},1),t._onWindowResize=function(){h(t)};i(n).on("resize",t._onWindowResize)}}function nr(n){for(var t,f=n.length,r=0,u=0,i=0;i<f;i++)t=n[i],t.widthSizingMode!==nt&&(r+=t.properties[et]),u+=t._isHStretch?1:0;return u>0?r:0}function tr(n,t,i){n.html(t.displayName);var r=t.properties,u;return t.widthSizingMode===nt?n.css("width",r[uh]+"px"):i>0&&(u=100*r[et]/i,n.css("width",u+"%")),r[tt]&&n.css("min-width",r[tt]+"px"),r[rt]&&n.css("max-width",r[rt]+"px"),n}var dt=ut("ShowHeader","RootCollectionControl"),t="tr.msls-tr",c="__entity",gt="<div class='msls-vauto "+ke+"'/><div{0}><table class='msls-table ui-responsive table-stripe' data-role='table' data-inset='true' role='grid'><thead role='rowgroup'><\/thead><tbody role='rowgroup'><\/tbody><\/table><\/div>",l,ni="tableInitialized",ii="tableLoading",ei="tableItemsAdded",nt=ci.fixedSize,tt=ut("MinWidth"),rt=ut("MaxWidth"),et=ut("WeightedColumnWidth","ColumnsLayout"),oi=r.services.contentItemService,hi=r.ui.controls.ContentItemPresenter,u=r.VisualCollection.State;e("ui.controls","Table",function(n){oo.call(this,n),this._itemHtmlSelector=t},oo,{controlName:"Table",itemTap:w(),getItems:function(){return this._tbodyElement.children()},_attachViewCore:function(n){function o(){si(ui,o),pt(function(){gi(t)})}var t=this,c=t._tableElement=fi(t.getView(),"table"),l=t._tbodyElement=fi(t.getView(),"tbody"),u=t.data,v=u.children[0],s=t._collection=u.value,h,y=u.controlModel,f,e;(h=u.screen.details.getModel(),t._headerLabel||(t._headerLabel=new r.ui.controls.Text(i("."+ke,t.getView())),f=u.properties[dt],lt(t._headerLabel.getView(),!f,wt),e=new r.data.DataBinding("data.displayName",t,"text",t._headerLabel,yt.oneWayFromSource),e.bind()),t._headerLabel.render(),s)&&(yi(t),vt(ui,o),st(ni,t),a.prototype._attachViewCore.call(t,n))},_customVisualStateHandler:function(n){n.state===k.loading&&(n.custom=!0)},_onBeforeTap:function(t){o(s.tableItemClicked);var e=this._tbodyElement,f=e[0],r=t.target,u=r.parentNode;if(n.getSelection&&n.getSelection().toString().length>0)return!1;if(r!==f){while(u!==f)r=u,u=r.parentNode;i(r).hasClass("msls-tr")&&vi(this,i(r))}return!0},_onDispose:function(){var t=this,r=t._headerLabel,u=t._globalStyle;r&&(y(r),t._headerLabel=null),u&&(u.remove(),t._globalStyle=null),y(t._scrollHelper),t.itemTap=null,t._tableElement=null,t._tbodyElement=null,t._collection=null,t._scrollHelper=null,i(n).off("resize",t._onWindowResize),t._onWindowResize=null,kt(t)}},{_fillTemplate:function(n,t){var u=" class='",s=t.children[0];u+=t._isHStretch?" msls-hstretch":" msls-hauto",u+=t._isVStretch?" msls-vstretch msls-vscroll":" msls-vauto",ai(s)||(u+=" "+ra),u+="'",i(pu(gt,u)).appendTo(n),n.addClass(ia),t._isHStretch&&n.find("table").addClass("msls-hstretch");for(var o=i("<tr>"),e=t.children[0].children,h=e.length,c=nr(e),f=0;f<h;f++)e[f].isVisible&&o.append(tr(i("<th>"),e[f],c));o.appendTo(n.find("thead"))}}),r.ui.controls.Table.prototype._propertyMappings={properties:{itemTap:"itemTap"}}}(),function(){function n(n){r.ui.controls.TextBox.call(this,n)}function t(n,t,r){var u='<input type="url" class="id-element" data-mini="true" />';i(u).appendTo(n),r.idElement=nt(n,fi(n,".id-element"))}e("ui.controls","WebAddressEditor",n,r.ui.controls.TextBox,{controlName:"WebAddressEditor"},{_fillTemplate:t,_isFormElement:!0}),r.ui.controls.WebAddressEditor.prototype._propertyMappings={stringValue:"text",maxLength:"maxLength",properties:{placeholderText:"placeholderText"}}}(),function(){function n(n){r.ui.controls.Text.call(this,n)}function t(){var f=this.text,t=this.text,u=this._textElement,n,r;if(this._isViewCreated&&typeof f=="string"){n=f.match(/(.*?[^,]), (.+)/),n&&(f=n[2],t=n[1]),u.text(f),t=i.trim(t),n=t.match(/^https?:\/\/(.+)/i),n||(t="http://"+t),u.removeAttr("href"),u.removeClass("ui-link");try{r=document.createElement("a"),r.href=t,n=r.href.match(/^(https?:\/\/.+?)\/(.*)/i),r.href.match(/^https?:\/\/\//i)||r.href.toLowerCase()!==t.toLowerCase()&&(!n||(n[1]+n[2]).toLowerCase()!==t.toLowerCase())||(u.attr("href",r.href),u.addClass("ui-link"))}catch(e){}}}function u(n,t,r){i('<div class="msls-text"><a class="id-element" target="_blank"><\/a><\/div>').appendTo(n),r.idElement=nt(n,fi(n,".id-element"))}e("ui.controls","WebAddressViewer",n,r.ui.controls.Text,{controlName:"WebAddressViewer",_refreshView:t},{_fillTemplate:u})}(),function(){var i=r.data.DataBindingMode,n=function(n,i){function u(n,t,i,f){var o,e,s;for(o in t)f.push(o),e=t[o],typeof e=="string"?(s=new r.data.DataBinding(f.join("."),i,e,n,yt.oneWayFromSource),s.bind()):u(n,e,i,f),f.pop()}function e(n,t,i){var r,f;for(r in t)f=t[r],typeof f=="string"?n[f]=vr(i[r]):r==="properties"?e(n,f,i[r]):u(n,f,i,[r])}function o(n,t,i){var u,f,e;for(u in t)f=t[u],e=new r.data.DataBinding(f,i,u,n),e.bind()}i&&(pf[n]=i),iv[n]=function(n,r,u){var a=r.screen.constructor,s,v=i,h,c,l;if(s=new v(n),s.data=r,h=s._propertyMappings,!h||e(s,h,r),c=s._editableProperties,!c||o(s,c,r),u!==t?s.attachView(u):s.render(),l=a[r.name+"_postRender"],!!l)try{l.call(null,n[0],r)}catch(y){r.displayError=f("customControl_postRenderError_2args",r.name,y)}return s}};n("DateTimePicker",r.ui.controls.DateTimePicker),n("DatePicker",r.ui.controls.DatePicker),n("Control",r.ui.Control),n("TextBox",r.ui.controls.TextBox),n("Text",r.ui.controls.Text),n("TextArea",r.ui.controls.TextArea),n("RowsLayout",r.ui.controls.RowsLayout),n("ColumnsLayout",r.ui.controls.ColumnsLayout),n("TableRowLayout",r.ui.controls.TableRowLayout),n("List",r.ui.controls.ListView),n("TileList",r.ui.controls.ListView),n("Table",r.ui.controls.Table),n("Button",r.ui.controls.Button),n("CommandBarButton",r.ui.controls.CommandBarButton),n("Summary",r.ui.controls.Summary),n("MoneyViewer",r.ui.controls.MoneyViewer),n("MoneyEditor",r.ui.controls.MoneyEditor),n("PercentViewer",r.ui.controls.PercentViewer),n("PercentEditor",r.ui.controls.PercentEditor),n("PhoneNumberViewer",r.ui.controls.PhoneNumberViewer),n("PhoneNumberEditor",r.ui.controls.PhoneNumberEditor),n("EmailAddressEditor",r.ui.controls.EmailAddressEditor),n("EmailAddressViewer",r.ui.controls.EmailAddressViewer),n("DocumentEditor",r.ui.controls.DocumentEditor),n("DocumentViewer",r.ui.controls.DocumentViewer),n("FlipSwitchControl",r.ui.controls.FlipSwitchControl),n("WebAddressEditor",r.ui.controls.WebAddressEditor),n("WebAddressViewer",r.ui.controls.WebAddressViewer),n("Image",r.ui.controls.Image),n("ValueDropdown",r.ui.controls.Dropdown),n("DetailsModalPicker",r.ui.controls.ModalPicker),n("Paragraph",r.ui.controls.Paragraph),n("ValueCustomControl",r.ui.controls.CustomControl),n("GroupCustomControl",r.ui.controls.CustomControl),n("CollectionCustomControl",r.ui.controls.CustomControl),n("ScreenCustomControl",r.ui.controls.CustomControl),n("NoControl",r.ui.controls.NoControl)}(),n.msls||(n.msls=d.getPrototypeOf(r))})(window);
// SIG // Begin signature block
// SIG // MIIaqwYJKoZIhvcNAQcCoIIanDCCGpgCAQExCzAJBgUr
// SIG // DgMCGgUAMGcGCisGAQQBgjcCAQSgWTBXMDIGCisGAQQB
// SIG // gjcCAR4wJAIBAQQQEODJBs441BGiowAQS9NQkAIBAAIB
// SIG // AAIBAAIBAAIBADAhMAkGBSsOAwIaBQAEFGy9XGMwPHLq
// SIG // vh+pdGD7Q4qxCgaCoIIVgjCCBMMwggOroAMCAQICEzMA
// SIG // AAA0JDFAyaDBeY0AAAAAADQwDQYJKoZIhvcNAQEFBQAw
// SIG // dzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCldhc2hpbmd0
// SIG // b24xEDAOBgNVBAcTB1JlZG1vbmQxHjAcBgNVBAoTFU1p
// SIG // Y3Jvc29mdCBDb3Jwb3JhdGlvbjEhMB8GA1UEAxMYTWlj
// SIG // cm9zb2Z0IFRpbWUtU3RhbXAgUENBMB4XDTEzMDMyNzIw
// SIG // MDgyNVoXDTE0MDYyNzIwMDgyNVowgbMxCzAJBgNVBAYT
// SIG // AlVTMRMwEQYDVQQIEwpXYXNoaW5ndG9uMRAwDgYDVQQH
// SIG // EwdSZWRtb25kMR4wHAYDVQQKExVNaWNyb3NvZnQgQ29y
// SIG // cG9yYXRpb24xDTALBgNVBAsTBE1PUFIxJzAlBgNVBAsT
// SIG // Hm5DaXBoZXIgRFNFIEVTTjpCOEVDLTMwQTQtNzE0NDEl
// SIG // MCMGA1UEAxMcTWljcm9zb2Z0IFRpbWUtU3RhbXAgU2Vy
// SIG // dmljZTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoC
// SIG // ggEBAOUaB60KlizUtjRkyzQg8rwEWIKLtQncUtRwn+Jc
// SIG // LOf1aqT1ti6xgYZZAexJbCkEHvU4i1cY9cAyDe00kOzG
// SIG // ReW7igolqu+he4fY8XBnSs1q3OavBZE97QVw60HPq7El
// SIG // ZrurorcY+XgTeHXNizNcfe1nxO0D/SisWGDBe72AjTOT
// SIG // YWIIsY9REmWPQX7E1SXpLWZB00M0+peB+PyHoe05Uh/4
// SIG // 6T7/XoDJBjYH29u5asc3z4a1GktK1CXyx8iNr2FnitpT
// SIG // L/NMHoMsY8qgEFIRuoFYc0KE4zSy7uqTvkyC0H2WC09/
// SIG // L88QXRpFZqsC8V8kAEbBwVXSg3JCIoY6pL6TUAECAwEA
// SIG // AaOCAQkwggEFMB0GA1UdDgQWBBRfS0LeDLk4oNRmNo1W
// SIG // +3RZSWaBKzAfBgNVHSMEGDAWgBQjNPjZUkZwCu1A+3b7
// SIG // syuwwzWzDzBUBgNVHR8ETTBLMEmgR6BFhkNodHRwOi8v
// SIG // Y3JsLm1pY3Jvc29mdC5jb20vcGtpL2NybC9wcm9kdWN0
// SIG // cy9NaWNyb3NvZnRUaW1lU3RhbXBQQ0EuY3JsMFgGCCsG
// SIG // AQUFBwEBBEwwSjBIBggrBgEFBQcwAoY8aHR0cDovL3d3
// SIG // dy5taWNyb3NvZnQuY29tL3BraS9jZXJ0cy9NaWNyb3Nv
// SIG // ZnRUaW1lU3RhbXBQQ0EuY3J0MBMGA1UdJQQMMAoGCCsG
// SIG // AQUFBwMIMA0GCSqGSIb3DQEBBQUAA4IBAQAPQlCg1R6t
// SIG // Fz8fCqYrN4pnWC2xME8778JXaexl00zFUHLycyX25IQC
// SIG // xXUccVhDq/HJqo7fym9YPInnL816Nexm19Veuo6fV4aU
// SIG // EKDrUTetV/YneyNPGdjgbXYEJTBhEq2ljqMmtkjlU/JF
// SIG // TsW4iScQnanjzyPpeWyuk2g6GvMTxBS2ejqeQdqZVp7Q
// SIG // 0+AWlpByTK8B9yQG+xkrmLJVzHqf6JI6azF7gPMOnleL
// SIG // t+YFtjklmpeCKTaLOK6uixqs7ufsLr9LLqUHNYHzEyDq
// SIG // tEqTnr+cg1Z/rRUvXClxC5RnOPwwv2Xn9Tne6iLth4yr
// SIG // sju1AcKt4PyOJRUMIr6fDO0dMIIE7DCCA9SgAwIBAgIT
// SIG // MwAAALARrwqL0Duf3QABAAAAsDANBgkqhkiG9w0BAQUF
// SIG // ADB5MQswCQYDVQQGEwJVUzETMBEGA1UECBMKV2FzaGlu
// SIG // Z3RvbjEQMA4GA1UEBxMHUmVkbW9uZDEeMBwGA1UEChMV
// SIG // TWljcm9zb2Z0IENvcnBvcmF0aW9uMSMwIQYDVQQDExpN
// SIG // aWNyb3NvZnQgQ29kZSBTaWduaW5nIFBDQTAeFw0xMzAx
// SIG // MjQyMjMzMzlaFw0xNDA0MjQyMjMzMzlaMIGDMQswCQYD
// SIG // VQQGEwJVUzETMBEGA1UECBMKV2FzaGluZ3RvbjEQMA4G
// SIG // A1UEBxMHUmVkbW9uZDEeMBwGA1UEChMVTWljcm9zb2Z0
// SIG // IENvcnBvcmF0aW9uMQ0wCwYDVQQLEwRNT1BSMR4wHAYD
// SIG // VQQDExVNaWNyb3NvZnQgQ29ycG9yYXRpb24wggEiMA0G
// SIG // CSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDor1yiIA34
// SIG // KHy8BXt/re7rdqwoUz8620B9s44z5lc/pVEVNFSlz7SL
// SIG // qT+oN+EtUO01Fk7vTXrbE3aIsCzwWVyp6+HXKXXkG4Un
// SIG // m/P4LZ5BNisLQPu+O7q5XHWTFlJLyjPFN7Dz636o9UEV
// SIG // XAhlHSE38Cy6IgsQsRCddyKFhHxPuRuQsPWj/ov0DJpO
// SIG // oPXJCiHiquMBNkf9L4JqgQP1qTXclFed+0vUDoLbOI8S
// SIG // /uPWenSIZOFixCUuKq6dGB8OHrbCryS0DlC83hyTXEmm
// SIG // ebW22875cHsoAYS4KinPv6kFBeHgD3FN/a1cI4Mp68fF
// SIG // SsjoJ4TTfsZDC5UABbFPZXHFAgMBAAGjggFgMIIBXDAT
// SIG // BgNVHSUEDDAKBggrBgEFBQcDAzAdBgNVHQ4EFgQUWXGm
// SIG // WjNN2pgHgP+EHr6H+XIyQfIwUQYDVR0RBEowSKRGMEQx
// SIG // DTALBgNVBAsTBE1PUFIxMzAxBgNVBAUTKjMxNTk1KzRm
// SIG // YWYwYjcxLWFkMzctNGFhMy1hNjcxLTc2YmMwNTIzNDRh
// SIG // ZDAfBgNVHSMEGDAWgBTLEejK0rQWWAHJNy4zFha5TJoK
// SIG // HzBWBgNVHR8ETzBNMEugSaBHhkVodHRwOi8vY3JsLm1p
// SIG // Y3Jvc29mdC5jb20vcGtpL2NybC9wcm9kdWN0cy9NaWND
// SIG // b2RTaWdQQ0FfMDgtMzEtMjAxMC5jcmwwWgYIKwYBBQUH
// SIG // AQEETjBMMEoGCCsGAQUFBzAChj5odHRwOi8vd3d3Lm1p
// SIG // Y3Jvc29mdC5jb20vcGtpL2NlcnRzL01pY0NvZFNpZ1BD
// SIG // QV8wOC0zMS0yMDEwLmNydDANBgkqhkiG9w0BAQUFAAOC
// SIG // AQEAMdduKhJXM4HVncbr+TrURE0Inu5e32pbt3nPApy8
// SIG // dmiekKGcC8N/oozxTbqVOfsN4OGb9F0kDxuNiBU6fNut
// SIG // zrPJbLo5LEV9JBFUJjANDf9H6gMH5eRmXSx7nR2pEPoc
// SIG // sHTyT2lrnqkkhNrtlqDfc6TvahqsS2Ke8XzAFH9IzU2y
// SIG // RPnwPJNtQtjofOYXoJtoaAko+QKX7xEDumdSrcHps3Om
// SIG // 0mPNSuI+5PNO/f+h4LsCEztdIN5VP6OukEAxOHUoXgSp
// SIG // Rm3m9Xp5QL0fzehF1a7iXT71dcfmZmNgzNWahIeNJDD3
// SIG // 7zTQYx2xQmdKDku/Og7vtpU6pzjkJZIIpohmgjCCBbww
// SIG // ggOkoAMCAQICCmEzJhoAAAAAADEwDQYJKoZIhvcNAQEF
// SIG // BQAwXzETMBEGCgmSJomT8ixkARkWA2NvbTEZMBcGCgmS
// SIG // JomT8ixkARkWCW1pY3Jvc29mdDEtMCsGA1UEAxMkTWlj
// SIG // cm9zb2Z0IFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9yaXR5
// SIG // MB4XDTEwMDgzMTIyMTkzMloXDTIwMDgzMTIyMjkzMlow
// SIG // eTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCldhc2hpbmd0
// SIG // b24xEDAOBgNVBAcTB1JlZG1vbmQxHjAcBgNVBAoTFU1p
// SIG // Y3Jvc29mdCBDb3Jwb3JhdGlvbjEjMCEGA1UEAxMaTWlj
// SIG // cm9zb2Z0IENvZGUgU2lnbmluZyBQQ0EwggEiMA0GCSqG
// SIG // SIb3DQEBAQUAA4IBDwAwggEKAoIBAQCycllcGTBkvx2a
// SIG // YCAgQpl2U2w+G9ZvzMvx6mv+lxYQ4N86dIMaty+gMuz/
// SIG // 3sJCTiPVcgDbNVcKicquIEn08GisTUuNpb15S3GbRwfa
// SIG // /SXfnXWIz6pzRH/XgdvzvfI2pMlcRdyvrT3gKGiXGqel
// SIG // cnNW8ReU5P01lHKg1nZfHndFg4U4FtBzWwW6Z1KNpbJp
// SIG // L9oZC/6SdCnidi9U3RQwWfjSjWL9y8lfRjFQuScT5EAw
// SIG // z3IpECgixzdOPaAyPZDNoTgGhVxOVoIoKgUyt0vXT2Pn
// SIG // 0i1i8UU956wIAPZGoZ7RW4wmU+h6qkryRs83PDietHdc
// SIG // pReejcsRj1Y8wawJXwPTAgMBAAGjggFeMIIBWjAPBgNV
// SIG // HRMBAf8EBTADAQH/MB0GA1UdDgQWBBTLEejK0rQWWAHJ
// SIG // Ny4zFha5TJoKHzALBgNVHQ8EBAMCAYYwEgYJKwYBBAGC
// SIG // NxUBBAUCAwEAATAjBgkrBgEEAYI3FQIEFgQU/dExTtMm
// SIG // ipXhmGA7qDFvpjy82C0wGQYJKwYBBAGCNxQCBAweCgBT
// SIG // AHUAYgBDAEEwHwYDVR0jBBgwFoAUDqyCYEBWJ5flJRP8
// SIG // KuEKU5VZ5KQwUAYDVR0fBEkwRzBFoEOgQYY/aHR0cDov
// SIG // L2NybC5taWNyb3NvZnQuY29tL3BraS9jcmwvcHJvZHVj
// SIG // dHMvbWljcm9zb2Z0cm9vdGNlcnQuY3JsMFQGCCsGAQUF
// SIG // BwEBBEgwRjBEBggrBgEFBQcwAoY4aHR0cDovL3d3dy5t
// SIG // aWNyb3NvZnQuY29tL3BraS9jZXJ0cy9NaWNyb3NvZnRS
// SIG // b290Q2VydC5jcnQwDQYJKoZIhvcNAQEFBQADggIBAFk5
// SIG // Pn8mRq/rb0CxMrVq6w4vbqhJ9+tfde1MOy3XQ60L/svp
// SIG // LTGjI8x8UJiAIV2sPS9MuqKoVpzjcLu4tPh5tUly9z7q
// SIG // QX/K4QwXaculnCAt+gtQxFbNLeNK0rxw56gNogOlVuC4
// SIG // iktX8pVCnPHz7+7jhh80PLhWmvBTI4UqpIIck+KUBx3y
// SIG // 4k74jKHK6BOlkU7IG9KPcpUqcW2bGvgc8FPWZ8wi/1wd
// SIG // zaKMvSeyeWNWRKJRzfnpo1hW3ZsCRUQvX/TartSCMm78
// SIG // pJUT5Otp56miLL7IKxAOZY6Z2/Wi+hImCWU4lPF6H0q7
// SIG // 0eFW6NB4lhhcyTUWX92THUmOLb6tNEQc7hAVGgBd3TVb
// SIG // Ic6YxwnuhQ6MT20OE049fClInHLR82zKwexwo1eSV32U
// SIG // jaAbSANa98+jZwp0pTbtLS8XyOZyNxL0b7E8Z4L5UrKN
// SIG // MxZlHg6K3RDeZPRvzkbU0xfpecQEtNP7LN8fip6sCvsT
// SIG // J0Ct5PnhqX9GuwdgR2VgQE6wQuxO7bN2edgKNAltHIAx
// SIG // H+IOVN3lofvlRxCtZJj/UBYufL8FIXrilUEnacOTj5XJ
// SIG // jdibIa4NXJzwoq6GaIMMai27dmsAHZat8hZ79haDJLmI
// SIG // z2qoRzEvmtzjcT3XAH5iR9HOiMm4GPoOco3Boz2vAkBq
// SIG // /2mbluIQqBC0N1AI1sM9MIIGBzCCA++gAwIBAgIKYRZo
// SIG // NAAAAAAAHDANBgkqhkiG9w0BAQUFADBfMRMwEQYKCZIm
// SIG // iZPyLGQBGRYDY29tMRkwFwYKCZImiZPyLGQBGRYJbWlj
// SIG // cm9zb2Z0MS0wKwYDVQQDEyRNaWNyb3NvZnQgUm9vdCBD
// SIG // ZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMDcwNDAzMTI1
// SIG // MzA5WhcNMjEwNDAzMTMwMzA5WjB3MQswCQYDVQQGEwJV
// SIG // UzETMBEGA1UECBMKV2FzaGluZ3RvbjEQMA4GA1UEBxMH
// SIG // UmVkbW9uZDEeMBwGA1UEChMVTWljcm9zb2Z0IENvcnBv
// SIG // cmF0aW9uMSEwHwYDVQQDExhNaWNyb3NvZnQgVGltZS1T
// SIG // dGFtcCBQQ0EwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAw
// SIG // ggEKAoIBAQCfoWyx39tIkip8ay4Z4b3i48WZUSNQrc7d
// SIG // GE4kD+7Rp9FMrXQwIBHrB9VUlRVJlBtCkq6YXDAm2gBr
// SIG // 6Hu97IkHD/cOBJjwicwfyzMkh53y9GccLPx754gd6udO
// SIG // o6HBI1PKjfpFzwnQXq/QsEIEovmmbJNn1yjcRlOwhtDl
// SIG // KEYuJ6yGT1VSDOQDLPtqkJAwbofzWTCd+n7Wl7PoIZd+
// SIG // +NIT8wi3U21StEWQn0gASkdmEScpZqiX5NMGgUqi+YSn
// SIG // EUcUCYKfhO1VeP4Bmh1QCIUAEDBG7bfeI0a7xC1Un68e
// SIG // eEExd8yb3zuDk6FhArUdDbH895uyAc4iS1T/+QXDwiAL
// SIG // AgMBAAGjggGrMIIBpzAPBgNVHRMBAf8EBTADAQH/MB0G
// SIG // A1UdDgQWBBQjNPjZUkZwCu1A+3b7syuwwzWzDzALBgNV
// SIG // HQ8EBAMCAYYwEAYJKwYBBAGCNxUBBAMCAQAwgZgGA1Ud
// SIG // IwSBkDCBjYAUDqyCYEBWJ5flJRP8KuEKU5VZ5KShY6Rh
// SIG // MF8xEzARBgoJkiaJk/IsZAEZFgNjb20xGTAXBgoJkiaJ
// SIG // k/IsZAEZFgltaWNyb3NvZnQxLTArBgNVBAMTJE1pY3Jv
// SIG // c29mdCBSb290IENlcnRpZmljYXRlIEF1dGhvcml0eYIQ
// SIG // ea0WoUqgpa1Mc1j0BxMuZTBQBgNVHR8ESTBHMEWgQ6BB
// SIG // hj9odHRwOi8vY3JsLm1pY3Jvc29mdC5jb20vcGtpL2Ny
// SIG // bC9wcm9kdWN0cy9taWNyb3NvZnRyb290Y2VydC5jcmww
// SIG // VAYIKwYBBQUHAQEESDBGMEQGCCsGAQUFBzAChjhodHRw
// SIG // Oi8vd3d3Lm1pY3Jvc29mdC5jb20vcGtpL2NlcnRzL01p
// SIG // Y3Jvc29mdFJvb3RDZXJ0LmNydDATBgNVHSUEDDAKBggr
// SIG // BgEFBQcDCDANBgkqhkiG9w0BAQUFAAOCAgEAEJeKw1wD
// SIG // RDbd6bStd9vOeVFNAbEudHFbbQwTq86+e4+4LtQSooxt
// SIG // YrhXAstOIBNQmd16QOJXu69YmhzhHQGGrLt48ovQ7DsB
// SIG // 7uK+jwoFyI1I4vBTFd1Pq5Lk541q1YDB5pTyBi+FA+mR
// SIG // KiQicPv2/OR4mS4N9wficLwYTp2OawpylbihOZxnLcVR
// SIG // DupiXD8WmIsgP+IHGjL5zDFKdjE9K3ILyOpwPf+FChPf
// SIG // wgphjvDXuBfrTot/xTUrXqO/67x9C0J71FNyIe4wyrt4
// SIG // ZVxbARcKFA7S2hSY9Ty5ZlizLS/n+YWGzFFW6J1wlGys
// SIG // OUzU9nm/qhh6YinvopspNAZ3GmLJPR5tH4LwC8csu89D
// SIG // s+X57H2146SodDW4TsVxIxImdgs8UoxxWkZDFLyzs7BN
// SIG // Z8ifQv+AeSGAnhUwZuhCEl4ayJ4iIdBD6Svpu/RIzCzU
// SIG // 2DKATCYqSCRfWupW76bemZ3KOm+9gSd0BhHudiG/m4LB
// SIG // J1S2sWo9iaF2YbRuoROmv6pH8BJv/YoybLL+31HIjCPJ
// SIG // Zr2dHYcSZAI9La9Zj7jkIeW1sMpjtHhUBdRBLlCslLCl
// SIG // eKuzoJZ1GtmShxN1Ii8yqAhuoFuMJb+g74TKIdbrHk/J
// SIG // mu5J4PcBZW+JC33Iacjmbuqnl84xKf8OxVtc2E0bodj6
// SIG // L54/LlUWa8kTo/0xggSVMIIEkQIBATCBkDB5MQswCQYD
// SIG // VQQGEwJVUzETMBEGA1UECBMKV2FzaGluZ3RvbjEQMA4G
// SIG // A1UEBxMHUmVkbW9uZDEeMBwGA1UEChMVTWljcm9zb2Z0
// SIG // IENvcnBvcmF0aW9uMSMwIQYDVQQDExpNaWNyb3NvZnQg
// SIG // Q29kZSBTaWduaW5nIFBDQQITMwAAALARrwqL0Duf3QAB
// SIG // AAAAsDAJBgUrDgMCGgUAoIGuMBkGCSqGSIb3DQEJAzEM
// SIG // BgorBgEEAYI3AgEEMBwGCisGAQQBgjcCAQsxDjAMBgor
// SIG // BgEEAYI3AgEVMCMGCSqGSIb3DQEJBDEWBBQneo6nffL/
// SIG // s49RqM6GRaY9U3WfeTBOBgorBgEEAYI3AgEMMUAwPqAk
// SIG // gCIAbQBzAGwAcwAtADIALgAwAC4AMAAuAG0AaQBuAC4A
// SIG // agBzoRaAFGh0dHA6Ly9taWNyb3NvZnQuY29tMA0GCSqG
// SIG // SIb3DQEBAQUABIIBANgA1TjWn581nnjF9u+/+eC9isPY
// SIG // ftKIii9H+4fljOdnBhoWHTrI/21zY9dM79RWxav1IU4Y
// SIG // kqSamvIZlUty8G/mABZ5TuVn14ondU4YLvlXukwcz9kx
// SIG // 3/8NSsSZOX/ogv99cu2Ppiikr4OLDprolzYxVVWRvKZB
// SIG // +KaVzWXK9CHUvDNH1nHtZHYVAq8AxVD/e182gMOB258k
// SIG // 8Ib6wDiSPAB0wHxbNCtfuMnZF5oevS6JZClfbbMyvBcE
// SIG // sv4GP0ylrMX2wTg5PteFio/BsFHVUn9edNE2Cle0bb1n
// SIG // wIqcYm+KiITdV+gRQO2aMl3q/2ArlpEieQ8HwkUN9suW
// SIG // jxDQezuhggIoMIICJAYJKoZIhvcNAQkGMYICFTCCAhEC
// SIG // AQEwgY4wdzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCldh
// SIG // c2hpbmd0b24xEDAOBgNVBAcTB1JlZG1vbmQxHjAcBgNV
// SIG // BAoTFU1pY3Jvc29mdCBDb3Jwb3JhdGlvbjEhMB8GA1UE
// SIG // AxMYTWljcm9zb2Z0IFRpbWUtU3RhbXAgUENBAhMzAAAA
// SIG // NCQxQMmgwXmNAAAAAAA0MAkGBSsOAwIaBQCgXTAYBgkq
// SIG // hkiG9w0BCQMxCwYJKoZIhvcNAQcBMBwGCSqGSIb3DQEJ
// SIG // BTEPFw0xMzA4MjcxMzQ2MDNaMCMGCSqGSIb3DQEJBDEW
// SIG // BBT8s/9g8klT8/zNnDdhAYGxzyBb3jANBgkqhkiG9w0B
// SIG // AQUFAASCAQBnV3uu4ix/5gq3omxIiAWpOlK7Vl4XDjhH
// SIG // jFShF4vTI8vIQygk77jTobfgdPnP+6zotZDg7njT3Ltc
// SIG // xI5KhkoIgvrzecYSWJ7rlJCVj+Sb1buIBRTZJ4+DF4d+
// SIG // 4jkeDBGxwosRKp8uwvOaLpkm6NpmE9eYqcvLyj0liY9Q
// SIG // aG6ks/UawyXvJp6Q2yB6c+LyQjz6GPJubrrWwONImuhK
// SIG // vihV/TQ6ijLxKuImm9SPZUkeFpjb3FjIghwHPBX5uIVv
// SIG // CSCpf2AtG/Vk6eutnaj7hEnO7Zfx83RBRsCD4fybpawL
// SIG // /U6D8YD82S8a8XO4FHYM2LnCxtKjWCSamS3oHoMfWgAt
// SIG // End signature block
